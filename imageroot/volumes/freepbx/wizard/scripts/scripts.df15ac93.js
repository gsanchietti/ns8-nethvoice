"use strict";angular.module("nethvoiceWizardUiApp",["ngCookies","ngResource","ngRoute","ngSanitize","pascalprecht.translate","ui.bootstrap","as.sortable","patternfly","frapontillo.bootstrap-switch","ui.ace"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard"}).when("/extensions",{templateUrl:"views/extensions.html",controller:"UsersExtensionsCtrl",controllerAs:"extensions"}).when("/users",{templateUrl:"views/users.html",controller:"UsersCtrl",controllerAs:"users"}).when("/trunks",{templateUrl:"views/trunks.html",controller:"TrunksCtrl",controllerAs:"trunks"}).when("/routes",{templateUrl:"views/routes.html",controller:"RoutesCtrl",controllerAs:"routes"}).when("/devices",{templateUrl:"views/devices.html",controller:"DevicesCtrl",controllerAs:"devices"}).when("/devices/inventory",{templateUrl:"views/devices/inventory.html",controller:"DevicesInventoryCtrl",controllerAs:"devices/inventory"}).when("/devices/models",{templateUrl:"views/devices/models.html",controller:"DevicesModelsCtrl",controllerAs:"devices/models"}).when("/trunks/physical",{templateUrl:"views/trunks/physical.html",controller:"TrunksPhysicalCtrl",controllerAs:"trunks/physical"}).when("/trunks/voip",{templateUrl:"views/trunks/voip.html",controller:"TrunksVoipCtrl",controllerAs:"trunks/voip"}).when("/routes/inbound",{templateUrl:"views/routes/inbound.html",controller:"RoutesInboundCtrl",controllerAs:"routes/inbound"}).when("/routes/outbound",{templateUrl:"views/routes/outbound.html",controller:"RoutesOutboundCtrl",controllerAs:"routes/outbound"}).when("/configurations/devices",{templateUrl:"views/configurations/devices.html",controller:"UsersDevicesCtrl",controllerAs:"configurations/devices"}).when("/configurations/groups",{templateUrl:"views/configurations/groups.html",controller:"UsersGroupsCtrl",controllerAs:"configurations/groups"}).when("/configurations/profiles",{templateUrl:"views/configurations/profiles.html",controller:"UsersProfilesCtrl",controllerAs:"configurations/profiles"}).when("/configurations/preferences",{templateUrl:"views/configurations/preferences.html",controller:"ConfigurationsCtrl",controllerAs:"configurations/preferences"}).when("/configurations/preferencesFreepbx",{templateUrl:"views/configurations/preferencesFreepbx.html",controller:"OtherConfigurationsCtrl",controllerAs:"configurations/preferencesFreepbx"}).when("/final",{templateUrl:"views/final.html",controller:"FinalCtrl",controllerAs:"final"}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminCtrl",controllerAs:"admin"}).when("/admin/settings",{templateUrl:"views/admin/settings.html",controller:"AdminSettingsCtrl",controllerAs:"admin/settings"}).when("/admin/report",{templateUrl:"views/admin/report.html",controller:"AdminReportCtrl",controllerAs:"admin/report"}).when("/apps",{templateUrl:"views/apps.html",controller:"AppsCtrl",controllerAs:"apps"}).when("/apps/cards",{templateUrl:"views/apps/cards.html",controller:"AppsCardsCtrl",controllerAs:"apps/cards"}).when("/apps/streaming",{templateUrl:"views/apps/streaming.html",controller:"AppsStreamingCtrl",controllerAs:"apps/streaming"}).when("/apps/paramurl",{templateUrl:"views/apps/paramurl.html",controller:"AppsParamurlCtrl",controllerAs:"apps/paramurl"}).when("/admin/languages",{templateUrl:"views/admin/languages.html",controller:"AdminLanguagesCtrl",controllerAs:"admin/languages"}).when("/apps/bulkextensions",{templateUrl:"views/apps/bulkextensions.html",controller:"BulkextensionsCtrl",controllerAs:"bulkextensions"}).when("/apps/bulkdevices",{templateUrl:"views/apps/bulkdevices.html",controller:"BulkdevicesCtrl",controllerAs:"Bulkdevices"}).when("/migration",{templateUrl:"views/migration.html",controller:"MigrationCtrl",controllerAs:"migration"}).when("/migration/users",{templateUrl:"views/migration/users.html",controller:"UsersmigrationCtrl",controllerAs:"usersmigration"}).when("/migration/config",{templateUrl:"views/migration/config.html",controller:"ConfigmigrationCtrl",controllerAs:"configmigration"}).when("/migration/cdr",{templateUrl:"views/migration/cdr.html",controller:"CdrmigrationCtrl",controllerAs:"cdrmigration"}).when("/migration/report",{templateUrl:"views/migration/report.html",controller:"ReportmigrationCtrl",controllerAs:"reportmigration"}).when("/apps/phonebook",{templateUrl:"views/apps/phonebook.html",controller:"PhonebookCtrl",controllerAs:"phonebook"}).when("/bulkdevices",{templateUrl:"views/bulkdevices.html",controller:"BulkdevicesCtrl",controllerAs:"bulkdevices"}).otherwise({redirectTo:"/"})}]).config(["$translateProvider",function(e){e.useSanitizeValueStrategy(null),e.useStaticFilesLoader({prefix:"scripts/i18n/locale-",suffix:".json"}),e.fallbackLanguage("en")}]);var appConfig_OLD={TOTAL_STEP:11,STEP_MAP:{extensions:1,physical:2,voip:3,inbound:4,outbound:5,groups:6,profiles:7,devices:8,configurations:9,languages:10,settings:11},STEP_MAP_REVERSE:{0:"users",1:"extensions",2:"trunks/physical",3:"trunks/voip",4:"routes/inbound",5:"routes/outbound",6:"configurations/groups",7:"configurations/profiles",8:"configurations/devices",9:"configurations/preferencesFreepbx",10:"admin/languages",11:"admin/settings"},TRUNKS_PREV_STEP:1,ROUTES_PREV_STEP:3,ADMINS_PREV_STEP:9,STEP_WIZARD:{extensions:{prev:!1,next:"trunks/physical"},physical:{prev:"extensions",next:"trunks/voip"},voip:{prev:"trunks/physical",next:"routes/inbound"},inbound:{prev:"trunks/voip",next:"routes/outbound"},outbound:{prev:"routes/inbound",next:"configurations/groups"},groups:{prev:"routes/oubound",next:"configurations/profiles"},profiles:{prev:"configurations/groups",next:"configurations/devices"},devices:{prev:"configurations/profiles",next:"configurations/preferencesFreepbx"},preferences:{prev:"configurations/devices",next:"admin/languages"},languages:{prev:"configurations/preferencesFreepbx",next:"admin/settings"},settings:{prev:"admin/languages",next:!1,last:!0}},MAX_TRIES:6,INTERVAL_POLLING:2e3},appConfig={TOTAL_STEP:13,STEP_MAP:{extensions:1,physical:2,voip:3,inbound:4,outbound:5,devices:6,inventory:7,models:8,groups:9,profiles:10,preferences:11,languages:12,settings:13},STEP_MAP_REVERSE:{0:"users",1:"extensions",2:"trunks/physical",3:"trunks/voip",4:"routes/inbound",5:"routes/outbound",6:"devices",7:"devices/inventory",8:"devices/models",9:"configurations/groups",10:"configurations/profiles",11:"configurations/preferences",12:"admin/languages",13:"admin/settings"},TRUNKS_PREV_STEP:1,ROUTES_PREV_STEP:3,DEVICES_PREV_STEP:5,CONFIG_PREV_STEP:8,ADMINS_PREV_STEP:11,STEP_WIZARD:{extensions:{prev:!1,next:"trunks/physical"},physical:{prev:"extensions",next:"trunks/voip"},voip:{prev:"trunks/physical",next:"routes/inbound"},inbound:{prev:"trunks/voip",next:"routes/outbound"},outbound:{prev:"routes/inbound",next:"devices"},devices:{prev:"routes/inbound",next:"devices/inventory"},inventory:{prev:"devices",next:"devices/models"},models:{prev:"devices/inventory",next:"configurations/groups"},groups:{prev:"devices/models",next:"configurations/profiles"},profiles:{prev:"configurations/groups",next:"configurations/preferences"},preferences:{prev:"configurations/profiles",next:"admin/languages"},languages:{prev:"configurations/preferences",next:"admin/settings"},settings:{prev:"admin/languages",next:!1,last:!0}},MAX_TRIES:6,INTERVAL_POLLING:2e3},migrationConfig={INDEX_MAP:{1:"profiles",2:"users",3:"vtrunks",4:"gateptrunks",5:"iax",6:"outroutes",7:"groups",8:"queues",9:"ivr",10:"cqr",11:"recordings",12:"announcements",13:"daynight",14:"tgroupstcond",15:"iroutes",16:"postmig",17:"cdr"},LABEL_INFO:{profiles:{route:"/migration/users",functions:["cloneOldCTIProfile"],prev:!1,next:"users"},users:{route:"/migration/users",functions:["csvimport"],prev:"profiles",next:"vtrunks"},vtrunks:{route:"/migration/config",functions:["copyOldTrunks"],prev:"users",next:"gateptrunks"},gateptrunks:{route:"/migration/config",functions:["getOldGateways"],prev:"vtrunks",next:"iax"},iax:{route:"/migration/config",functions:["migrateIAX"],prev:"gateptrunks",next:"outroutes"},outroutes:{route:"/migration/config",functions:["copyOldOutboundRoutes","migrateRoutesTrunksAssignements"],prev:"gateptrunks",next:"groups"},groups:{route:"/migration/config",functions:["migrateGroups"],prev:"outroutes",next:"queues"},queues:{route:"/migration/config",functions:["migrateQueues"],prev:"groups",next:"ivr"},ivr:{route:"/migration/config",functions:["migrateIVRs"],prev:"queues",next:"cqr"},cqr:{route:"/migration/config",functions:["migrateCQRs"],prev:"ivr",next:"recordings"},recordings:{route:"/migration/config",functions:["migrateRecordings"],prev:"cqr",next:"announcements"},announcements:{route:"/migration/config",functions:["migrateAnnouncements"],prev:"recordings",next:"daynight"},daynight:{route:"/migration/config",functions:["daynight"],prev:"announcements",next:"tgroupstcond"},tgroupstcond:{route:"/migration/config",functions:["migrateTimegroups","migrateTimeconditions"],prev:"announcements",next:"iroutes"},iroutes:{route:"/migration/config",functions:["migrateInboundRoutes"],prev:"tgroupstcond",next:"postmig"},postmig:{route:"/migration/config",functions:["postMigration"],prev:"iroutes",next:"cdr"},cdr:{route:"/migration/cdr",functions:["cdrmigration"],prev:"iroutes",next:null}}},CryptoJS=CryptoJS||function(e,n){var t={},a=t.lib={},s=function(){},i=a.Base={extend:function(e){s.prototype=this;var n=new s;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=void 0!=n?n:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var n=this.words,t=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var s=0;s<e;s++)n[a+s>>>2]|=(t[s>>>2]>>>24-s%4*8&255)<<24-(a+s)%4*8;else if(65535<t.length)for(s=0;s<e;s+=4)n[a+s>>>2]=t[s>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],a=0;a<n;a+=4)t.push(4294967296*e.random()|0);return new o.init(t,n)}}),l=t.enc={},r=l.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],a=0;a<e;a++){var s=n[a>>>2]>>>24-a%4*8&255;t.push((s>>>4).toString(16)),t.push((15&s).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],a=0;a<n;a+=2)t[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(t,n/2)}},c=l.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],a=0;a<e;a++)t.push(String.fromCharCode(n[a>>>2]>>>24-a%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],a=0;a<n;a++)t[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(t,n)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,a=t.words,s=t.sigBytes,i=this.blockSize,l=s/(4*i);if(n=(l=n?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*i,s=e.min(4*n,s),n){for(var r=0;r<n;r+=i)this._doProcessBlock(a,r);r=a.splice(0,n),t.sigBytes-=s}return new o.init(r,s)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new p.HMAC.init(e,t).finalize(n)}}});var p=t.algo={};return t}(Math);!function(){var e=CryptoJS,n=(s=e.lib).WordArray,t=s.Hasher,a=[],s=e.algo.SHA1=t.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,n){for(var t=this._hash.words,s=t[0],i=t[1],o=t[2],l=t[3],r=t[4],c=0;80>c;c++){if(16>c)a[c]=0|e[n+c];else{var d=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=d<<1|d>>>31}d=(s<<5|s>>>27)+r+a[c],d=20>c?d+(1518500249+(i&o|~i&l)):40>c?d+(1859775393+(i^o^l)):60>c?d+((i&o|i&l|o&l)-1894007588):d+((i^o^l)-899497514),r=l,l=o,o=i<<30|i>>>2,i=s,s=d}t[0]=t[0]+s|0,t[1]=t[1]+i|0,t[2]=t[2]+o|0,t[3]=t[3]+l|0,t[4]=t[4]+r|0},_doFinalize:function(){var e=this._data,n=e.words,t=8*this._nDataBytes,a=8*e.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=Math.floor(t/4294967296),n[15+(a+64>>>9<<4)]=t,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=t._createHelper(s),e.HmacSHA1=t._createHmacHelper(s)}();CryptoJS=CryptoJS||function(e,n){var t={},a=t.lib={},s=function(){},i=a.Base={extend:function(e){s.prototype=this;var n=new s;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=void 0!=n?n:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var n=this.words,t=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var s=0;s<e;s++)n[a+s>>>2]|=(t[s>>>2]>>>24-s%4*8&255)<<24-(a+s)%4*8;else if(65535<t.length)for(s=0;s<e;s+=4)n[a+s>>>2]=t[s>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],a=0;a<n;a+=4)t.push(4294967296*e.random()|0);return new o.init(t,n)}}),l=t.enc={},r=l.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],a=0;a<e;a++){var s=n[a>>>2]>>>24-a%4*8&255;t.push((s>>>4).toString(16)),t.push((15&s).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],a=0;a<n;a+=2)t[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(t,n/2)}},c=l.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],a=0;a<e;a++)t.push(String.fromCharCode(n[a>>>2]>>>24-a%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],a=0;a<n;a++)t[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(t,n)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,a=t.words,s=t.sigBytes,i=this.blockSize,l=s/(4*i);if(n=(l=n?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*i,s=e.min(4*n,s),n){for(var r=0;r<n;r+=i)this._doProcessBlock(a,r);r=a.splice(0,n),t.sigBytes-=s}return new o.init(r,s)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new p.HMAC.init(e,t).finalize(n)}}});var p=t.algo={};return t}(Math);!function(e){function n(e,n,t,a,s,i,o){return((e=e+(n&t|~n&a)+s+o)<<i|e>>>32-i)+n}function t(e,n,t,a,s,i,o){return((e=e+(n&a|t&~a)+s+o)<<i|e>>>32-i)+n}function a(e,n,t,a,s,i,o){return((e=e+(n^t^a)+s+o)<<i|e>>>32-i)+n}function s(e,n,t,a,s,i,o){return((e=e+(t^(n|~a))+s+o)<<i|e>>>32-i)+n}for(var i=CryptoJS,o=(r=i.lib).WordArray,l=r.Hasher,r=i.algo,c=[],d=0;64>d;d++)c[d]=4294967296*e.abs(e.sin(d+1))|0;r=r.MD5=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var l=e[u=i+o];e[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}o=this._hash.words;var r,d,u=e[i+0],p=(l=e[i+1],e[i+2]),f=e[i+3],m=e[i+4],g=e[i+5],v=e[i+6],b=e[i+7],h=e[i+8],y=e[i+9],w=e[i+10],k=e[i+11],x=e[i+12],S=e[i+13],M=e[i+14],_=e[i+15],C=o[0],A=s(A=s(A=s(A=s(A=a(A=a(A=a(A=a(A=t(A=t(A=t(A=t(A=n(A=n(A=n(A=n(A=o[1],d=n(d=o[2],r=n(r=o[3],C=n(C,A,d,r,u,7,c[0]),A,d,l,12,c[1]),C,A,p,17,c[2]),r,C,f,22,c[3]),d=n(d,r=n(r,C=n(C,A,d,r,m,7,c[4]),A,d,g,12,c[5]),C,A,v,17,c[6]),r,C,b,22,c[7]),d=n(d,r=n(r,C=n(C,A,d,r,h,7,c[8]),A,d,y,12,c[9]),C,A,w,17,c[10]),r,C,k,22,c[11]),d=n(d,r=n(r,C=n(C,A,d,r,x,7,c[12]),A,d,S,12,c[13]),C,A,M,17,c[14]),r,C,_,22,c[15]),d=t(d,r=t(r,C=t(C,A,d,r,l,5,c[16]),A,d,v,9,c[17]),C,A,k,14,c[18]),r,C,u,20,c[19]),d=t(d,r=t(r,C=t(C,A,d,r,g,5,c[20]),A,d,w,9,c[21]),C,A,_,14,c[22]),r,C,m,20,c[23]),d=t(d,r=t(r,C=t(C,A,d,r,y,5,c[24]),A,d,M,9,c[25]),C,A,f,14,c[26]),r,C,h,20,c[27]),d=t(d,r=t(r,C=t(C,A,d,r,S,5,c[28]),A,d,p,9,c[29]),C,A,b,14,c[30]),r,C,x,20,c[31]),d=a(d,r=a(r,C=a(C,A,d,r,g,4,c[32]),A,d,h,11,c[33]),C,A,k,16,c[34]),r,C,M,23,c[35]),d=a(d,r=a(r,C=a(C,A,d,r,l,4,c[36]),A,d,m,11,c[37]),C,A,b,16,c[38]),r,C,w,23,c[39]),d=a(d,r=a(r,C=a(C,A,d,r,S,4,c[40]),A,d,u,11,c[41]),C,A,f,16,c[42]),r,C,v,23,c[43]),d=a(d,r=a(r,C=a(C,A,d,r,y,4,c[44]),A,d,x,11,c[45]),C,A,_,16,c[46]),r,C,p,23,c[47]),d=s(d,r=s(r,C=s(C,A,d,r,u,6,c[48]),A,d,b,10,c[49]),C,A,M,15,c[50]),r,C,g,21,c[51]),d=s(d,r=s(r,C=s(C,A,d,r,x,6,c[52]),A,d,f,10,c[53]),C,A,w,15,c[54]),r,C,l,21,c[55]),d=s(d,r=s(r,C=s(C,A,d,r,h,6,c[56]),A,d,_,10,c[57]),C,A,v,15,c[58]),r,C,S,21,c[59]),d=s(d,r=s(r,C=s(C,A,d,r,m,6,c[60]),A,d,k,10,c[61]),C,A,p,15,c[62]),r,C,y,21,c[63]);o[0]=o[0]+C|0,o[1]=o[1]+A|0,o[2]=o[2]+d|0,o[3]=o[3]+r|0},_doFinalize:function(){var n=this._data,t=n.words,a=8*this._nDataBytes,s=8*n.sigBytes;t[s>>>5]|=128<<24-s%32;var i=e.floor(a/4294967296);for(t[15+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(s+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n.sigBytes=4*(t.length+1),this._process(),t=(n=this._hash).words,a=0;4>a;a++)s=t[a],t[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);return n},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=l._createHelper(r),i.HmacMD5=l._createHmacHelper(r)}(Math),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ejs=e()}}(function(){return function e(n,t,a){function s(o,l){if(!t[o]){if(!n[o]){var r="function"==typeof require&&require;if(!l&&r)return r(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=t[o]={exports:{}};n[o][0].call(d.exports,function(e){var t=n[o][1][e];return s(t||e)},d,d.exports,e,n,t,a)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({1:[function(e,n,t){var a=e("fs"),s=e("path"),i=e("./utils"),o=!1,l=e("../package.json").version,r="%",c="locals",d=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename"],u=d.concat("cache"),p=/^\uFEFF/;function f(e,n){var a;if("/"==e.charAt(0))a=t.resolveInclude(e.replace(/^\/*/,""),n.root||"/",!0);else{if(!n.filename)throw new Error("`include` use relative path requires the 'filename' option.");a=t.resolveInclude(e,n.filename)}return a}function m(e,n){var a,s=e.filename,i=arguments.length>1;if(e.cache){if(!s)throw new Error("cache option requires a filename");if(a=t.cache.get(s))return a;i||(n=g(s).toString().replace(p,""))}else if(!i){if(!s)throw new Error("Internal EJS error: no file name or template provided");n=g(s).toString().replace(p,"")}return a=t.compile(n,e),e.cache&&t.cache.set(s,a),a}function g(e){return t.fileLoader(e)}function v(e,n,t,a,s){var i=n.split("\n"),o=Math.max(a-3,0),l=Math.min(i.length,a+3),r=s(t),c=i.slice(o,l).map(function(e,n){var t=n+o+1;return(t==a?" >> ":"    ")+t+"| "+e}).join("\n");throw e.path=r,e.message=(r||"ejs")+":"+a+"\n"+c+"\n\n"+e.message,e}function b(e){return e.replace(/;(\s*$)/,"$1")}function h(e,n){n=n||{};var a={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],a.client=n.client||!1,a.escapeFunction=n.escape||i.escapeXML,a.compileDebug=!1!==n.compileDebug,a.debug=!!n.debug,a.filename=n.filename,a.delimiter=n.delimiter||t.delimiter||r,a.strict=n.strict||!1,a.context=n.context,a.cache=n.cache||!1,a.rmWhitespace=n.rmWhitespace,a.root=n.root,a.localsName=n.localsName||t.localsName||c,a.strict?a._with=!1:a._with=void 0===n._with||n._with,this.opts=a,this.regex=this.createRegex()}t.cache=i.cache,t.fileLoader=a.readFileSync,t.localsName=c,t.resolveInclude=function(e,n,t){var a=s.dirname,i=s.extname,o=(0,s.resolve)(t?n:a(n),e);return i(e)||(o+=".ejs"),o},t.compile=function(e,n){return n&&n.scope&&(o||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),o=!0),n.context||(n.context=n.scope),delete n.scope),new h(e,n).compile()},t.render=function(e,n,t){var a=n||{},s=t||{};return 2==arguments.length&&i.shallowCopyFromList(s,a,d),m(s,e)(a)},t.renderFile=function(){var e,n=arguments[0],t=arguments[arguments.length-1],a={filename:n};return arguments.length>2?(e=arguments[1],3===arguments.length?e.settings&&e.settings["view options"]?i.shallowCopyFromList(a,e.settings["view options"],u):i.shallowCopyFromList(a,e,u):i.shallowCopy(a,arguments[2]),a.filename=n):e={},function(e,n,t){var a;try{a=m(e)(n)}catch(e){return t(e)}return t(null,a)}(a,e,t)},t.clearCache=function(){t.cache.reset()},h.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},h.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",n=i.escapeRegExpChars(this.opts.delimiter);return e=e.replace(/%/g,n),new RegExp(e)},compile:function(){var e,n,t=this.opts,a="",s="",o=t.escapeFunction;this.source||(this.generateSource(),a+="  var __output = [], __append = __output.push.bind(__output);\n",!1!==t._with&&(a+="  with ("+t.localsName+" || {}) {\n",s+="  }\n"),s+='  return __output.join("");\n',this.source=a+this.source+s),e=t.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(t.filename?JSON.stringify(t.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,t.debug&&console.log(e),t.client&&(e="escapeFn = escapeFn || "+o.toString()+";\n"+e,t.compileDebug&&(e="rethrow = rethrow || "+v.toString()+";\n"+e)),t.strict&&(e='"use strict";\n'+e);try{n=new Function(t.localsName+", escapeFn, include, rethrow",e)}catch(e){throw e instanceof SyntaxError&&(t.filename&&(e.message+=" in "+t.filename),e.message+=" while compiling ejs\n\n",e.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",e.message+="https://github.com/RyanZim/EJS-Lint"),e}if(t.client)return n.dependencies=this.dependencies,n;var l=function(e){return n.apply(t.context,[e||{},o,function(n,a){var s=i.shallowCopy({},e);return a&&(s=i.shallowCopy(s,a)),function(e,n){var t=i.shallowCopy({},n);return t.filename=f(e,t),m(t)}(n,t)(s)},v])};return l.dependencies=this.dependencies,l},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var e=this,n=this.parseTemplateText(),a=this.opts.delimiter;n&&n.length&&n.forEach(function(s,o){var l,r,c,d,u,m;if(0===s.indexOf("<"+a)&&0!==s.indexOf("<"+a+a)&&(r=n[o+2])!=a+">"&&r!="-"+a+">"&&r!="_"+a+">")throw new Error('Could not find matching close tag for "'+s+'".');if((c=s.match(/^\s*include\s+(\S+)/))&&(l=n[o-1])&&(l=="<"+a||l=="<"+a+"-"||l=="<"+a+"_"))return d=i.shallowCopy({},e.opts),u=function(e,n){var t,a,s=i.shallowCopy({},n);a=g(t=f(e,s)).toString().replace(p,""),s.filename=t;var o=new h(a,s);return o.generateSource(),{source:o.source,filename:t,template:a}}(c[1],d),m=e.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(u.template)+"\n      , __filename = "+JSON.stringify(u.filename)+";\n      try {\n"+u.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+u.source+"    ; }).call(this)\n",e.source+=m,void e.dependencies.push(t.resolveInclude(c[1],d.filename));e.scanLine(s)})},parseTemplateText:function(){for(var e,n=this.templateText,t=this.regex,a=t.exec(n),s=[];a;)0!==(e=a.index)&&(s.push(n.substring(0,e)),n=n.slice(e)),s.push(a[0]),n=n.slice(a[0].length),a=t.exec(n);return n&&s.push(n),s},scanLine:function(e){var n,t=this,a=this.opts.delimiter;function s(){t.truncate?(e=e.replace(/^(?:\r\n|\r|\n)/,""),t.truncate=!1):t.opts.rmWhitespace&&(e=e.replace(/^\n/,"")),e&&(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),t.source+='    ; __append("'+e+'")\n')}switch(n=e.split("\n").length-1,e){case"<"+a:case"<"+a+"_":this.mode=h.modes.EVAL;break;case"<"+a+"=":this.mode=h.modes.ESCAPED;break;case"<"+a+"-":this.mode=h.modes.RAW;break;case"<"+a+"#":this.mode=h.modes.COMMENT;break;case"<"+a+a:this.mode=h.modes.LITERAL,this.source+='    ; __append("'+e.replace("<"+a+a,"<"+a)+'")\n';break;case a+a+">":this.mode=h.modes.LITERAL,this.source+='    ; __append("'+e.replace(a+a+">",a+">")+'")\n';break;case a+">":case"-"+a+">":case"_"+a+">":this.mode==h.modes.LITERAL&&s(),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case h.modes.EVAL:case h.modes.ESCAPED:case h.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case h.modes.EVAL:this.source+="    ; "+e+"\n";break;case h.modes.ESCAPED:this.source+="    ; __append(escapeFn("+b(e)+"))\n";break;case h.modes.RAW:this.source+="    ; __append("+b(e)+")\n";break;case h.modes.COMMENT:break;case h.modes.LITERAL:s()}}else s()}t.opts.compileDebug&&n&&(this.currentLine+=n,this.source+="    ; __line = "+this.currentLine+"\n")}},t.escapeXML=i.escapeXML,t.__express=t.renderFile,e.extensions&&(e.extensions[".ejs"]=function(e,n){var a=n||e.filename,s={filename:a,client:!0},i=g(a).toString(),o=t.compile(i,s);e._compile("module.exports = "+o.toString()+";",a)}),t.VERSION=l,t.name="ejs","undefined"!=typeof window&&(window.ejs=t)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(e,n,t){var a=/[|\\{}()[\]^$+*?.]/g;t.escapeRegExpChars=function(e){return e?String(e).replace(a,"\\$&"):""};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},i=/[&<>\'"]/g;function o(e){return s[e]||e}t.escapeXML=function(e){return void 0==e?"":String(e).replace(i,o)},t.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},t.shallowCopy=function(e,n){for(var t in n=n||{})e[t]=n[t];return e},t.shallowCopyFromList=function(e,n,t){for(var a=0;a<t.length;a++){var s=t[a];void 0!==n[s]&&(e[s]=n[s])}return e},t.cache={_data:{},set:function(e,n){this._data[e]=n},get:function(e){return this._data[e]},reset:function(){this._data={}}}},{}],3:[function(e,n,t){},{}],4:[function(e,n,t){(function(e){function n(e,n){for(var t=0,a=e.length-1;a>=0;a--){var s=e[a];"."===s?e.splice(a,1):".."===s?(e.splice(a,1),t++):t&&(e.splice(a,1),t--)}if(n)for(;t--;t)e.unshift("..");return e}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return a.exec(e).slice(1)};function i(e,n){if(e.filter)return e.filter(n);for(var t=[],a=0;a<e.length;a++)n(e[a],a,e)&&t.push(e[a]);return t}t.resolve=function(){for(var t="",a=!1,s=arguments.length-1;s>=-1&&!a;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return t=n(i(t.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+t||"."},t.normalize=function(e){var a=t.isAbsolute(e),s="/"===o(e,-1);return(e=n(i(e.split("/"),function(e){return!!e}),!a).join("/"))||a||(e="."),e&&s&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,n){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function a(e){for(var n=0;n<e.length&&""===e[n];n++);for(var t=e.length-1;t>=0&&""===e[t];t--);return n>t?[]:e.slice(n,t-n+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var s=a(e.split("/")),i=a(n.split("/")),o=Math.min(s.length,i.length),l=o,r=0;r<o;r++)if(s[r]!==i[r]){l=r;break}var c=[];for(r=l;r<s.length;r++)c.push("..");return(c=c.concat(i.slice(l))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var n=s(e),t=n[0],a=n[1];return t||a?(a&&(a=a.substr(0,a.length-1)),t+a):"."},t.basename=function(e,n){var t=s(e)[2];return n&&t.substr(-1*n.length)===n&&(t=t.substr(0,t.length-n.length)),t},t.extname=function(e){return s(e)[3]};var o="b"==="ab".substr(-1)?function(e,n,t){return e.substr(n,t)}:function(e,n,t){return n<0&&(n=e.length+n),e.substr(n,t)}}).call(this,e("_process"))},{_process:5}],5:[function(e,n,t){var a,s,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function r(e){if(a===setTimeout)return setTimeout(e,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(n){try{return a.call(null,e,0)}catch(n){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var c,d=[],u=!1,p=-1;function f(){u&&c&&(u=!1,c.length?d=c.concat(d):p=-1,d.length&&m())}function m(){if(!u){var e=r(f);u=!0;for(var n=d.length;n;){for(c=d,d=[];++p<n;)c&&c[p].run();p=-1,n=d.length}c=null,u=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(n){try{return s.call(null,e)}catch(n){return s.call(this,e)}}}(e)}}function g(e,n){this.fun=e,this.array=n}function v(){}i.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];d.push(new g(e,n)),1!==d.length||u||r(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(e,n,t){n.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.6",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"mocha",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)}),function(){var e=["en","it"],n={ab:{name:"Abkhaz",nativeName:"аҧсуа"},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:"አማርኛ"},ar:{name:"Arabic",nativeName:"العربية"},an:{name:"Aragonese",nativeName:"Aragonés"},hy:{name:"Armenian",nativeName:"Հայերեն"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ, магӀарул мацӀ"},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:"Беларуская"},bn:{name:"Bengali",nativeName:"বাংলা"},bh:{name:"Bihari",nativeName:"भोजपुरी"},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:"български език"},my:{name:"Burmese",nativeName:"ဗမာစာ"},ca:{name:"Catalan; Valencian",nativeName:"Català"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiCheŵa, chinyanja"},zh:{name:"Chinese",nativeName:"中文 (Zhōngwén), 汉语, 漢語"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"česky, čeština"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:"ދިވެހި"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"Eʋegbe"},fo:{name:"Faroese",nativeName:"føroyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"Français"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:"ქართული"},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:"Ελληνικά"},gn:{name:"Guaraní",nativeName:"Avañeẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},ht:{name:"Haitian; Haitian Creole",nativeName:"Kreyòl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, هَوُسَ"},he:{name:"Hebrew (modern)",nativeName:"עברית"},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:"हिन्दी, हिंदी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ik:{name:"Inupiaq",nativeName:"Iñupiaq, Iñupiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語 (にほんご／にっぽんご)"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी, كشميري‎"},kk:{name:"Kazakh",nativeName:"Қазақ тілі"},km:{name:"Khmer",nativeName:"ភាសាខ្មែរ"},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gĩkũyũ"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:"кыргыз тили"},kv:{name:"Komi",nativeName:"коми кыв"},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:"한국어 (韓國語), 조선말 (朝鮮語)"},ku:{name:"Kurdish",nativeName:"Kurdî, كوردی‎"},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"Lëtzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາລາວ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latviešu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:"македонски јазик"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu, بهاس ملايو‎"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Māori",nativeName:"te reo Māori"},mr:{name:"Marathi (Marāṭhī)",nativeName:"मराठी"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mn:{name:"Mongolian",nativeName:"монгол"},na:{name:"Nauru",nativeName:"Ekakairũ Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Diné bizaad, Dinékʼehǰí"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:"ѩзыкъ словѣньскъ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian, Ossetic",nativeName:"ирон æвзаг"},pa:{name:"Panjabi, Punjabi",nativeName:"ਪੰਜਾਬੀ, پنجابی‎"},pi:{name:"Pāli",nativeName:"पाऴि"},fa:{name:"Persian",nativeName:"فارسی"},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"română"},ru:{name:"Russian",nativeName:"русский язык"},sa:{name:"Sanskrit (Saṁskṛta)",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी, سنڌي، سندھی‎"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},sr:{name:"Serbian",nativeName:"српски језик"},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"Gàidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovene",nativeName:"slovenščina"},so:{name:"Somali",nativeName:"Soomaaliga"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish; Castilian",nativeName:"Español"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ, toğikī, تاجیکی‎"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:"བོད་ཡིག"},tk:{name:"Turkmen",nativeName:"Türkmen, Түркмен"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татарча, tatarça, تاتارچا‎"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:"Uyƣurqə, ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"zbek, Ўзбек, أۇزبېك‎"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang, Chuang",nativeName:"Saɯ cueŋƅ, Saw cuengh"}};window.getLanguageName=function(e){e=e.slice(0,2);var t=n[e];return t?t.name:void 0},window.getLanguageNativeName=function(e){e=e.slice(0,2);var t=n[e];return t?t.nativeName:void 0},window.getAllLanguagesKey=function(){return n},window.getAllSupportedLanguagesKey=function(){return e}}(),angular.module("nethvoiceWizardUiApp").controller("UsersCtrl",["$scope","$location","$interval","ConfigService","UtilService",function(e,n,t,a,s){e.showConfigSwitch=!1,e.startInstall=!1,e.currentProgress=0,e.selectedMode="",e.taskPromise=null,e.errorCount=0,e.nextStepUsers=function(){var t=e.wizard.stepCount;n.path("/extensions"),(!t||t&&"0"==t)&&a.setWizard({status:"true",step:"1"}).then(function(e){},function(e){console.log(e)})},e.getProviderStatus=function(){a.getConfig().then(function(n){0===n.data.configured?(e.view.changeRoute=!1,e.showConfigSwitch=!0):"ldap"===n.data.type?(e.mode.isLdap=!0,e.nextStepUsers()):(e.mode.isLdap=!1,e.nextStepUsers())},function(e){console.log(e)})},e.$on("$destroy",function(){t.cancel(e.taskPromise)}),e.goNethserverSssdConfig=function(){window.location.href=window.location.origin+":9090/nethserver#/users-groups"},e.makeChoice=function(i){e.startInstall||(e.selectedMode=i,e.startInstall=!0,a.setConfig(i).then(function(a){"legacy"===i?($("#uc-button").addClass("disabled"),e.taskPromise=t(function(){s.taskStatus(a.data.result).then(function(a){a.data.progress<100?(e.errorCount=0,e.currentProgress=a.data.progress):100==a.data.progress?(e.errorCount=0,t.cancel(e.taskPromise),e.currentProgress=100,e.mode.isLdap=!0,e.wizard.isMigration&&(e.wizard.isMigrationView=!0,e.wizard.isWizard=!1,n.path("/migration"))):(console.log(a.error),e.errorCount<appConfig.MAX_TRIES?e.errorCount++:(t.cancel(e.taskPromise),e.currentProgress=-1))},function(n){console.log(n),e.errorCount<appConfig.MAX_TRIES?e.errorCount++:(t.cancel(e.taskPromise),e.currentProgress=-1)})},5e3)):($("#legacy-button").addClass("disabled"),e.currentProgress=100)},function(e){console.log(e)}))},e.getProviderStatus()}]),angular.module("nethvoiceWizardUiApp").controller("UsersExtensionsCtrl",["$scope","$rootScope","$location","$interval","ConfigService","UserService","UtilService",function(e,n,t,a,s,i,o){e.users={},e.providerLocal=!1,e.taskPromise=null,e.onSave=!1,e.lockOnList=!1,e.availableUsersFilters=["all","configured","unconfigured"],e.selectedUsersFilter=e.availableUsersFilters[0],e.view.changeRoute=!0,e.usersLimit=20,e.error={file:{status:!1,title:"File format error",content:"File must be a CSV"}},e.temp={errorCount:0,currentProgress:0},n.$on("scrollingContainerView",function(){e.users&&e.users.length>e.usersLimit&&(e.usersLimit+=e.SCROLLPLUS)}),e.checkDefaultExtensions=function(){for(var n in e.wizard.nextState=!1,e.users)"none"!=e.users[n].default_extension&&(e.wizard.nextState=!0)},e.checkUserProviderStatus=function(){s.getConfig().then(function(n){e.view.changeRoute=!1,0===n.data.configured?(e.showConfigSwitch=!0,t.path("/users")):(n.data.local,e.providerLocal=!0,"ldap"===n.data.type?e.mode.isLdap=!0:e.mode.isLdap=!1)},function(n){e.view.changeRoute=!1,console.log(n)})},e.getUserList=function(){e.lockOnList||(e.lockOnList=!0,i.list(!0).then(function(n){e.users=n.data,e.checkUserProviderStatus(),o.isEmpty(e.users)?e.wizard.nextState=!1:e.checkDefaultExtensions(),e.lockOnList=!1,i.count().then(function(n){e.menuCount.users=n.data},function(e){console.log(e)})},function(n){e.users={},e.view.changeRoute=!1,e.lockOnList=!1,console.log(n)}))},e.createUser=function(n){e.onSave=!0,i.create(n).then(function(t){i.setPassword(n.username,{password:o.randomPassword(8)}).then(function(n){e.onSave=!1,$("#createUser").modal("hide"),e.newUser={},e.getUserList()},function(n){e.onSave=!1,console.log(n)})},function(n){e.onSave=!1,console.log(n)})},e.setMainExtension=function(n){n.isInAction=!0,n.alreadyExists=!1,i.createMainExtension({username:n.username,extension:"none"!==n.default_extension?n.default_extension:n.temp_ext}).then(function(t){n.isInAction=!1,n.temp_ext&&0==n.temp_ext.length&&"none"==n.default_extension||0==n.default_extension.length?(n.default_extension="none",e.checkDefaultExtensions()):(n.default_extension="none"!==n.default_extension?n.default_extension:n.temp_ext,e.wizard.nextState=!0)},function(e){n.isInAction=!1,422==e.status&&(n.alreadyExists=!0),console.log(e)})},e.csvExport=function(){i.getCsv().then(function(e){var n=document.getElementById("dlLink");n.href="data:application/octet-stream;base64,"+e.data,n.click()},function(e){console.log(e)})},e.fileSelectImport=function(){$("#importInput").click(),$("#importInput").change(function(n){if(void 0!=n.target.files[0].name){e.temp.csvFileName=n.target.files[0].name;var t=new FileReader;t.onload=function(n){e.$apply(function(){e.temp.file64=n.target.result,e.error.file.status=!1,$("#importInput").val(""),$("#importInput").unbind()})},t.readAsDataURL(n.target.files[0]),$("#importModal").modal("show")}else e.$apply(function(){e.error.file.status=!0})})},e.importError=function(){e.temp.loadingCancel=!1,a.cancel(e.taskPromise),e.getUserList(),e.temp.currentProgress=-1},e.importConfirm=function(n){e.temp.loading=!0,e.temp.loadingCancel=!0,i.setCsvImport({file:n}).then(function(n){e.taskPromise=a(function(){i.statusCsvImport(n.data.result).then(function(n){n.data.result<100&&null!=n.data.result?(e.temp.errorCount=0,e.temp.currentProgress=n.data.result):100==n.data.result?(a.cancel(e.taskPromise),e.temp.errorCount=0,e.temp.currentProgress=100,e.getUserList(),setTimeout(function(){$("#importModal").modal("hide"),e.temp.errorCount=0,e.temp.currentProgress=0,e.temp.loading=!1,e.temp.loadingCancel=!1},1e3)):(console.log(n.error),e.importError())},function(n){console.log(n),e.importError()})},5e3)},function(n){console.log(n),e.importError()})},e.clearImport=function(){e.temp.errorCount=0,e.temp.currentProgress=0,e.temp.loading=!1,e.temp.loadingCancel=!1},e.$on("$destroy",function(){a.cancel(e.taskPromise)}),e.getUserList()}]),angular.module("nethvoiceWizardUiApp").controller("TrunksCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("nethvoiceWizardUiApp").controller("RoutesCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("nethvoiceWizardUiApp").controller("UsersDevicesCtrl",["$scope","$interval","ConfigService","DeviceService","UtilService",function(e,n,t,a,s){e.allDevices={},e.allModels={},e.networks={},e.networkLength=0,e.tasks={},e.scanned=!1,e.orderByValue=function(e){return e},e.getPhoneModelList=function(){a.phoneModelList().then(function(n){e.allModels=n.data},function(e){console.log(e)})},e.getNetworkList=function(n){e.view.changeRoute=n,t.getNetworks().then(function(n){for(var t in e.networks=n.data,n.data)e.tasks[t]={},e.allDevices[t]={};e.networkLength=Object.keys(n.data).length,e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.getPhoneList=function(n,t,s){a.phoneListByNetwork(t).then(function(t){e.allDevices[n]=t.data,e.tasks[n].currentProgress=100,e.scanned=!0,s(null)},function(t){404!==t.status?e.tasks[n].currentProgress=-1:e.tasks[n].currentProgress=100,s(t)})},e.startScan=function(t,i){if(e.tasks[t].currentProgress>0&&e.tasks[t].currentProgress<100)return!0;e.tasks[t].startScan=!0,e.tasks[t].currentProgress=Math.floor(50*Math.random()+10),a.startScan(i).then(function(a){e.tasks[t].promise=n(function(){s.taskStatus(a.data.result).then(function(a){a.data.progress<100?e.errorCount=0:100==a.data.progress?(e.tasks[t].errorCount=0,n.cancel(e.tasks[t].promise),e.getPhoneList(t,i,function(e){e&&console.log(e)})):(console.log(a.error),e.tasks[t].errorCount<appConfig.MAX_TRIES?e.tasks[t].errorCount++:(n.cancel(e.tasks[t].promise),e.tasks[t].currentProgress=-1))},function(a){console.log(a),e.tasks[t].errorCount<appConfig.MAX_TRIES?e.tasks[t].errorCount++:(n.cancel(e.tasks[t].promise),e.tasks[t].currentProgress=-1)})},appConfig.INTERVAL_POLLING)},function(n){e.tasks[t].currentProgress=-1,console.log(n)})},e.setPhoneModel=function(e){a.setPhoneModel({mac:e.mac,vendor:e.manufacturer,model:e.model}).then(function(e){},function(e){console.log(e)})},e.getNetworkList(!0),e.getPhoneModelList()}]),angular.module("nethvoiceWizardUiApp").controller("ConfigurationsCtrl",["$scope","$rootScope","$q","ConfigurationService","ProfileService","ModelService","DeviceService","UserService","PhoneService","DashboardService","$timeout",function(e,n,t,a,s,i,o,l,r,c,d){e.view.changeRoute=!0,e.allUsers=[],e.allProfiles=[],e.allGroups=[],e.allDevices=[],e.devicesNotLinked=[],e.allModels=[],e.currentUser={},e.loadingUser={},e.loadingModel={},e.hiddenUser={},e.linkTo="",e.newDevice={},e.deviceToLink={},e.deviceToLink.device=null,e.deviceExtension="",e.passwordExtension="",e.USERS_PAGE=15,e.usersLimit=e.USERS_PAGE,e.DEVICES_NOT_LINKED_PAGE=15,e.usersLimit=20,e.devicesNotLinkedLimit=e.DEVICES_NOT_LINKED_PAGE,e.availableUserFilters=["all","configured","unconfigured"],e.availableUserFiltersNumbers=["lname","default_extension"],e.usersFilter=e.availableUserFilters[0],e.usersFilterNumbers=e.availableUserFiltersNumbers[0],n.$on("scrollingContainerView",function(){e.allUsers&&e.allUsers.length>e.usersLimit&&(e.usersLimit+=e.SCROLLPLUS)}),e.setCurrentUser=function(n){n.username==e.currentUser.username?e.hiddenUser[n.username]=!e.hiddenUser[n.username]:(e.currentUser=n,e.currentExtension=e.currentUser.default_extension,e.loadingUser[n.username]=!0,e.hiddenUser={}),"none"!==n.default_extension&&(e.currentUserIndex=n,e.currentUser=e.allUsers.filter(function(e){if(e.id==n.id)return e})[0],e.currentExtension=e.currentUser.default_extension,s.getUserGroup(e.currentUser.id).then(function(n){e.currentUser.groups=n.data},function(e){404!=e.status&&console.log(e)}),l.getVoiceMail(e.currentUser.default_extension).then(function(n){n.data&&n.data.mailbox?e.currentUser.voiceMailState=!0:e.currentUser.voiceMailState=!1},function(n){404!=n.status&&console.log(n),e.currentUser.voiceMailState=!1}),l.getMobileNumber(e.currentUser.username).then(function(n){e.currentUser.mobile=n.data},function(e){404!=e.status&&console.log(e)}),l.getWebRTCExtension(e.currentUser.default_extension).then(function(n){e.currentUser.webRtcState=!0},function(n){404!=n.status&&console.log(n),e.currentUser.webRtcState=!1}),l.getMobileExtension(e.currentUser.default_extension).then(function(n){e.currentUser.mobileAppState=!0},function(n){404!=n.status&&console.log(n),e.currentUser.mobileAppState=!1}),f(e.currentUser.devices),u(e.currentUser.devices))};var u=function(n){for(let s in n)if(n[s].mac){e.currentUser.devices[s].availableModels=[];for(let i in e.allModels)t=e.allModels[i].name,a=n[s].mac,t.toLowerCase().startsWith(r.getVendor(a,e.macVendors).toLowerCase())&&e.currentUser.devices[s].availableModels.push(e.allModels[i])}var t,a},p=function(){e.loadingUser[e.currentUser.username]=!1},f=function(n){if(n){let t;for(let e in n)"physical"==n[e].type&&(t=!0);t?e.currentUser.devices.forEach(function(n,t){"physical"==n.type&&function(n,t){a.getEncryption(n).then(function(n){p(),e.currentUser.devices[t].encryption=n.data},function(e){p(),console.log(e)})}(n.extension,t)}):setTimeout(function(){e.$apply(function(){p()})},2e3)}else setTimeout(function(){e.$apply(function(){p()})},2e3)};e.setMobileApp=function(n){l.createMobileExtension({mainextension:n}).then(function(n){e.currentUser.mobileAppState=!0,e.currentUser.devices[Object.keys(e.currentUser.devices).length]={type:"mobile",extension:n.data.extension}},function(e){console.log("err",e)})},e.deleteMobileApp=function(n){l.deleteMobileExtension(n).then(function(){e.currentUser.mobileAppState=!1;for(let n in e.currentUser.devices)"mobile"==e.currentUser.devices[n].type&&delete e.currentUser.devices[n]},function(e){console.log("err",e)})},e.toggleMobileApp=function(){if(e.currentUser.mobileAppState)e.setMobileApp(e.currentUser.default_extension);else{let n;for(let t in e.currentUser.devices)"mobile"==e.currentUser.devices[t].type&&(n=e.currentUser.devices[t].extension);e.deleteMobileApp(n)}},e.setCurrentModelConfig=function(n,t){e.destroyAllSelects("#singleModelModal"),e.buildModel(n,"configurations").then(function(n){e.currentModel.mac=t,e.modelLdapTypeCheck(),r.getPhone(t).then(function(n){e.currentModel.inputs=angular.copy(n.data.variables),e.currentModel.singleVariables=angular.copy(n.data.variables);for(let t in n.data.variables)e.currentModel.storedVariables[t]=n.data.variables[t],e.currentModel.variables[t]=n.data.variables[t];$("#singleModelModal").modal("show")},function(){console.log(err)})},function(e){console.log(e)})},e.setDeviceModel=function(e){let n=angular.copy(e.mac.replace(/:/g,"-"));r.setPhoneModel(n,e.model.name).then(function(t){l.setPhoneModel(n,e.model.name).then(function(e){},function(e){console.log(e)})},function(e){console.log(e)})},e.openDevices=function(n){e.linkTo=n.username,e.currentExtension=n.default_extension,e.deviceToLink.device=null,e.showResultLinkToUser=!1,e.linkToUserSuccess=!1};var m=function(n){n.forEach(function(n){if(n.mac&&(n.mac=r.formatMac(n.mac)),n.model){var t=e.allModels.find(function(e){return e.name===n.model});t&&(n.model=t)}n.hasOwnProperty("vendor")&&(n.manufacturer=n.vendor,delete n.vendor)})},g=function(){a.list(!1).then(function(n){e.allUsers=n.data,e.view.changeRoute=!1,e.allUsers.forEach(function(n){m(n.devices),n.username==e.currentUser.username&&(e.currentUser.devices=n.devices,f(e.currentUser.devices),u(e.currentUser.devices))})},function(e){console.log(e)})},v=function(){o.phoneList().then(function(n){e.allDevices=n.data,m(e.allDevices),e.devicesNotLinked=[],e.allDevices.forEach(function(n){n.lines&&0!=n.lines.length&&n.lines[0].extension||e.devicesNotLinked.push(n)})},function(e){console.log(e)})};e.getNameFromExtension=function(n){if(e.allUsers.filter){var t=e.allUsers.filter(function(e){if(e.default_extension==n)return e})[0];return t&&t.displayname?t.displayname:""}},e.rebootDevice=function(e){var n={};n[e.mac]={},e.rebootInAction=!0,r.setPhoneReboot(n).then(function(n){var t=!1;Object.keys(n.data).forEach(function(e){204!==n.data[e].code&&(t=!0)}),t?(console.log("Error rebooting device"),e.rebootInAction="err"):e.rebootInAction="ok",d(function(){e.rebootInAction=!1},4e3)},function(e){console.log(e)})},e.configureAndRebootPhone=function(e){e.setPhysicalInAction=!0,o.generateDeviceConfig({mac:e.mac}).then(function(n){o.rebootPhone({mac:e.mac,ip:e.ipv4}).then(function(n){e.setPhysicalInAction=!1,e.inError=!1},function(n){console.log(n),e.setPhysicalInAction=!1,e.inError=!0})},function(n){console.log(n),e.setPhysicalInAction=!1,e.inError=!0})},e.bulkPhonesConfiguration=function(n){var t=$filter("filter")(e.allDevices,n);for(var a in t)e.isConfigured(t[a])&&(e.configureAndRebootPhone(t[a]),$("#bulkModal").modal("hide"))},e.isConfigured=function(e){for(var n in e.lines){if(e.lines[n].extension)return!0}};var b=function(n,t){n.setPhysicalInAction=!0,n.linkPhysicalInAction=!0,n.linkInAction=!0,e.linkToUserInProgress=!0,l.createPhysicalExtension({mainextension:e.currentExtension,mac:n.mac||null,model:n.model||null,line:t||null,web_user:"admin",web_password:e.defaults.adminpw||"admin",clear_temporary:!0}).then(function(t){n.setPhysicalInAction="ok",n.linkPhysicalInAction="ok",n.linkInAction="ok",n.web_password="",n.web_user="",n.extension=t.data.extension,e.linkToUserInProgress=!1,e.showResultLinkToUser=!0,e.linkToUserSuccess=!0,n.encryption="https"===e.defaults.provisioning_url_scheme,e.switchEncryption(n),d(function(){e.modelLdapTypeCheck()},1e3),d(function(){g(!1),v()},1e3)},function(t){console.log(t),n.setPhysicalInAction="err",n.linkPhysicalInAction="err",n.linkInAction="err",e.linkToUserInProgress=!1,e.showResultLinkToUser=!0,"There aren't available extension numbers"==t.data.status&&(e.maxExtensionReached=!0)})};e.setPhysicalExtension=function(n,t){e.defaults?b(n,t):i.getDefaults().then(function(a){e.defaults=a.data,b(n,t)},function(e){console.log(e)})},e.deletePhysicalExtension=function(e,n){e.setPhysicalInAction=!0,l.deletePhysicalExtension(n).then(function(n){e.setPhysicalInAction="ok",g(!1),v()},function(n){e.setPhysicalInAction="err",console.log(n)})};var h=function(){setTimeout(function(){e.currentUser.setMobileInAction=!1,e.$apply()},1500)};e.setMobileNumber=function(n){e.currentUser.setMobileInAction=!0,l.createMobileNumber({username:n.username,mobile:n.mobile}).then(function(n){e.currentUser.setMobileInAction="ok",h()},function(n){console.log(n),e.currentUser.setMobileInAction="err",h()})},e.setVoiceMail=function(){e.currentUser.setVoiceMailInAction=!0,l.createVoiceMail({extension:e.currentUser.default_extension,state:e.currentUser.voiceMailState?"yes":"no"}).then(function(n){e.currentUser.setVoiceMailInAction=!1},function(n){console.log(n),e.currentUser.setVoiceMailInAction=!1})},e.setWebRTC=function(n,t){e.currentUser.setWebRTCInAction=!0,e.currentUser.webRtcState?l.createWebRTCExtension({extension:e.currentUser.default_extension}).then(function(n){e.currentUser.setWebRTCInAction=!1,g(!1)},function(n){console.log(n),e.currentUser.setWebRTCInAction=!1}):l.deleteWebRTCExtension(e.currentUser.default_extension).then(function(n){e.currentUser.setWebRTCInAction=!1,g(!1)},function(n){console.log(n),e.currentUser.setWebRTCInAction=!1})},e.setProfile=function(){s.setUserProfile(e.currentUser.id,{profile_id:e.currentUser.profile}).then(function(e){},function(e){console.log(e)})},e.setGroup=function(){s.setUserGroup(e.currentUser.id,{groups:e.currentUser.groups}).then(function(e){},function(e){console.log(e)})},e.switchEncryption=function(e){a.setEncryption(e.extension,e.encryption).then(function(e){},function(e){console.log(e)})},e.checkConfiguredExtensions=function(e,n){if("all"==n)return!0;var t=e.lines.length;for(var a in e.lines){e.lines[a].extension&&t--}return"unlinked"==n?t==e.lines.length:t!=e.lines.length},$("#devicesAssociation").on("hidden.bs.modal",function(){for(var n in e.newDevice.linkInAction=!1,e.allDevices)e.allDevices[n].linkPhysicalInAction=!1,e.allDevices[n].setPhysicalInAction=!1,e.allDevices[n].linkInAction=!1;v()}),e.openProvisioningInfo=function(n,a){t.all([r.getPhone(n),c.getExtension(a)]).then(function(n){e.currentPhoneInfo=n[0].data,e.urlToCopy=n[0].data.provisioning_url1?n[0].data.provisioning_url1:n[0].data.provisioning_url2,e.currentPhoneInfo.model=n[1].data.sipuseragent,e.currentPhoneInfo.codecs=n[1].data.codecs.join(),e.currentPhoneInfo.ip=n[1].data.ip,e.emptyDeviceInfo=!1,$("#provisioningInfoModal").modal("show")},function(n){e.emptyDeviceInfo=!0,$("#provisioningInfoModal").modal("show"),console.log(n)})};var y=function(){e.$apply(function(){e.usersLimit+=e.USERS_PAGE})},w=function(){e.$apply(function(){e.devicesNotLinkedLimit+=e.DEVICES_NOT_LINKED_PAGE})};document.addEventListener("configScroll",y),document.addEventListener("configDevicesScroll",w),e.$on("$routeChangeStart",function(){document.removeEventListener("configScroll",y),document.removeEventListener("configDevicesScroll",w),e.view.changeRoute=!0,e.usersLimit=e.USERS_PAGE,e.devicesNotLinkedLimit=e.DEVICES_NOT_LINKED_PAGE,e.allUsers=null,e.allProfiles=null,e.allGroups=null,e.allDevices=null,e.devicesNotLinked=null,e.allModels=null,e.currentUser=null,e.currentModel={}}),$("#provisioningInfoModal").on("hide.bs.modal",function(){$("#provisioningInfoModal #showurlbtn").popover("hide"),e.currentPhoneInfo={}});var k=function(){i.getModels().then(function(n){e.allModels=n.data,g(),v()},function(e){console.log(e)}),s.allProfiles().then(function(n){e.allProfiles=n.data},function(e){console.log(e)}),s.allGroups().then(function(n){e.allGroups=n.data},function(e){console.log(e)}),$("[data-toggle=popover]").popovers().on("hidden.bs.popover",function(e){$(e.target).data("bs.popover").inState.click=!1})};e.setModalPhysical=function(n){e.hostname=window.location.hostname,e.deviceExtension=n.extension,e.passwordExtension=n.secret},angular.element(document).ready(function(){e.macVendors?k():r.getMacVendors().then(function(n){e.$parent.macVendors=n.data,k()},function(e){console.log(e)})})}]),angular.module("nethvoiceWizardUiApp").controller("OtherConfigurationsCtrl",["$scope","$rootScope","$filter","UserService","DeviceService","ProfileService","UtilService",function(e,n,t,a,s,i,o){e.users={},e.selectedUser=null,e.devices=[],e.allProfiles=[],e.allGroups=[],e.maxExtensionReached=!1,e.view.changeRoute=!0,e.newDevice={},e.usersLimit=20,e.devicesLimit=20,e.availableUserFilters=["all","configured","unconfigured"],e.availableUserFiltersNumbers=["lname","default_extension"],e.selectedUserFilter=e.availableUserFilters[0],e.selectedUserFilterNumbers=e.availableUserFiltersNumbers[0],e.availableDeviceFilters=["all","linked","unlinked"],e.selectedDeviceFilter=e.availableDeviceFilters[0],e.cancelError=function(){e.maxExtensionReached=!1},e.scrollingUserContainer=function(){e.users&&e.users.length>e.usersLimit&&(e.usersLimit+=e.SCROLLPLUS)},e.scrollingDeviceContainer=function(){e.devices&&e.devices.length>e.devicesLimit&&(e.devicesLimit+=e.SCROLLPLUS)},e.getAllProfiles=function(){i.allProfiles().then(function(n){e.allProfiles=n.data},function(e){console.log(e)})},e.getAllGroups=function(){i.allGroups().then(function(n){e.allGroups=n.data},function(e){console.log(e)})},e.getUserList=function(){a.list(!1).then(function(n){e.users=n.data,e.getDeviceList();var t=0;for(var a in e.users)if("none"!==e.users[a].default_extension){t=a;break}e.selectUser(e.currentUserIndex||e.users[t],!0),e.mode.isLdap&&o.isEmpty(e.users)&&(e.wizard.nextState=!1)},function(e){console.log(e)})},e.getDeviceList=function(){s.phoneList().then(function(n){e.view.changeRoute=!1,e.devices=n.data},function(n){e.view.changeRoute=!1,console.log(n)})},e.getNameFromExtension=function(n){if(e.users.filter){var t=e.users.filter(function(e){if(e.default_extension==n)return e})[0];return t&&t.displayname?t.displayname:""}},e.resetDeviceSearch=function(){e.searchDeviceUserString=""},e.selectUser=function(n,t){if(!t)if(n.devices.length>0)for(var s in n.devices){if("physical"===n.devices[s].type||"temporaryphysical"===n.devices[s].type){e.searchDeviceUserString=n.username;break}e.searchDeviceUserString=""}else e.searchDeviceUserString="";"none"!==n.default_extension&&(e.currentUserIndex=n,e.selectedUser=e.users.filter(function(e){if(e.id==n.id)return e})[0],i.getUserGroup(e.selectedUser.id).then(function(n){e.selectedUser.groups=n.data},function(e){404!=e.status&&console.log(e)}),a.getVoiceMail(e.selectedUser.default_extension).then(function(n){n.data&&n.data.mailbox?e.selectedUser.voiceMailState=!0:e.selectedUser.voiceMailState=!1},function(n){404!=n.status&&console.log(n),e.selectedUser.voiceMailState=!1}),a.getMobileNumber(e.selectedUser.username).then(function(n){e.selectedUser.mobile=n.data},function(e){404!=e.status&&console.log(e)}),a.getWebRTCExtension(e.selectedUser.default_extension).then(function(n){e.selectedUser.webRtcState=!0},function(n){404!=n.status&&console.log(n),e.selectedUser.webRtcState=!1}),a.getMobileExtension(e.selectedUser.default_extension).then(function(n){e.selectedUser.mobileAppState=!0},function(n){404!=n.status&&console.log(n),e.selectedUser.mobileAppState=!1}))},e.configureAndRebootPhone=function(e){e.setPhysicalInAction=!0,s.generateDeviceConfig({mac:e.mac}).then(function(n){s.rebootPhone({mac:e.mac,ip:e.ipv4}).then(function(n){console.log(n),e.setPhysicalInAction=!1,e.inError=!1},function(n){console.log(n),e.setPhysicalInAction=!1,e.inError=!0})},function(n){console.log(n),e.setPhysicalInAction=!1,e.inError=!0})},e.bulkPhonesConfiguration=function(n){var a=t("filter")(e.devices,n);for(var s in a)e.isConfigured(a[s])&&(e.configureAndRebootPhone(a[s]),$("#bulkModal").modal("hide"))},e.isConfigured=function(e){for(var n in e.lines){if(e.lines[n].extension)return!0}},e.setMobileApp=function(n){a.createMobileExtension({mainextension:n}).then(function(n){e.selectedUser.mobileAppState=!0,e.selectedUser.devices[Object.keys(e.selectedUser.devices).length]={type:"mobile",extension:n.data.extension}},function(e){console.log("err",e)})},e.setMobileNumber=function(n){e.selectedUser.setMobileInAction=!0,a.createMobileNumber({username:n.username,mobile:n.mobile}).then(function(n){e.selectedUser.setMobileInAction=!1},function(n){console.log(n),e.selectedUser.setMobileInAction=!1})},e.deleteMobileApp=function(n){a.deleteMobileExtension(n).then(function(){e.selectedUser.mobileAppState=!1;for(let n in e.selectedUser.devices)"mobile"==e.selectedUser.devices[n].type&&delete e.selectedUser.devices[n]},function(e){console.log("err",e)})},e.toggleMobileApp=function(){if(e.selectedUser.mobileAppState)e.setMobileApp(e.selectedUser.default_extension);else{let n;for(let t in e.selectedUser.devices)"mobile"==e.selectedUser.devices[t].type&&(n=e.selectedUser.devices[t].extension);e.deleteMobileApp(n)}},e.setPhysicalExtension=function(n,t,s){t.setPhysicalInAction=!0,a.createPhysicalExtension({mainextension:n.default_extension,mac:t.mac||null,model:t.model||null,line:s||null,web_user:t.web_user||"admin",web_password:t.web_password||"admin",clear_temporary:!0}).then(function(n){t.setPhysicalInAction=!1,t.web_password="",t.web_user="",e.getUserList(!1)},function(n){t.setPhysicalInAction=!1,console.log(n),"There aren't available extension numbers"==n.data.status&&(e.maxExtensionReached=!0)})},e.deletePhysicalExtension=function(n,t){n.setPhysicalInAction=!0,a.deletePhysicalExtension(t).then(function(t){n.setPhysicalInAction=!1,e.getUserList(!1),console.log(t)},function(e){n.setPhysicalInAction=!1,console.log(e)})},e.setVoiceMail=function(){e.selectedUser.setVoiceMailInAction=!0,a.createVoiceMail({extension:e.selectedUser.default_extension,state:e.selectedUser.voiceMailState?"yes":"no"}).then(function(n){e.selectedUser.setVoiceMailInAction=!1},function(n){console.log(n),e.selectedUser.setVoiceMailInAction=!1})},e.setWebRTC=function(n,t){e.selectedUser.setWebRTCInAction=!0,e.selectedUser.webRtcState?a.createWebRTCExtension({extension:e.selectedUser.default_extension}).then(function(n){e.selectedUser.setWebRTCInAction=!1,e.getUserList(!1)},function(n){console.log(n),e.selectedUser.setWebRTCInAction=!1}):a.deleteWebRTCExtension(e.selectedUser.default_extension).then(function(n){e.selectedUser.setWebRTCInAction=!1,e.getUserList(!1)},function(n){console.log(n),e.selectedUser.setWebRTCInAction=!1})},e.setAppMobile=function(n,t){e.selectedUser.setAppMobileInAction=!0},e.setProfile=function(){i.setUserProfile(e.selectedUser.id,{profile_id:e.selectedUser.profile}).then(function(e){console.log(e)},function(e){console.log(e)})},e.setGroup=function(){i.setUserGroup(e.selectedUser.id,{groups:e.selectedUser.groups}).then(function(e){console.log(e)},function(e){console.log(e)})},e.checkConfiguredExtensions=function(e,n){if("all"==n)return!0;var t=e.lines.length;for(var a in e.lines){e.lines[a].extension&&t--}return"unlinked"==n?t==e.lines.length:t!=e.lines.length},e.getUserList(),e.getAllProfiles(),e.getAllGroups()}]),angular.module("nethvoiceWizardUiApp").controller("DevicesInventoryCtrl",["$scope","$rootScope","$interval","$q","$timeout","PhoneService","ModelService","UtilService","ConfigService","DeviceService","LocalStorageService","UserService",function(e,n,t,a,s,i,o,l,r,c,d,u){e.phones=[],e.models=[],e.tasks={},e.networkScanInProgress=!1,e.view.changeRoute=!0,e.pastedMacs=[],e.successfulAddPhones=[],e.failedAddPhones=[],e.failedRpsAddPhones=[],e.errors=[],e.errorId=0,e.modelLoaders={},e.showSuccessfullyAddedPhones=!1,e.maxPastedMacCharacters=3600,e.PHONES_PAGE=15,e.phonesLimit=e.PHONES_PAGE,e.phonesLimit=20;function p(n){e.models=n,s(function(){$("select").selectpicker("refresh")},1e3)}function f(n){e.phones=[],n.forEach(function(n){var t=i.buildPhone(n,e.models,e.macVendors);e.phones.push(t)}),setTimeout(function(){e.$apply(function(){e.view.changeRoute=!1})},2e3)}function m(n){for(var t in Object.keys(n).forEach(function(e){n[e].name=e}),e.networks=n,e.networks)e.tasks[t]={}}function g(){$("#provisioningInfoModal [data-toggle=popover]").popovers().on("hidden.bs.popover",function(e){$(e.target).data("bs.popover").inState.click=!1}),e.hideInventoryHelp=d.get("hideInventoryHelp"),Promise.all([o.getModels(),i.getPhones(),r.getNetworks(),o.getDefaults()]).then(function(n){var t;p(n[0].data),f(n[1].data),m(n[2].data),t=n[3].data,e.defaults=t},function(n){console.log(n),y(n.data,"Error retrieving data"),e.view.changeRoute=!1})}function v(){e.clearValidationErrorsPhonesToAdd();for(var n=null,t=[],a=0;a<e.phonesToAdd.length;a++){var o=e.phonesToAdd[a],r=o.mac;if(t.push(r),i.checkMacAddress(r)||(o.invalidMac=!0,null===n&&(n=a)),e.phones.find(function(e){return e.mac===r})&&(o.alreadyInInventory=!0,null===n&&(n=a)),!o.invalidMac){var c=i.getVendor(r,e.macVendors);c?o.vendor=c:(o.unknownVendor=!0,null===n&&(n=a))}}return e.macDuplicates=l.findDuplicates(t),null===n&&e.macDuplicates.length&&(n=e.phonesToAdd.findIndex(function(n){return n.mac===e.macDuplicates[0]})),!(null!==n&&n>=0)||(s(function(){$("#mac-phone-to-add-"+n).focus()},400),!1)}function b(){e.addPhonesInProgress=!1,e.showResultsAddPhones=!0,e.successfulAddPhones.forEach(function(n){e.deletePhoneToAdd(n)}),e.failedAddPhones.forEach(function(n){var t=n.phone;e.phonesToAdd.find(function(e){return e.mac===t.mac}).serverError=n.error.data.title}),e.getPhones()}function h(n){s(function(){e.modelLoaders[n]=null},3e3)}function y(n,t,a){n.i18nMessage=t,n.id=e.errorId,n.warning=a,e.errorId++,e.errors.push(n)}n.$on("scrollingContainerView",function(){e.phones&&e.phones.length>e.phonesLimit&&(e.phonesLimit+=e.SCROLLPLUS)}),e.setHideInventoryHelp=function(){e.hideInventoryHelp=!0,d.set("hideInventoryHelp",e.hideInventoryHelp)},e.getPhones=function(){i.getPhones().then(function(e){f(e.data)},function(n){console.log(n),y(n.data,"Error retrieving phones"),e.view.changeRoute=!1})},e.getModels=function(){o.getModels().then(function(e){p(e.data)},function(e){console.log(e),y(e.data,"Error retrieving models")})},e.showGenericAddingModal=function(n){e.addModalType=n,$("#adding-modal").modal("show")},e.showPasteModal=function(){e.phonesToAdd=[],e.pastedMacs=[],e.successfulAddPhones=[],e.failedAddPhones=[],e.failedRpsAddPhones=[],e.pendingRequestsAddPhones=0,e.showResultsAddPhones=!1,e.tooManyPastedMacs=!1,e.showGenericAddingModal("copypaste"),$("[data-toggle=popover]").popovers().on("hidden.bs.popover",function(e){$(e.target).data("bs.popover").inState.click=!1}),$("#adding-modal").on("shown.bs.modal",function(){$("#paste-textarea").focus()})},e.showManualModal=function(){e.phonesToAdd=[],e.successfulAddPhones=[],e.failedAddPhones=[],e.failedRpsAddPhones=[],e.pendingRequestsAddPhones=0,e.showResultsAddPhones=!1,e.showGenericAddingModal("manual"),s(function(){$("#manual-mac").focus()},500)},e.showScanModal=function(){e.phonesToAdd=[],e.successfulAddPhones=[],e.failedAddPhones=[],e.failedRpsAddPhones=[],e.pendingRequestsAddPhones=0,e.showResultsAddPhones=!1,e.showNoPhoneToAddFromNetwork=!1,e.showGenericAddingModal("scanning")},e.addPhoneManual=function(){if(function(){e.clearValidationErrorsManual();i.checkMacAddress(e.manualMac)?e.manualMac=i.normalizeMacAddress(e.manualMac):e.manualMacSyntaxError=!0;if(!e.manualMacSyntaxError){var n=i.getVendor(e.manualMac,e.macVendors);n||(e.manualMacUnknownVendor=!0)}e.phonesToAdd.find(function(n){return n.mac===e.manualMac})?e.manualMacDuplicated=!0:e.phones.find(function(n){return n.mac===e.manualMac})&&(e.manualMacInInventory=!0);return!(e.manualMacDuplicated||e.manualMacSyntaxError||e.manualMacUnknownVendor||e.manualMacInInventory)||($("#manual-mac").focus(),!1)}()){var n={mac:e.manualMac,model:e.manualModel,vendor:e.manualVendor,filteredModels:e.manualFilteredModels};e.phonesToAdd.push(n),e.setVendorApplyToAllList(),v(),e.manualMac="",e.manualModel=null,e.manualFilteredModels=[],$("#manual-mac").focus()}},e.inputMacManualChanged=function(){if(e.clearValidationErrorsManual(),!e.manualMac)return e.manualVendor=null,void(e.manualFilteredModels=[]);var n=i.getVendor(e.manualMac,e.macVendors);if(n){if(e.manualFilteredModels=e.models.filter(function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())}),"Nethesis"===n&&e.manualMac&&e.manualFilteredModels.length>0){let n=e.manualMac.replace(/:/g,"-");"00"===n.toUpperCase().split("-")[3]?e.manualModel=e.manualFilteredModels.find(e=>"nethesis-NPX3"===e.name):"01"===n.toUpperCase().split("-")[3]&&(e.manualModel=e.manualFilteredModels.find(e=>"nethesis-NPX5"===e.name))}}else e.manualVendor=null,e.manualFilteredModels=angular.copy(e.models)},e.openProvisioningInfo=function(n){i.getPhone(n).then(function(n){e.currentPhoneInfo=n.data,e.urlToCopy=n.data.provisioning_url1?n.data.provisioning_url1:n.data.provisioning_url2,$("#provisioningInfoModal").modal("show")},function(e){console.log(e)})},e.netmaskToScanChanged=function(){e.showNetmaskToScanError=!1},e.startNetworkScan=function(){e.showNetmaskToScanError=!1,e.showNoPhoneToAddFromNetwork=!1;var n=e.networkToScan.name;!e.networkToScan||e.networkToScan.netmask&&i.checkNetmask(e.networkToScan.netmask)||(e.showNetmaskToScanError=!0),e.showNetmaskToScanError||(e.phonesToAdd=[],e.networkScanInProgress=!0,e.tasks[n].currentProgress=Math.floor(50*Math.random()+10),c.startScan(e.networkToScan).then(function(a){e.tasks[n].promise=t(function(){l.taskStatus(a.data.result).then(function(a){var s;a.data.progress<100?(e.tasks[n].currentProgress=a.data.progress,e.tasks[n].errorCount=0):100==a.data.progress?(e.tasks[n].currentProgress=a.data.progress,e.tasks[n].errorCount=0,t.cancel(e.tasks[n].promise),s=e.networkToScan,c.phoneListByNetwork(s).then(function(n){var t=n.data.filter(function(n){var t=n.mac.replace(/:/g,"-"),a=i.getVendor(t,e.macVendors);if(!a)return!1;var s=e.phones.find(function(e){return e.mac===t});return!s});0==t.length&&(e.showNoPhoneToAddFromNetwork=!0),t.forEach(function(n){var t={mac:n.mac.replace(/:/g,"-"),ipv4:n.ipv4};e.phonesToAdd.push(t),e.macPhoneToAddChanged(t)}),e.setVendorApplyToAllList(),e.networkScanInProgress=!1},function(n){console.log(n),y(n.data,"Error retrieving network scan results"),e.networkScanInProgress=!1})):(console.log(a.error),e.tasks[n].errorCount<appConfig.MAX_TRIES?e.tasks[n].errorCount++:(t.cancel(e.tasks[n].promise),e.networkScanInProgress=!1,e.tasks[n].currentProgress=-1))},function(a){console.log(a),e.tasks[n].errorCount<appConfig.MAX_TRIES?e.tasks[n].errorCount++:(t.cancel(e.tasks[n].promise),e.networkScanInProgress=!1,e.tasks[n].currentProgress=-1)})},appConfig.INTERVAL_POLLING)},function(t){console.log(t),y(t.data,"Error scanning network"),e.tasks[n].currentProgress=-1}))},e.cancelAllNetworkScans=function(n){for(var n in e.tasks)t.cancel(e.tasks[n].promise),e.networkScanInProgress=!1},e.clearValidationErrorsManual=function(){e.manualMacSyntaxError=!1,e.manualMacUnknownVendor=!1,e.manualMacDuplicated=!1,e.manualMacInInventory=!1},e.clearValidationErrorsPhonesToAdd=function(n){void 0!==n?(n.invalidMac=!1,n.unknownVendor=!1,n.alreadyInInventory=!1):(e.macDuplicates=[],e.phonesToAdd.forEach(function(e){e.invalidMac=!1,e.unknownVendor=!1,e.alreadyInInventory=!1}))},e.addPhones=function(){e.phonesToAdd&&0!=e.phonesToAdd.length&&(v()&&(e.pendingRequestsAddPhones=e.phonesToAdd.length,e.failedAddPhones=[],e.failedRpsAddPhones=[],e.showSuccessfullyAddedPhones=!1,e.addPhonesInProgress=!0,e.phonesToAdd.forEach(function(n){var t=i.buildPhoneTancredi(n.mac,n.model,n.vendor,e.macVendors);n.mac=t.mac,i.createPhone(t).then(function(n){var a={mac:t.mac||null,model:t.model||null,line:null,web_user:"admin",web_password:e.defaults.adminpw||"admin"};u.createPhysicalExtension(a).then(function(t){var s=i.buildPhone(n.data,e.models,e.macVendors);e.pendingRequestsAddPhones--,e.successfulAddPhones.push(s),0==e.pendingRequestsAddPhones&&b(),i.getPhone(a.mac).then(function(n){n.data.provisioning_url1&&i.toRps(a.mac,{url:n.data.provisioning_url1}).then(function(e){},function(t){console.log(t),e.failedRpsAddPhones.push({mac:a.mac,manualProvisioningUrlForFailure:n.data.provisioning_url2,model:s.model.display_name})})},function(e){console.log(e)})},function(n){console.log(n),e.pendingRequestsAddPhones--,e.failedAddPhones.push(n),0==e.pendingRequestsAddPhones&&b()})},function(n){console.log(n.error.data.title),e.pendingRequestsAddPhones--,e.failedAddPhones.push(n),0==e.pendingRequestsAddPhones&&b()})})))},e.getManualFilteredModelsCount=function(){return!(e.manualFilteredModels&&e.manualFilteredModels.length>0)},e.checkTooManyPastedMacs=function(){e.pastedMacsText.length>=e.maxPastedMacCharacters-2&&(e.tooManyPastedMacs=!0)},e.parsePastedMacs=function(){e.pastedMacsText=e.pastedMacsText.replace(/,|;/g," ").trim(),e.pastedMacs=e.pastedMacsText.split(/\s+/),e.pastedMacsText="",e.phonesToAdd=[];for(var n=0;n<e.pastedMacs.length;n++){var t={mac:i.normalizeMacAddress(e.pastedMacs[n])};e.phonesToAdd.push(t),e.macPhoneToAddChanged(t)}v(),e.setVendorApplyToAllList()},e.vendorApplyToAllChanged=function(){e.vendorApplyToAll?e.modelApplyToAllList=e.models.filter(function(n){return n.name.toLowerCase().startsWith(e.vendorApplyToAll.toLowerCase())}):e.modelApplyToAllList=[]},e.setVendorApplyToAllList=function(){var n=new Set;e.phonesToAdd.forEach(function(t){var a=t.vendor;a||(a=i.getVendor(t.mac,e.macVendors),t.vendor=a),a&&n.add(a)}),e.vendorApplyToAllList=Array.from(n),0==e.vendorApplyToAllList.length&&(e.vendorApplyToAllList=i.getAllVendors(e.macVendors))},e.applyModelToAll=function(){e.phonesToAdd.forEach(function(n){var t=n.vendor;if(t||(t=i.getVendor(n.mac,e.macVendors),n.vendor=t),t&&e.modelApplyToAll.name.toLowerCase().startsWith(t.toLowerCase())||!t){var a=n.filteredModels.find(function(n){return n.name===e.modelApplyToAll.name});a&&(n.model=a)}})},e.macPhoneToAddChanged=function(n){if(e.clearValidationErrorsPhonesToAdd(n),!n.mac)return n.vendor=null,void(n.filteredModels=[]);var t=[];e.phonesToAdd.forEach(function(e){t.push(e.mac)}),e.macDuplicates=l.findDuplicates(t);var a=i.getVendor(n.mac,e.macVendors);if(a){if(n.vendor=a,n.filteredModels=e.models.filter(function(e){return e.name.toLowerCase().startsWith(a.toLowerCase())}),"Nethesis"===n.vendor&&n.mac&&n.filteredModels.length>0){let e=n.mac.replace(/:/g,"-");"00"===e.toUpperCase().split("-")[3]?n.model=n.filteredModels.find(e=>"nethesis-NPX3"===e.name):"01"===e.toUpperCase().split("-")[3]&&(n.model=n.filteredModels.find(e=>"nethesis-NPX5"===e.name))}}else n.vendor=null,n.filteredModels=angular.copy(e.models),n.mac.length>=8&&(n.unknownVendor=!0)},e.setPhoneModel=function(n){var t=null;n.model&&(t=n.model.name),e.modelLoaders[n.mac]="loading",i.setPhoneModel(n.mac,t).then(function(a){u.setPhoneModel(n.mac,t).then(function(t){e.modelLoaders[n.mac]="success",h(n.mac)},function(t){console.log(t),y(t.data,"Error setting phone model"),e.modelLoaders[n.mac]="fail",h(n.mac)})},function(t){console.log(t),y(t.data,"Error setting phone model"),e.modelLoaders[n.mac]="fail",h(n.mac)})},e.showDeletePhoneModal=function(n){e.phoneToDelete=n},e.deletePhone=function(){$("#deletePhoneModal").modal("hide"),i.deletePhone(e.phoneToDelete.mac).then(function(n){e.getPhones(),u.deletePhysicalExtension(e.phoneToDelete.mac).then(function(n){i.deletePhoneDelayedReboot([e.phoneToDelete.mac]).then(function(e){},function(e){console.log(e),y(e.data,"Error canceling delayed reboot")})},function(e){console.log(e),y(e.data,"Error deleting phone")})},function(e){console.log(e),y(e.data,"Error deleting phone")})},e.deletePhoneToAdd=function(n){e.phonesToAdd=e.phonesToAdd.filter(function(e){return e.mac.toUpperCase()!==n.mac.toUpperCase()}),e.setVendorApplyToAllList()},e.deletePhoneToAddIndex=function(n){e.phonesToAdd.splice(n,1),e.setVendorApplyToAllList()},e.orderByValue=function(e){return e},e.getNetworks=function(){r.getNetworks().then(function(e){m(e.data)},function(e){console.log(e),y(e.data,"Error retrieving network interfaces")})},e.deleteError=function(n){e.errors=e.errors.filter(function(e){return e.id!==n})},e.toggleShowSuccessfullyAddedPhones=function(){e.showSuccessfullyAddedPhones=!e.showSuccessfullyAddedPhones};e.deleteAllPhonesDev=function(){e.phones.forEach(function(e){!function(e){i.deletePhone(e.mac).then(function(n){u.deletePhysicalExtension(e.mac).then(function(n){i.deletePhoneDelayedReboot([e.mac]).then(function(e){},function(e){console.log(e),y(e.data,"Error canceling delayed reboot")})},function(e){console.log(e),y(e.data,"Error deleting phone")})},function(e){console.log(e),y(e.data,"Error deleting phone")})}(e)})},$("#provisioningInfoModal").on("hide.bs.modal",function(){$("#provisioningInfoModal #showurlbtn").popover("hide"),e.currentPhoneInfo={}}),angular.element(document).ready(function(){e.macVendors?g():i.getMacVendors().then(function(n){e.$parent.macVendors=n.data,g()},function(e){console.log(e)})})}]),angular.module("nethvoiceWizardUiApp").controller("ModelsUICtrl",["$scope","$interval","$location","ModelService","PhoneService","UserService","$rootScope",function(e,n,t,a,s,i,o){e.loadingAction=!1,e.selectedAction="",e.modelsInfoMsg="",e.selectOptionsInterval="",e.selectOptionsLimit=11,e.modelErrors={updateReadOnlyAttribute:!1,resetChangesNotFound:!1,deleteChangesNotFound:!1},e.modelErrorsSingle={patchSingleVariables:!1};var l=function(n){e.loadingAction=n,setTimeout(function(){e.loadingAction=!1,e.$apply()},2500)};e.openActionModal=function(n){e.selectedAction=n,$("#actionsModal").modal("show")},e.isKeysSection=function(e){return!!e.toLowerCase().includes("keys")},e.isExpKeysSection=function(e){return!!e.toLowerCase().includes("exp")},e.ldapToModelVariables=function(n,t){t?(e.currentModel.variables.ldap_port=n.ldaps.port,e.currentModel.variables.ldap_user=n.ldaps.user,e.currentModel.variables.ldap_password=n.ldaps.password,e.currentModel.variables.ldap_tls=n.ldaps.tls,e.currentModel.variables.ldap_base=n.ldaps.base,e.currentModel.variables.ldap_name_display=n.ldaps.name_display,e.currentModel.variables.ldap_mainphone_number_attr=n.ldaps.mainphone_number_attr,e.currentModel.variables.ldap_mobilephone_number_attr=n.ldaps.mobilephone_number_attr,e.currentModel.variables.ldap_otherphone_number_attr=n.ldaps.otherphone_number_attr,e.currentModel.variables.ldap_name_attr=n.ldaps.name_attr,e.currentModel.variables.ldap_number_filter=n.ldaps.number_filter,e.currentModel.variables.ldap_name_filter=n.ldaps.name_filter,e.currentModel.variables.ldap_server=""):(e.currentModel.variables.ldap_port=n.ldap.port,e.currentModel.variables.ldap_user=n.ldap.user,e.currentModel.variables.ldap_password=n.ldap.password,e.currentModel.variables.ldap_tls=n.ldap.tls,e.currentModel.variables.ldap_base=n.ldap.base,e.currentModel.variables.ldap_name_display=n.ldap.name_display,e.currentModel.variables.ldap_mainphone_number_attr=n.ldap.mainphone_number_attr,e.currentModel.variables.ldap_mobilephone_number_attr=n.ldap.mobilephone_number_attr,e.currentModel.variables.ldap_otherphone_number_attr=n.ldap.otherphone_number_attr,e.currentModel.variables.ldap_otherphone_number_attr=n.ldap.otherphone_number_attr,e.currentModel.variables.ldap_name_attr=n.ldap.name_attr,e.currentModel.variables.ldap_number_filter=n.ldap.number_filter,e.currentModel.variables.ldap_name_filter=n.ldap.name_filter,e.currentModel.variables.ldap_server=""),e.currentModel.inputs=angular.copy(e.currentModel.variables)},e.modelPhonebookTypeChange=function(){e.currentModel.changePhonebookType=!0,e.currentModel.changed=!0,e.modelPhonebookType=document.querySelector("#modelPhonebookType").value,"ldaps"==e.modelPhonebookType?(e.ldapToModelVariables(e.ldapCheckRes,!0),$("#phonebook-select-4").prop("disabled",!0)):"ldap"==e.modelPhonebookType?(e.ldapToModelVariables(e.ldapCheckRes,!1),$("#phoneboook-select-4").prop("disabled",!0)):$("#phonebook-select-4").prop("disabled",!1),setTimeout(function(){$("#phonebook-select-4").selectpicker("refresh")},100)},e.openSection=function(t){e.destroyAllSelects("#modelsContainer",t),delete e.currentModel.ui[t].showingKeys,e.selectOptionsLimit=12,n.cancel(e.selectOptionsInterval),e.selectOptionsInterval=n(function(n){e.selectOptionsLimit+=10,5!=n&&10!=n&&15!=n&&20!=n&&25!=n&&30!=n&&35!=n&&42!=n||e.refreshSelects()},1e3,43),e.currentModel.openedSection!=t?e.currentModel.openedSection=t:(e.currentModel.openedSection="",n.cancel(e.selectOptionsInterval)),"phonebook"==t&&setTimeout(function(){let n=document.querySelector("#modelPhonebookType");n&&(e.$apply(),$(n).selectpicker("refresh")),n=null},100)},e.onVariableChanged=function(n,t){0==n.indexOf("ldap_")&&(e.currentModel.changePhonebookType=!0),t&&"list"!=t&&"upload"!=t&&"dynamicselectpicker"!=t&&(e.currentModel.variables[n]=angular.copy(e.currentModel.inputs[n])),"configurations"==e.currentModel.uiLocation&&(e.currentModel.singleVariables[n]=e.currentModel.variables[n]),"ringtone"==n&&setTimeout(function(){e.$apply(),$(".model-container .ringtone_file-select").selectpicker("refresh")},100),e.$emit("variableChanged")},e.getOptionText=function(e,n){for(var t in e)if(e[t].value==n)return e[t].text},e.openExpKeys=function(n,t){delete e.currentModel.ui[t].showingExpKeys,e.currentModel.openedExpKeys!=n?e.currentModel.openedExpKeys=n:e.currentModel.openedExpKeys=""};var r=function(n,t){setTimeout(function(){e.modelErrors[n]=t,l("err"),e.$apply()},1e3)};e.refreshSelects=function(){$(".model-container select").each(function(){$(this).hasClass("selectpicker")?$(this).selectpicker("refresh"):$(this).hasClass("combobox")&&$(this).combobox("refresh")})},e.cancelChanges=function(){e.loadingAction=!0,e.currentModel.variables=angular.copy(e.currentModel.storedVariables),e.currentModel.inputs=angular.copy(e.currentModel.storedVariables),setTimeout(function(){e.refreshSelects(),l("ok"),e.currentModel.changePhonebookType=!1,e.$apply(),setTimeout(function(){$("#actionsModal").modal("hide"),setTimeout(function(){e.$emit("curentModelSaved")},500)},1500)},1500)},e.resetChanges=function(){e.loadingAction=!0,a.getOriginal(e.currentModel.name).then(function(n){for(var t in e.currentModel.storedVariables)n.data.variables[t]||(n.data.variables[t]=null);a.patchModel(e.currentModel.name,{display_name:e.currentModel.name,variables:n.data.variables}).then(function(t){e.currentModel.variables=angular.copy(n.data.variables),e.currentModel.storedVariables=angular.copy(n.data.variables),e.currentModel.inputs=angular.copy(n.data.variables),e.currentModel.changePhonebookType=!1,setTimeout(function(){e.refreshSelects(),l("ok"),e.$apply(),setTimeout(function(){e.hideModal("actionsModal")},1500)},1e3)},function(e){console.log(e),r("resetChangesNotFound",e.data.title)})},function(e){console.log(e),r("resetChangesNotFound",e.data.title)})},e.deleteModel=function(){e.loadingAction=!0,a.deleteModel(e.currentModel.name).then(function(n){l("ok"),setTimeout(function(){e.hideModal("actionsModal"),setTimeout(function(){e.$emit("reloadModels")},500)},1500)},function(e){console.log(e),r("deleteChangesNotFound",e.data.title)})},e.hideLineKeysModelsInfoMsg=function(){localStorage.setItem("lineKeysModelsInfoMsgHide",!0),e.lineKeysModelsInfoMsgHide=!0},e.lineKeysModelsInfoMsgHide=localStorage.getItem("lineKeysModelsInfoMsgHide"),e.hideLineKeysConfigurationsInfoMsg=function(){localStorage.setItem("lineKeysConfigurationsInfoMsgHide",!0),e.lineKeysConfigurationsInfoMsgHide=!0},e.lineKeysConfigurationsInfoMsgHide=localStorage.getItem("lineKeysConfigurationsInfoMsgHide"),e.hideModelsInfoMsg=function(){localStorage.setItem("modelsInfoMsgHide",!0),e.modelsInfoMsg=!0};e.saveCurrentModel=function(){for(var n in e.modelErrors.updateReadOnlyAttribute=!1,e.modelErrors.resetChangesNotFound=!1,e.modelErrors.deleteChangesNotFound=!1,e.loadingAction=!0,e.currentModel.variables)e.currentModel.storedVariables[n]||e.currentModel.variables[n]!=e.currentModel.globals[n]||0==n.indexOf("ldap_")&&e.currentModel.changePhonebookType||delete e.currentModel.variables[n],""!=e.currentModel.variables[n]&&"null"!=e.currentModel.variables[n]||(e.currentModel.variables[n]=null);a.patchModel(e.currentModel.name,{display_name:e.currentModel.display_name,variables:e.currentModel.variables}).then(function(n){l("ok"),e.currentModel.changePhonebookType=!1,setTimeout(function(){e.hideModal("saveChangesConfirm"),setTimeout(function(){e.$emit("curentModelSaved")},500)},2e3),d()},function(e){console.log(e),r("updateReadOnlyAttribute",e.data.title)})},e.saveCurrentModelSingle=function(){for(var n in e.loadingActionSingle=!0,e.currentModel.singleVariables)""!=e.currentModel.singleVariables[n]&&"null"!=e.currentModel.singleVariables[n]||(e.currentModel.singleVariables[n]=null);s.patchPhone(e.currentModel.mac,{variables:e.currentModel.singleVariables}).then(function(n){c("ok"),setTimeout(function(){e.hideModal("singleModelModal")},1500)},function(n){e.modelErrorsSingle.patchSingleVariables=!0,setTimeout(function(){e.$apply(function(){e.modelErrorsSingle.patchSingleVariables=!1})},2e3),console.log(n)})};var c=function(n){e.loadingActionSingle=n,setTimeout(function(){e.loadingActionSingle=!1,e.$apply()},2500)};e.openFileUpload=function(n){o.uploadVariable=n,e.isConfigurations?$("#singleModelModal").modal("hide").on("hidden.bs.modal",function(){$("#singleModelModal").unbind(),$("#uploadFileModal").modal("show").on("hidden.bs.modal",function(){$("#uploadFileModal").unbind(),$("#singleModelModal").modal("show")})}):$("#uploadFileModal").modal("show"),$("#uploadFileModal").unbind("hidden.bs.modal").on("hidden.bs.modal",function(){o.$broadcast("uploadModalHidden")})},e.toggleShowPassword=function(n){e.currentModel.shownPasswords[n]?delete e.currentModel.shownPasswords[n]:e.currentModel.shownPasswords[n]=!0};var d=function(){a.getModel(e.currentModel.name).then(function(n){e.currentModel.storedVariables=angular.copy(n.data.variables),e.currentModel.variables=n.data.variables,a.getDefaults().then(function(n){for(var t in e.currentModel.globals=angular.copy(n.data),n.data)e.currentModel.variables[t]||(e.currentModel.variables[t]=angular.copy(n.data[t]));e.refreshSelects()},function(e){console.log(e)})},function(e){console.log(e),r("updateReadOnlyAttribute",e.data.title)})};angular.element("#modelsUIUrl").ready(function(){e.modelsInfoMsg=localStorage.getItem("modelsInfoMsgHide"),i.list(!0).then(function(n){for(let e in n.data)"none"==n.data[e].default_extension&&n.data.splice(e,1);e.users=n.data},function(e){console.log(e)}),e.getFirmwares(),e.getRingtones(),e.getBackgrounds(),e.getScreensavers(),e.inModal=document.querySelector("#modelsUIUrl").parentNode.parentNode.parentNode.parentNode.parentNode.classList.value.includes("modal"),e.isConfigurations="/configurations"==t.path()}),$("#saveChangesConfirm").on("hidden.bs.modal",function(){e.modelErrors.updateReadOnlyAttribute=!1}),$("#actionsModal").on("hidden.bs.modal",function(){e.modelErrors.resetChangesNotFound=!1,e.modelErrors.deleteChangesNotFound=!1}),e.shownDynamicList="",e.openSearchList=function(n){e.shownDynamicList=n,e.dynamicSearchLimit=e.DYNAMIC_SCROLL_PAGE},e.applyDynamicSearch=function(n,t){let a=n.split("_");var s=a[0]+"_value_"+a[2],i=a[0]+"_label_"+a[2];e.currentModel.inputs[s]=t.default_extension,e.currentModel.inputs[i]=t.displayname,e.shownDynamicList="",e.onVariableChanged(s,"input"),e.onVariableChanged(i,"input")},o.$on("domclick",function(n,t){t.target.className.includes("dynamicsearch")||e.$apply(function(){e.shownDynamicList=""})}),e.DYNAMIC_SCROLL_PAGE=6,e.dynamicSearchLimit=e.DYNAMIC_SCROLL_PAGE;var u=function(){e.dynamicSearchLimit+=e.DYNAMIC_SCROLL_PAGE,e.$apply()};document.addEventListener("dynamicSearchScroll",u),e.$on("$routeChangeStart",function(){document.removeEventListener("dynamicSearchScroll",u)})}]),angular.module("nethvoiceWizardUiApp").controller("DefaultModalUICtrl",["$scope","$interval","$location","ModelService",function(e,n,t,a){e.openedSection="",e.globalsUi=e.buildDefaultSettingsUI(),e.selectOptionsLimit=12,e.loadingSections=[],e.shownPasswords={};var s=function(n){e.loadingActions=n,setTimeout(function(){e.loadingActions=!1,e.$apply()},2500)};e.setDefaultSettings=function(){e.loadingActions=!0,e.defaultSettings.ui_first_config="",e.adminPw.origValue!==e.defaultSettings.adminpw&&a.updateAdminPw({password:e.defaultSettings.adminpw}).then(function(e){console.log("update adminpw ok")},function(e){console.error("error updating adminpw"),console.error(e)}),a.setDefaults(e.defaultSettings).then(function(n){s("ok"),e.startPhonebookService(),e.enableNextDisabled(),setTimeout(function(){e.$apply(function(){$("#defaultSettingsModal").modal("hide")})},1e3)},function(e){s("err"),console.log(e)})},e.isModelsPage=function(){return"/devices/models"==t.path()},e.phonebookTypeChange=function(){e.$parent.$parent.phonebookType=document.querySelector("#phonebookType").value,"ldaps"==e.phonebookType?(e.ldapToDefaultVariables(e.ldapCheckRes,!0,!1),$("#default-select-4").prop("disabled",!0)):"ldap"==e.phonebookType?(e.ldapToDefaultVariables(e.ldapCheckRes,!1,!1),$("#default-select-4").prop("disabled",!0)):(e.$parent.$parent.defaultSettings=angular.copy(e.storedDefaultSettings),$("#default-select-4").prop("disabled",!1)),setTimeout(function(){$("#default-select-4").selectpicker("refresh")},100)},e.toggleShowPassword=function(n){e.shownPasswords[n]?delete e.shownPasswords[n]:e.shownPasswords[n]=!0},e.pinnedChange=function(n){"adminpw"===n&&e.defaultSettings.adminpw!==e.adminPw.origValue?e.adminPw.showAdminPwWarning=!0:"adminpw"===n&&(e.adminPw.showAdminPwWarning=!1),"hostname"==n&&e.connectivityCheck({host:e.defaultSettings.hostname,scheme:e.defaultSettings.provisioning_url_scheme}),"provisioning_url_scheme"==n&&e.defaultSettings.ui_first_config&&e.ldapCheck(),e.refreshGlobalsSelects()},e.openSection=function(t){e.destroyAllSelects(".globalsSectionContainer"),e.selectOptionsLimit=12,n.cancel(e.selectOptionsInterval),e.selectOptionsInterval=n(function(n){e.selectOptionsLimit+=10,5!=n&&10!=n&&15!=n&&20!=n&&25!=n&&30!=n&&35!=n&&42!=n||e.refreshGlobalsSelects()},1e3,43),e.openedSection!=t?e.openedSection=t:(e.openedSection="",n.cancel(e.selectOptionsInterval))}}]),angular.module("nethvoiceWizardUiApp").controller("DevicesCtrl",["$scope","ModelService","ConfigService","$location","$route","ProvGlobalsService",function(e,n,t,a,s,i){e.view.changeRoute=!0,e.adminPw={showAdminPwWarning:!1};var o=s.current.controllerAs.split("/").length>1?s.current.controllerAs.split("/")[1]:s.current.controllerAs.split("/")[0];appConfig.STEP_MAP[o],appConfig.STEP_WIZARD[o].next;e.openDefaultSettings=function(){e.loadingDefaults(),$("#defaultSettingsModal").modal("show"),setTimeout(function(){$("#defaultSettingsModal select").each(function(){$(this).hasClass("selectpicker")?$(this).selectpicker("refresh"):$(this).hasClass("combobox")&&$(this).combobox("refresh")})},500)};e.$on("$routeChangeStart",function(){e.$parent.wizard.isNextDisabled=!1}),n.getDefaults().then(function(n){t.getWizard().then(function(t){let s;(s=0==t.length||"true"===t[0].status)?function(n){e.$parent.defaultSettings=n.data,e.$parent.storedDefaultSettings=angular.copy(n.data),e.adminPw.origValue=n.data.adminpw,e.adminPw.showAdminPwWarning=!1,e.connectivityCheck({host:n.data.hostname,scheme:n.data.provisioning_url_scheme}),e.ldapCheck(),e.$parent.wizard.isNextDisabled=!!e.defaultSettings.ui_first_config,e.view.changeRoute=!1}(n):a.path("/devices/inventory")},function(e){console.log(e)})},function(e){console.log(e)})}]),angular.module("nethvoiceWizardUiApp").controller("TrunksPhysicalCtrl",["$scope","$rootScope","$location","$interval","UserService","TrunkService","ConfigService","UtilService","DeviceService",function(e,n,t,a,s,i,o,l,r){e.allDevices={},e.allVendors={},e.allModels={},e.networks={},e.networkLength=0,e.tasks={},e.sipTrunks={},e.selectedDevice={},e.newGateway={},e.onSave=!1,e.scanned=!1,e.users=[],e.fisicalLimit={};e.getUserList=function(){s.list(!1).then(function(n){e.users=n.data;for(var t in e.users)if("none"!==e.users[t].default_extension){t;break}},function(e){console.log(e)})},e.selectDevice=function(n,t,a){n.network_name=a,n.isConnected?n.ipv4_new=n.ipv4:n.ipv4=n.ipv4_new,e.selectedDevice=n,n.isConfigured||(e.selectedDevice.netmask_green=t.netmask,e.selectedDevice.gateway=t.gateway,e.selectedDevice.ipv4_green=t.ip)},e.close=function(e){e.onSave=!1,e.onSaveSuccess=!1,e.onError=!1,e.onDeleteSuccess=!1,e.onPushSuccess=!1},e.getModelDescription=function(n){if(n&&n.manufacturer&&n.model){var t=e.allModels[n.manufacturer].filter(function(e){if(e.id==n.model)return e})[0];return t&&t.model&&t.description?{description:t.description,model:t.model}:""}return{description:""}},e.getGatewayModelList=function(){r.gatewayModelList().then(function(n){e.allModels=n.data,e.allVendors=Object.keys(e.allModels)},function(e){console.log(e)})},e.getNetworkList=function(n){e.view.changeRoute=n,o.getNetworks().then(function(n){for(var t in e.networks=n.data,n.data)e.tasks[t]={},e.allDevices[t]=[];e.networkLength=Object.keys(n.data).length,e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.getGatewayList=function(n,t){r.gatewayListByNetwork(t).then(function(t){e.allDevices[n]=t.data,e.pushKey(n),e.tasks[n].currentProgress=100,e.onSave=!1,e.scanned=!0},function(t){console.log(t),e.tasks[n].currentProgress=-1})},e.pushKey=function(n){n&&(e.fisicalLimit[n]=20)},e.scrollingFisicalContainer=function(n){e.allDevices[n].length>e.fisicalLimit[n]&&(e.fisicalLimit[n]+=e.SCROLLPLUS)},e.startScan=function(n,t){if(e.tasks[n].currentProgress>0&&e.tasks[n].currentProgress<100)return!0;e.tasks[n].startScan=!0,e.tasks[n].currentProgress=Math.floor(50*Math.random()+10),r.startScan(t).then(function(s){e.tasks[n].promise=a(function(){l.taskStatus(s.data.result).then(function(s){s.data.progress<100?e.errorCount=0:100==s.data.progress?(e.tasks[n].errorCount=0,a.cancel(e.tasks[n].promise),e.getGatewayList(n,t)):(console.log(s.error),e.tasks[n].errorCount<appConfig.MAX_TRIES?e.tasks[n].errorCount++:(a.cancel(e.tasks[n].promise),e.tasks[n].currentProgress=-1))},function(t){console.log(t),e.tasks[n].errorCount<appConfig.MAX_TRIES?e.tasks[n].errorCount++:(a.cancel(e.tasks[n].promise),e.tasks[n].currentProgress=-1)})},appConfig.INTERVAL_POLLING)},function(t){e.tasks[n].currentProgress=-1,console.log(t)})},e.updateExtraFields=function(n){for(var t=e.allModels[n.manufacturer],a="Patton"===n.manufacturer?0:1,s=0;s<t.length;s++)if(t[s].id===n.model){n.trunks_isdn=[];for(var i=0;i<t[s].n_isdn_trunks;i++)n.trunks_isdn.push({name:i+a,type:"pp"});n.trunks_pri=[];for(i=0;i<t[s].n_pri_trunks;i++)n.trunks_pri.push({name:i+a});n.trunks_fxo=[];for(i=0;i<t[s].n_fxo_trunks;i++)n.trunks_fxo.push({name:i+a,number:""});n.trunks_fxs=[];for(i=0;i<t[s].n_fxs_ext;i++)n.trunks_fxs.push({name:i+a,linked_extension:""})}n.name=n.manufacturer+"-"+e.getModelDescription(n,!0).description},e.setNewGateway=function(n,t){e.newGateway.network_key=n,e.newGateway.network=t.network,e.newGateway.ipv4_new=t.network.slice(0,-1),e.newGateway.ipv4_green=t.ip,e.newGateway.gateway=t.gateway,e.newGateway.netmask_green=t.netmask},e.hideGatewayDialog=function(){e.newGateway={},$("#newGwDialog").modal("hide")},e.saveConfig=function(n,t){n.onSave=!0,n.onSaveSuccess=!1,n.onError=!1,n.onDeleteSuccess=!1,n.onPushSuccess=!1,t&&(n.ipv4=""),r.saveGatewayConfig(n).then(function(a){e.hideGatewayDialog(),n.id=a.data.id,t&&e.allDevices[n.network_key].push(n),n.ipv4=n.ipv4_new,n.isConfigured=!0,n.onSave=!1,t||(n.onSaveSuccess=!0),n.onError=!1,n.onDeleteSuccess=!1,n.onPushSuccess=!1,i.count().then(function(n){e.menuCount.trunks=n.data},function(e){console.log(e)})},function(e){n.onSave=!1,n.onSaveSuccess=!1,n.onError=!0,n.onDeleteSuccess=!1,n.onPushSuccess=!1,console.log(e)})},e.pushConfig=function(e){e.onSave=!0,r.pushGatewayConfig({name:e.name,ipv4_green:"",netmask_green:"",mac:e.mac}).then(function(n){e.onSave=!1,e.onSaveSuccess=!1,e.onError=!1,e.onDeleteSuccess=!1,e.onPushSuccess=!0},function(n){console.log(n),e.onSave=!1,e.onSaveSuccess=!1,e.onError=!0,e.onDeleteSuccess=!1,e.onPushSuccess=!1})},e.downConfig=function(e){e.onSave=!0,r.downloadConfig(e.name,e.mac).then(function(n){var t=document.getElementById("dlLink"),a=atob(n.data),s=new Blob([a],{type:"application/octet-stream;charset=utf-8;"}),i=URL.createObjectURL(s);t.setAttribute("href",i),t.setAttribute("download",e.name+".cfg"),t.click(),e.onSave=!1},function(e){console.log(e)})},e.deleteConfig=function(n){n.onSave=!0,r.deleteGatewayConfig(n.id).then(function(t){n.onSave=!1,n.onSaveSuccess=!1,n.onError=!1,n.onDeleteSuccess=!0,n.onPushSuccess=!1,e.selectedDevice={},e.getGatewayList(n.network_name,{netmask:n.netmask_green,ip:n.ipv4_green}),i.count().then(function(n){e.menuCount.trunks=n.data},function(e){console.log(e)})},function(e){console.log(e),n.onSave=!1,n.onSaveSuccess=!1,n.onError=!0,n.onDeleteSuccess=!1,n.onPushSuccess=!1})},e.getNetworkList(!0),e.getGatewayModelList(),e.getUserList()}]),angular.module("nethvoiceWizardUiApp").controller("TrunksVoipCtrl",["$scope","$rootScope","TrunkService","CodecService","$timeout","$filter","DashboardService",function(e,n,t,a,s,i,o){e.providers=[],e.voipTrunks=[],e.trunksInfo=[],e.view.changeRoute=!0,e.selectedTrunk={},e.onSaveError=!1,e.searchTrunk="",e.newPwd="",e.voipLimit=20,e.onDelete=!1,e.onDeleteError=!1,e.onDeleteSuccess=!1,e.onSave=!1,e.onSaveError=!1,e.onSaveSuccess=!1,e.editedSelectedTrunk={},e.trunk={forceCodec:!0,codecs:["alaw","ulaw"]},e.retrieveCodecs=function(){return a.getVoipCodecs()},e.voipContainer=function(){e.voipTrunks&&e.voipTrunks.length>e.voipLimit&&(e.voipLimit+=e.SCROLLPLUS)},e.clickedEdit=function(){e.editedSelectedTrunk=angular.copy(e.selectedTrunk),e.editedSelectedTrunk.forceCodec=angular.copy(e.trunk.forceCodec),e.editedSelectedTrunk.info=angular.copy(e.trunksInfo)};e.selectTrunk=function(n){e.selectedTrunk=n,e.newCreated&&(e.newCreated=!1)},e.providerDesc=function(n){return e.providers?e.providers.find(e=>e.provider===n).description:"-"},e.arrayJoin=function(e){return e.length>0?e.join(", "):""};var l=function(n){t.getAllTrunks().then(function(t){let a=t.data.filter(e=>"sip"===e.tech||"pjsip"===e.tech);if(e.voipTrunks=i("orderBy")(a,"name"),e.voipTrunks.length>0){if(n)e.selectedTrunk=e.voipTrunks.find(e=>e.trunkid==n);else for(var s in e.voipTrunks)if("sip"==e.voipTrunks[s].tech||"pjsip"==e.voipTrunks[s].tech){e.selectedTrunk=e.voipTrunks[s];break}}else e.selectedTrunk={};e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},r=function(){o.getTrunks().then(function(n){e.trunksInfo=n.data,e.$$phase||e.$apply()},function(e){console.log(e)})};e.create=function(){e.onSave=!0,t.createTrunkVoip(e.trunk).then(function(n){e.onSave=!1,e.onSaveError=!1,e.onSaveSuccess=!0,l(n.data.trunkid),s(function(){$("#newGwDialog").modal("hide"),e.onSaveSuccess=!1,e.newCreated=!0,e.trunk={forceCodec:!0,codecs:["alaw","ulaw"]}},1e3),r(),t.count().then(function(n){e.menuCount.trunks=n.data},function(e){console.log(e)})},function(n){e.onSave=!1,e.onSaveError=!0,console.log(n)})},e.deleteTrunk=function(n){e.onDelete=!0,t.deleteTrunk(n.trunkid).then(function(n){l(),r(),e.onDelete=!1,e.onDeleteSuccess=!0,e.onDeleteError=!1,s(function(){$("#confirmDeleteModal").modal("hide"),e.onDeleteSuccess=!1,e.onDeleteError=!1},1e3)},function(n){e.onDelete=!1,e.onDeleteError=!0,console.log(n)})},e.editTrunks=function(n){e.onChange=!0,t.changeTrunkPwd(n.trunkid,{username:n.username,password:e.newPwd,phone:n.outcid,codecs:n.info[n.name].codecs,forceCodec:n.forceCodec}).then(function(){e.onChangeSuccess=!0,e.onChange=!1,e.updateData(n),s(function(){$("#changePWDModal").modal("hide"),e.newPwd="",e.onChangeSuccess=!1,e.onChangeError=!1},1e3)},function(n){e.onChange=!1,e.onChangeError=!0,console.log(n)})},e.updateData=function(n){e.selectedTrunk=n,e.trunksInfo[e.selectedTrunk.name].codecs=n.info[n.name].codecs},angular.element(document).ready(function(){t.getProviders().then(function(n){e.providers=n},function(e){console.log(e)}),l(),r(),$("#newGwDialog").on("hidden.bs.modal",function(){e.onSaveError=!1}),$("#confirmDeleteModal").on("hidden.bs.modal",function(){e.onDeleteError=!1}),$("#changePWDModal").on("hidden.bs.modal",function(){e.onPWDChangeError=!1,e.newPwd=""})}),e.retrieveCodecs().then(function(n){for(var t in e.availableCodecs=n.map(function(e){return e.codec}),n)n[t].enabled&&(e.trunk.codecs=[n[t].codec])},function(e){console.log(e)}),e.$on("$routeChangeStart",function(){s.cancel(e.updateTrunksInfoAsync)})}]),angular.module("nethvoiceWizardUiApp").controller("RoutesInboundCtrl",["$scope","$rootScope","$interval","RouteService",function(e,n,t,a){e.routes={},e.destinations={},e.currentRoute={},e.inboundPromise=null,e.inboundLimit=20,e.setCurrentRoute=function(n){e.currentRoute=n},e.getRouteList=function(n){e.view.changeRoute=n,a.getInbounds().then(function(n){for(var t in e.routes=n.data.routes,e.destinations=n.data.destinations,e.view.changeRoute=!1,e.menuCount.routesIn=e.routes.length,e.routes)e.routes[t].url=encodeURIComponent(e.routes[t].extension+" / "+e.routes[t].cidnum)},function(n){console.log(n),e.view.changeRoute=!1})},n.$on("scrollingContainerView",function(){e.routes&&e.routes.length>e.inboundLimit&&(e.inboundLimit+=e.SCROLLPLUS)}),e.parseDestinations=function(n){if(n&&null!==n&&0!=n.length){if(void 0!==e.destinations[n]){var t=e.destinations[n].name;return void 0!==e.destinations[n].category&&(t=e.destinations[n].category),{prefix:t,description:e.destinations[n].description}}return n}return""},e.deleteRoute=function(n,t){a.deleteInboundRoute(n,t).then(function(n){e.getRouteList(!1)},function(e){console.log(e)})},e.modifyRoute=function(e,n){window.open(customConfig.VPLAN_URL+"?did="+e+"+ 2%F +"+n,"_blank")},e.newRoute=function(){window.open(customConfig.VPLAN_URL+"?did=new_route")},e.$on("$destroy",function(){e.inboundPromise&&t.cancel(e.inboundPromise)}),e.getRouteList(!0),e.inboundPromise=t(function(){e.getRouteList(!1)},appConfig.INTERVAL_POLLING)}]),angular.module("nethvoiceWizardUiApp").controller("RoutesOutboundCtrl",["$scope","LocalStorageService","LanguageService","TrunkService","RouteService","UtilService",function(e,n,t,a,s,i){e.routes=[],e.allTrunks=[],e.filteredTrunks=[],e.onSaveSuccess=!1,e.onSaveError=!1,e.onSave=!1,e.showDialDefault=!1,e.view.changeRoute=!0,e.toggleDetails=function(e){$(e.target);var n=$(e.target).parents(".list-group-item"),t=n.find(".list-group-item-container"),a=n.find(".list-view-pf-expand").index(e.target);n.find(".list-view-pf-expand.active").find(".fa-angle-right").removeClass("fa-angle-down").end().removeClass("active").end(),$(e.target).addClass("active").parents(".list-group-item").end().find(".fa-angle-right").addClass("fa-angle-down"),t.eq(a).hasClass("hidden")?(n.find(".list-group-item-container:visible").addClass("hidden"),t.eq(a).removeClass("hidden")):(t.eq(a).addClass("hidden"),n.find(".list-view-pf-expand.active").find(".fa-angle-right").removeClass("fa-angle-down").end().removeClass("active").end())},e.setNewPattern=function(n){e.selectedRouteLang=n},e.getLangName=function(e){return t.getNativeName(e)},e.extractTrunkInfo=function(e){return i.extractTrunkInfo(e)},e.removeTrunk=function(n,t){e.routes[e.selectedRouteLang][n].trunks.splice(t,1),s.deleteOutboundTrunk(n,t).then(function(e){},function(e){console.log(e)})},e.addTrunkToRoute=function(n,t){e.routes[e.selectedRouteLang][n].trunks.push(t)},e.filterAllTrunks=function(n){return i.intersectTwoObj(e.allTrunks,n,!1)},e.saveRoutes=function(){e.onSave=!1;var n={};n[e.selectedRouteLang]=e.routes[e.selectedRouteLang],s.createDefaultsOutbounds(n).then(function(n){e.onSaveSuccess=!0,e.onSaveError=!1,e.onSave=!1,e.getOutbounds(!1),e.wizard.nextState=!0},function(n){console.log(n),e.onSaveSuccess=!1,e.onSaveError=!0,e.onSave=!1})},e.getOutbounds=function(n){e.view.changeRoute=n,s.getOutbounds().then(function(n){0==n.data.length?(e.showDialDefault=!0,s.getDefaultOutbounds().then(function(n){e.routes=n.data,e.availableDialPatterns=Object.keys(n.data),e.routes.length=Object.keys(n.data).length,e.view.changeRoute=!1},function(e){console.log(e)})):(e.showDialDefault=!1,e.routes[e.selectedRouteLang]=n.data,e.routes.length=n.data.length,e.view.changeRoute=!1,e.wizard.nextState=!0),e.menuCount.routesOut=e.routes.length},function(n){console.log(n),e.view.changeRoute=!1})},a.getAllTrunks().then(function(t){var a=navigator.language||navigator.userLanguage;a=a.replace("-","_").split("_")[0],e.selectedRouteLang=n.get("preferredLanguage")||a||"en",e.allTrunks=t.data,e.getOutbounds(!0)},function(e){console.log(e)})}]),angular.module("nethvoiceWizardUiApp").controller("InitCtrl",["$scope","$rootScope","$translate","$location","ConfigService","LanguageService","PhoneService","LocalStorageService","LoginService","UserService","MigrationService","TrunkService","RouteService","ModelService","GenericPhoneService","ProvGlobalsService","$q","ProvFanvilService","ProvGigasetService","ProvSangomaService","ProvSnomService","ProvYealinkService","ProvNethesisService",function(e,n,t,a,s,i,o,l,r,c,d,u,p,f,m,g,v,b,h,y,w,k,x){e.customConfig=customConfig,e.appConfig=appConfig,e.macVendors=null,e.view={changeRoute:!0,navbarReadyFirst:!1,navbarReadySecond:!1},e.mode={isLdap:!1},e.login={isLogged:!1},e.loginUrl="views/login.html",e.modelsUIUrl="views/templates/models-ui.html",e.fileUploadUIUrl="views/templates/file-upload.html",e.defaultsModalUrl="views/templates/defaults-modal.html",e.ldapResDisabled=!1,e.wizard={isWizard:!0,isMigration:!1,isMigrationView:!1,usersMigrationDone:!1,confMigrationDone:!1,fromMigrationStart:!1,isMigrationSkip:!1,config:{},stepCount:1,provisioning:""},e.menuCount={users:0,trunks:0,routesIn:0,routesOut:0},e.SCROLLPLUS=20,e.doLogout=function(){r.removeCredentials(),a.path("/"),$("#loginTpl").show(),e.login.isLogged=!1,e.setRandomBackground()},e.copyUrl=function(){e.copiedUrl=!0,setTimeout(function(){e.copiedUrl=!1,e.$apply()},1e3)},e.copyPassword=function(){e.copiedPassword=!0,setTimeout(function(){e.copiedPassword=!1,e.$apply()},1e3)},e.isEmpty=function(e){for(var n in e)return!1;return!0},e.goTo=function(n,t,s){s?window.open(n,"_blank"):e.wizard.isWizard&&!t||a.path(n)},e.setRandomBackground=function(){$("body").css("background","linear-gradient( rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.95) ), url(images/"+Math.floor(5*Math.random()+1)+".jpg)")},e.toggleNavBar=function(){window.screen.width<768?$("#navbar-left").hasClass("show-mobile-nav")?$("#wizard-step-footer").css("margin-left","0px"):$("#wizard-step-footer").css("margin-left","250px"):$("#navbar-left").hasClass("collapsed")?$("#wizard-step-footer").css("margin-left","250px"):$("#wizard-step-footer").css("margin-left","76px")},e.getConfig=function(){s.getConfig().then(function(n){e.wizard.config=n.data,"ldap"===n.data.type?e.mode.isLdap=!0:e.mode.isLdap=!1},function(e){console.log(e)})},e.resolveActiveTab=function(e,n){return window.location.hash.split("/")[n]===e},e.currentStepCount=function(){return e.wizard.stepCount},e.languagesArr=i.getAllLanguages(),e.changeLanguage=function(n){var a="";for(var s in"default"==n.key?(a=(a=navigator.language||navigator.userLanguage).replace("-","_").split("_")[0],t.use(a)):(a=n.key,l.set("preferredLanguage",n.key),t.use(n.key)),e.languagesArr)e.languagesArr[s].key==a?e.languagesArr[s].check=!0:e.languagesArr[s].check=!1},e.goToFullScreen=function(){e.inFullScreen?document.exitFullscreen?(document.exitFullscreen(),e.inFullScreen=!1):document.mozCancelFullScreen?(document.mozCancelFullScreen(),e.inFullScreen=!1):document.webkitExitFullscreen&&(document.webkitExitFullscreen(),e.inFullScreen=!1):document.documentElement.requestFullscreen?(document.documentElement.requestFullscreen(),e.inFullScreen=!0):document.documentElement.mozRequestFullScreen?(document.documentElement.mozRequestFullScreen(),e.inFullScreen=!0):document.documentElement.webkitRequestFullscreen?(document.documentElement.webkitRequestFullscreen(),e.inFullScreen=!0):document.documentElement.msRequestFullscreen&&(document.documentElement.msRequestFullscreen(),e.inFullScreen=!0)},e.pauseWizard=function(){e.wizard.isMigrationView=!0,e.wizard.isWizard=!1},e.redirectMigrationAction=function(n,t){if(1==t)if("ready"==n)a.path("/migration");else if("users"==n)a.path("/migration/users");else if("cdr"==n)a.path("/migration/report");else{var i=migrationConfig.LABEL_INFO[migrationConfig.LABEL_INFO[n].next].route;a.path(i)}else s.getWizard().then(function(n){if(0==n.length)var t=!0;else t="true"===n[0].status;if(t){var s=appConfig.STEP_MAP_REVERSE[e.wizard.stepCount];a.path("/"+s)}else a.path("/")},function(e){console.log(e)})},e.redirectOnMigrationStatus=function(n){d.isMigration().then(function(t){t.data?s.getConfig().then(function(t){var a=t.data.configured;n?e.redirectMigrationAction(n,a):d.getMigrationStatus().then(function(n){e.redirectMigrationAction(n.data,a)},function(e){console.log(e)})},function(e){console.log(e)}):a.path("/")},function(e){console.log(e)})},e.exitMigration=function(){d.endMigration().then(function(n){e.wizard.isWizard=!0,e.wizard.isMigrationView=!1,a.path("/extensions")},function(e){console.log(e)})},e.currentYear=function(){return(new Date).getFullYear()},e.toggleMig=function(e){$("#"+e).slideToggle("fast")},e.slideDown=function(e){$("#"+e).slideDown("fast")},e.slideUp=function(e){$("#"+e).slideDown("fast")},e.showModal=function(e){$("#"+e).modal("show")},e.hideModal=function(e){$("#"+e).modal("hide")},e.validateLocation=function(){if("tancredi"!=e.wizard.provisioning)switch(a.path()){case"/devices/inventory":case"/devices/models":case"/configurations/preferences":case"/apps/bulkdevices":a.path("/")}else switch(a.path()){case"/users/devices":case"/configurations/preferencesFreepbx":a.path("/")}};var S=function(){s.getProvisioningInfo().then(function(n){e.wizard.provisioning=n.data,"tancredi"!=e.wizard.provisioning&&(appConfig=appConfig_OLD,e.appConfig=appConfig_OLD),e.validateLocation(),e.view.navbarReadySecond=!0},function(e){console.log(e)})};e.changeLanguage({key:l.get("preferredLanguage")||"default"}),e.$on("loginCompleted",function(n,t){c.count().then(function(n){e.menuCount.users=n.data},function(e){console.log(e)}),u.count().then(function(n){e.menuCount.trunks=n.data},function(e){console.log(e)}),p.countIn().then(function(n){e.menuCount.routesIn=n.data},function(e){console.log(e)}),p.countOut().then(function(n){e.menuCount.routesOut=n.data},function(e){console.log(e)}),e.getConfig(),S(),$("body").css("background","")}),e.destroyAllSelects=function(e,n){n?($(e+" #"+n+" .selectpicker").each(function(e,n){$(n).selectpicker("destroy"),$(n).remove()}),$(e+" #"+n+" .combobox").each(function(e,n){$(n).remove()}),$(e+" #"+n+".combobox-container").each(function(e,n){$(n).remove()})):($(e+" .selectpicker").each(function(e,n){$(n).selectpicker("destroy"),$(n).remove()}),$(e+" .combobox").each(function(e,n){$(n).remove()}),$(e+" .combobox-container").each(function(e,n){$(n).remove()}))},n.$on("comboboxRepeatEnd",function(e,n){n.parent().combobox().parent().removeClass("hidden")}),n.$on("selectpickerRepeatEnd",function(e,n){n.parent().selectpicker().parent().parent().removeClass("hidden")}),n.$on("comboboxRepeatEndRevised",function(e,n){$("#"+n).combobox().parent().removeClass("hidden")}),n.$on("selectpickerRepeatEndRevised",function(e,n){$("#"+n).selectpicker().parent().parent().removeClass("hidden")}),e.setRandomBackground(),e.currentModel={},e.buildDefaultSettingsUI=function(){return{pinned:g.pinned(),preferences:g.preferences(),phonebook:g.phonebook()}};var M=function(e,n){let t=m.map(n);return{map:t,softKeys:E(e.softKeys(t)),lineKeys:E(e.lineKeys(t)),expansionKeys:E(e.expansionKeys(t)),displayAndRingtones:e.displayAndRingtones(t),preferences:e.preferences(t),phonebook:e.phonebook(t),network:e.network(t)}},_=function(n,t,a,s){return e.currentModel={uiLocation:n,ui:function(e,n){switch(e.toLowerCase()){case"fanvil":return M(b,n);case"gigaset":return M(h,n);case"nethesis":return M(x,n);case"sangoma":return M(y,n);case"snom":return M(w,n);case"yealink":return M(k,n);default:return M(m,n)}}(a,s.data.variables),storedVariables:angular.copy(s.data.variables),variables:angular.copy(s.data.variables),inputs:angular.copy(s.data.variables),modelVariables:angular.copy(s.data.variables),singleVariables:{},globals:{},name:t,mac:"",display_name:s.data.display_name,openedSection:"",shownPasswords:{},openedExpKeys:"",showingKeys:"",showingExpKeys:"",changed:!1,hasOriginals:P(t),changePhonebookType:!1,hidden:!1}};e.buildModel=function(e,n){return v(function(t,a){var s=e.split("-")[0].toLowerCase();f.getModel(e).then(function(i){_(n,e,s,i),A().then(function(e){t(e)},function(e){a(e)})},function(){a(err)})})},e.enableNextDisabled=function(){e.wizard.isNextDisabled=!1},e.formatBytes=function(e,n=2){if(0===e)return"0 Bytes";const t=n<0?0:n,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]},e.connectivityCheck=function(n){f.checkConnectivity(n).then(function(n){e.connectivityCheckRes=n.data,setTimeout(function(){e.$apply()},100)},function(e){console.log(e)})},e.refreshGlobalsSelects=function(){$(".globalsSectionContainer select").each(function(){$(this).hasClass("selectpicker")?$(this).selectpicker("refresh"):$(this).hasClass("combobox")&&$(this).combobox("refresh")})},e.loadingDefaults=function(){e.defaultsLoading=!0,setTimeout(function(){e.$apply(function(){e.defaultsLoading=!1})},1500)},e.ldapToDefaultVariables=function(n,t,a){let s=!a||!(!a||!e.defaultSettings.ui_first_config);t&&s?(e.defaultSettings.ldap_port=n.ldaps.port,e.defaultSettings.ldap_user=n.ldaps.user,e.defaultSettings.ldap_password=n.ldaps.password,e.defaultSettings.ldap_tls=n.ldaps.tls,e.defaultSettings.ldap_base=n.ldaps.base,e.defaultSettings.ldap_name_display=n.ldaps.name_display,e.defaultSettings.ldap_mainphone_number_attr=n.ldaps.mainphone_number_attr,e.defaultSettings.ldap_mobilephone_number_attr=n.ldaps.mobilephone_number_attr,e.defaultSettings.ldap_otherphone_number_attr=n.ldaps.otherphone_number_attr,e.defaultSettings.ldap_name_attr=n.ldaps.name_attr,e.defaultSettings.ldap_number_filter=n.ldaps.number_filter,e.defaultSettings.ldap_name_filter=n.ldaps.name_filter,e.defaultSettings.ldap_server=""):s&&(e.defaultSettings.ldap_port=n.ldap.port,e.defaultSettings.ldap_user=n.ldap.user,e.defaultSettings.ldap_password=n.ldap.password,e.defaultSettings.ldap_tls=n.ldap.tls,e.defaultSettings.ldap_base=n.ldap.base,e.defaultSettings.ldap_name_display=n.ldap.name_display,e.defaultSettings.ldap_mainphone_number_attr=n.ldap.mainphone_number_attr,e.defaultSettings.ldap_mobilephone_number_attr=n.ldap.mobilephone_number_attr,e.defaultSettings.ldap_otherphone_number_attr=n.ldap.otherphone_number_attr,e.defaultSettings.ldap_otherphone_number_attr=n.ldap.otherphone_number_attr,e.defaultSettings.ldap_name_attr=n.ldap.name_attr,e.defaultSettings.ldap_number_filter=n.ldap.number_filter,e.defaultSettings.ldap_name_filter=n.ldap.name_filter,e.defaultSettings.ldap_server="")},e.ldapCheck=function(){f.ldapCheck().then(function(n){e.ldapCheckRes=n.data,n.data.ldaps.enabled?e.ldapToDefaultVariables(n.data,!0,!0):n.data.ldap.enabled?e.ldapToDefaultVariables(n.data,!1,!0):(e.ldapResDisabled=!0,"https"==e.defaultSettings.provisioning_url_scheme?e.ldapToDefaultVariables(n.data,!0,!0):e.ldapToDefaultVariables(n.data,!1,!0)),e.ldapTypeCheck(),e.refreshGlobalsSelects()},function(e){console.log(e)})},e.startPhonebookService=function(){"ldaps"!=e.phonebookType||e.ldapCheckRes.ldaps.enabled?"ldap"!=e.phonebookType||e.ldapCheckRes.ldap.enabled||s.switchPhonebookJs("enabled").then(function(n){e.ldapResDisabled=!1,e.ldapCheckRes.ldap.enabled=!0},function(e){console.log(e)}):s.switchPhonebookJss("enabled").then(function(n){e.ldapResDisabled=!1,e.ldapCheckRes.ldaps.enabled=!0},function(e){console.log(e)})},e.ldapTypeCheck=function(){e.defaultSettings.ui_first_config?"https"==e.defaultSettings.provisioning_url_scheme?e.phonebookType="ldaps":e.phonebookType="ldap":""==e.defaultSettings.ldap_server&&e.defaultSettings.ldap_port==e.ldapCheckRes.ldap.port?e.phonebookType="ldap":""==e.defaultSettings.ldap_server&&e.defaultSettings.ldap_port==e.ldapCheckRes.ldaps.port?e.phonebookType="ldaps":""!=e.defaultSettings.ldap_server&&(e.phonebookType="externalldap"),setTimeout(function(){let n=document.querySelector("#phonebookType");n&&(n.value=e.phonebookType,e.$apply(),$(n).selectpicker("refresh")),n=null},100)};var C=function(){""!=e.currentModel.globals.ldap_server||""!=e.currentModel.variables.ldap_server||e.currentModel.globals.ldap_port!=e.ldapCheckRes.ldap.port&&e.currentModel.variables.ldap_port!=e.ldapCheckRes.ldap.port?""!=e.currentModel.globals.ldap_server||""!=e.currentModel.variables.ldap_server||e.currentModel.globals.ldap_port!=e.ldapCheckRes.ldaps.port&&e.currentModel.variables.ldap_port!=e.ldapCheckRes.ldaps.port?""!=e.currentModel.globals.ldap_server&&""!=e.currentModel.variables.ldap_server||(e.modelPhonebookType="externalldap"):e.modelPhonebookType="ldaps":e.modelPhonebookType="ldap"};e.modelLdapTypeCheck=function(){e.ldapCheckRes?C():f.ldapCheck().then(function(n){e.ldapCheckRes=n.data,C()},function(e){console.log(e)})},e.toInt=function(e){return parseInt(e)},e.uploads={firmware_file:[],ringtones_file:[],background_file:[],screensaver_file:[]},e.getFirmwares=function(){f.getFirmwares().then(function(n){e.uploads.firmware_file=n.data;for(let n in e.uploads.firmware_file)e.uploads.firmware_file[n].size=e.formatBytes(e.uploads.firmware_file[n].size)},function(e){console.log(e)})},e.reloadFirmwaresList=function(){f.getFirmwares().then(function(n){e.uploads.firmware_file=n.data;for(let n in e.uploads.firmware_file)e.uploads.firmware_file[n].size=e.formatBytes(e.uploads.firmware_file[n].size);setTimeout(function(){e.$apply(),$(".model-container .firmware_file-select").selectpicker("refresh")},100)},function(e){console.log(e)})},e.getRingtones=function(){f.getRingtone().then(function(n){e.uploads.ringtone_file=n.data;for(let n in e.uploads.ringtone_file)e.uploads.ringtone_file[n].size=e.formatBytes(e.uploads.ringtone_file[n].size)},function(e){console.log(e)})},e.reloadRingtonesList=function(){f.getRingtone().then(function(n){e.uploads.ringtone_file=n.data;for(let n in e.uploads.ringtone_file)e.uploads.ringtone_file[n].size=e.formatBytes(e.uploads.ringtone_file[n].size);setTimeout(function(){e.$apply(),$(".model-container .ringtone_file-select").selectpicker("refresh")},100)},function(e){console.log(e)})},e.getBackgrounds=function(){f.getBackground().then(function(n){e.uploads.background_file=n.data;for(let n in e.uploads.background_file)e.uploads.background_file[n].size=e.formatBytes(e.uploads.background_file[n].size)},function(e){console.log(e)})},e.reloadBackgroundsList=function(){f.getBackground().then(function(n){e.uploads.background_file=n.data;for(let n in e.uploads.background_file)e.uploads.background_file[n].size=e.formatBytes(e.uploads.background_file[n].size);setTimeout(function(){e.$apply(),$(".model-container .background_file-select").selectpicker("refresh")},100)},function(e){console.log(e)})},e.getScreensavers=function(){f.getScreensaver().then(function(n){e.uploads.screensaver_file=n.data;for(let n in e.uploads.screensaver_file)e.uploads.screensaver_file[n].size=e.formatBytes(e.uploads.screensaver_file[n].size)},function(e){console.log(e)})},e.reloadScreensaversList=function(){f.getScreensaver().then(function(n){e.uploads.screensaver_file=n.data;for(let n in e.uploads.screensaver_file)e.uploads.screensaver_file[n].size=e.formatBytes(e.uploads.screensaver_file[n].size);setTimeout(function(){e.$apply(),$(".model-container .screensaver_file-select").selectpicker("refresh")},100)},function(e){console.log(e)})},e.scrollingContainerView=function(){n.$broadcast("scrollingContainerView")};var A=function(){return v(function(n,t){f.getDefaults().then(function(t){for(var a in e.currentModel.globals=angular.copy(t.data),t.data)e.currentModel.variables[a]||(e.currentModel.variables[a]=angular.copy(t.data[a])),n(t)},function(e){t(e)})})},P=function(e){return e.split("-").length-1==1},E=function(e){if(e){var n=[];return e.items[0].keys.intervals.forEach(function(e){for(var t=e.start;t<=e.end;t++)n.push(t)}),e.items[0].keysIndexes=n,e}};e.$on("curentModelSaved",function(){e.currentModel.changed=!1}),e.$on("variableChanged",function(){e.currentModel.changed||(e.currentModel.changed=!0)}),e.$on("$routeChangeStart",function(){"/devices/models"==a.path()&&(e.currentModel={},e.destroyAllSelects("#modelsContainer")),"/configurations"==a.path()&&(e.currentModel={},e.destroyAllSelects("#singleModelModal")),"/devices/models"!=a.path()&&"/devices"!=a.path()||(e.defaultSettings={}),e.connectivityCheckRes&&(e.connectivityCheckRes=null),e.ldapResDisabled&&(e.ldapResDisabled=!1)}),document.body.addEventListener("click",function(e){n.$broadcast("domclick",e)},!0)}]),angular.module("nethvoiceWizardUiApp").controller("LoginCtrl",["$rootScope","$scope","$location","ConfigService","LoginService","LocalStorageService","MigrationService",function(e,n,t,a,s,i,o){n.doLogin=function(l){s.login(n.username,n.password,l).then(function(s){a.getWizard().then(function(s){0==s.length?(n.wizard.isWizard=!0,n.wizard.stepCount=0):(n.wizard.isWizard="true"===s[0].status,n.wizard.stepCount=s[0].step),n.wizard.isWizard?o.isMigration().then(function(e){if(n.wizard.isMigration=e.data,n.wizard.isMigration)a.getConfig().then(function(e){1===e.data.configured?o.getMigrationStatus().then(function(e){n.pauseWizard(),n.redirectMigrationAction(e.data,1),n.view.navbarReadyFirst=!0},function(e){console.log(e)}):(n.view.navbarReadyFirst=!0,t.path("/users"))},function(e){console.log(e)});else{n.view.navbarReadyFirst=!0;var s=appConfig.STEP_MAP_REVERSE[n.wizard.stepCount];"/"+s!==t.path()&&t.path("/"+s)}},function(e){console.log(e)}):n.view.navbarReadyFirst=!0,$("body").show(),n.login.isLogged=!0,e.$broadcast("loginCompleted")},function(e){console.log(e)})},function(e){200!==e.status&&(n.login.showError=!0,n.login.isLogged=!1,$("#loginTpl").show(),t.path("/login"),$("body").show(),i.remove("secretkey")),console.log(e)})};var l=s.getCredentials();l?($("#loginTpl").hide(),n.doLogin(l)):(t.path("/login"),$("body").show())}]),angular.module("nethvoiceWizardUiApp").service("LanguageService",["$q","RestService",function(e,n){this.getAllLanguages=function(){var e=[];for(var n in window.getAllSupportedLanguagesKey()){var t=window.getAllSupportedLanguagesKey()[n],a={nativeName:window.getAllLanguagesKey()[t].nativeName,key:t,check:!1};e.push(a)}return e},this.getNativeName=function(e){return window.getLanguageNativeName(e)},this.getInstalledLanguages=function(){return e(function(e,t){n.get("/settings/languages").then(function(n){e(n)},function(e){t(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("LocalStorageService",["$window","$rootScope",function(e,n){this.set=function(n,t){e.localStorage&&e.localStorage.setItem(n,JSON.stringify(t))},this.get=function(n,t){if(e.localStorage.getItem(n)&&"undefined"!==e.localStorage.getItem(n)&&void 0!=e.localStorage.getItem(n)){var a=e.localStorage.getItem(n)||"";return t?a:JSON.parse(a)}return""},this.remove=function(n){e.localStorage&&e.localStorage.removeItem(n)}}]),angular.module("nethvoiceWizardUiApp").directive("wizardStep",function(){return{templateUrl:"scripts/directives/wizard-step.html",controller:["$scope","$route","$location","$attrs","ConfigService",function(e,n,t,a,s){e.isNextDisabled=e.wizard.isNextDisabled,e.currentStep=n.current.controllerAs.split("/").length>1?n.current.controllerAs.split("/")[1]:n.current.controllerAs.split("/")[0],e.wizard.stepCount=appConfig.STEP_MAP[e.currentStep],e.wizard.prevState=appConfig.STEP_WIZARD[e.currentStep].prev,e.wizard.nextState=appConfig.STEP_WIZARD[e.currentStep].next,!appConfig.STEP_WIZARD[e.currentStep].next&&appConfig.STEP_WIZARD[e.currentStep].last&&(e.endWizard=!0),"admin/settings"!=e.wizard.nextState&&"devices"!=e.wizard.nextState||(e.wizard.nextState=!1),e.resolveProgress=function(){return Math.floor(100*e.wizard.stepCount/appConfig.TOTAL_STEP)},e.finalize=function(){s.setWizard({status:"false",step:e.wizard.stepCount}).then(function(e){t.path("/final")},function(e){console.log(e)})},e.prevStep=function(){return appConfig.STEP_WIZARD[e.currentStep].prev&&(t.path(appConfig.STEP_WIZARD[e.currentStep].prev),e.wizard.stepCount--),s.setWizard({status:"true",step:e.wizard.stepCount}).then(function(e){},function(e){console.log(e)}),appConfig.STEP_WIZARD[e.currentStep].prev},e.nextStep=function(){return e.wizard.nextState&&appConfig.STEP_WIZARD[e.currentStep].next&&(t.path(appConfig.STEP_WIZARD[e.currentStep].next),e.wizard.stepCount++),s.setWizard({status:"true",step:e.wizard.stepCount}).then(function(e){},function(e){console.log(e)}),appConfig.STEP_WIZARD[e.currentStep].next}}]}}),angular.module("nethvoiceWizardUiApp").directive("onFinishRender",["$timeout","$rootScope",function(e,n){return{restrict:"A",link:function(t,a,s){!0!==t.$last||s.renderIndex||s.renderStart?s.renderIndex&&s.renderStart&&s.renderIndex==s.renderStart?e(function(){n.$emit(s.onFinishRender,a)}):s.renderIndex&&s.renderIndex==t.$index+1&&e(function(){n.$emit(s.onFinishRender,a)}):e(function(){n.$emit(s.onFinishRender,a)})}}}]),angular.module("nethvoiceWizardUiApp").directive("onFinishRenderRevised",["$timeout","$rootScope",function(e,n){return{restrict:"A",link:function(t,a,s){(!0===t.$last||s.forcerendering)&&e(function(){n.$emit(s.onFinishRenderRevised,s.parentid)})}}}]),angular.module("nethvoiceWizardUiApp").directive("onElementRender",["$timeout",function(e){return{restrict:"A",link:function(n,t,a){e(function(){n.$emit(a.onElementRender,t)})}}}]),angular.module("nethvoiceWizardUiApp").directive("dropzone",function(){return{restrict:"A",link:function(e,n,t){let a=0;function s(n){n.stopPropagation(),n.preventDefault(),e.evt.draghover=!0,e.$apply(),a++}n.bind("dragenter",s),n.children("div").bind("dragenter",s),n.bind("dragover",function(e){e.stopPropagation(),e.preventDefault()}),n.bind("dragleave",function(n){n.stopPropagation(),n.preventDefault(),0==--a&&(e.evt.draghover=!1,e.$apply())}),n.bind("drop",function(n){n.stopPropagation(),n.preventDefault(),a=0,e.evt.draghover=!1,e.$apply();let t=n.originalEvent.dataTransfer.files[0];e.fileUpload(t,e.uploadProgress)}),n.children("input").bind("change",function(n){let t=n.target.files[0];e.fileUpload(t,e.uploadProgress)})}}}),angular.module("nethvoiceWizardUiApp").service("LoginService",["$q","LocalStorageService","RestService","RestServiceCTI",function(e,n,t,a){this.removeCredentials=function(){return e(function(e,a){t.get("/logout").then(function(t){n.remove("secretkey"),e(t)},function(e){a(e)})})},this.getCredentials=function(){return n.get("secretkey")},this.login=function(n,s,i){return e(function(e,o){if(void 0===i){var l=t.getHash(n,s);t.setAuthHeader(n,l),a.setAuthHeader(n,l)}else t.setAuthHeader(i.user,i.hash),a.setAuthHeader(i.user,i.hash);t.get("/login").then(function(n){n.hash=l,e(n)},function(e){o(e)})})},this.logout=function(n){return e(function(e,t){User.logout({access_token:n},function(n){$securityService.reset(),e(n)},function(e){t(e)})})},this.getCurrentLoggeduser=function(){return n.get("currentLoggedUser")}}]),angular.module("nethvoiceWizardUiApp").service("ModelService",["$q","RestService",function(e,n){this.createModel=function(t){return e(function(e,a){n.tpost("/tancredi/api/v1/models",t).then(function(n){e(n)},function(e){a(e)})})},this.addPhone=function(e){n.tpost("/tancredi/api/v1/phones",e).then(function(e){resolve(e)},function(e){reject(e)})},this.getPhones=function(){n.tget("/tancredi/api/v1/phones").then(function(e){resolve(e)},function(e){reject(e)})},this.addModel=function(e){n.tpost("/tancredi/api/v1/models",e).then(function(e){resolve(e)},function(e){reject(e)})},this.getModels=function(){return e(function(e,t){n.tget("/tancredi/api/v1/models").then(function(n){e(n)},function(e){t(e)})})},this.getUsedModels=function(){return e(function(e,t){n.tget("/tancredi/api/v1/models?filter[used]").then(function(n){e(n)},function(e){t(e)})})},this.getModel=function(t){return e(function(e,a){n.tget("/tancredi/api/v1/models/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getOriginal=function(t){return e(function(e,a){n.tget("/tancredi/api/v1/models/"+t+"/version/original").then(function(n){e(n)},function(e){a(e)})})},this.patchModel=function(t,a){return e(function(e,s){n.tpatch("/tancredi/api/v1/models/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.createModel=function(t){return e(function(e,a){n.tpost("/tancredi/api/v1/models",t).then(function(n){e(n)},function(e){a(e)})})},this.deleteModel=function(t){return e(function(e,a){n.tdelete("/tancredi/api/v1/models/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getDefaults=function(){return e(function(e,t){n.tget("/tancredi/api/v1/defaults").then(function(n){e(n)},function(e){t(e)})})},this.setDefaults=function(t){return e(function(e,a){n.tpatch("/tancredi/api/v1/defaults",t).then(function(n){e(n)},function(e){a(e)})})},this.checkConnectivity=function(t){return e(function(e,a){n.post("/provisioning/connectivitycheck",t).then(function(n){e(n)},function(e){a(e)})})},this.ldapCheck=function(){return e(function(e,t){n.get("/phonebook/ldap").then(function(n){e(n)},function(e){t(e)})})},this.updateAdminPw=(t=>e(function(e,a){n.post("/physicalextensions/adminpw",t).then(function(n){e(n)},function(e){a(e)})})),this.getFirmwares=function(){return e(function(e,t){n.tget("/tancredi/api/v1/firmware").then(function(n){e(n)},function(e){t(e)})})},this.uploadFirmware=function(t,a){return e(function(e,s){n.tupload("/tancredi/api/v1/firmware",t,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteFirmware=function(t){return e(function(e,a){n.tdelete("/tancredi/api/v1/firmware/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getRingtone=function(){return e(function(e,t){n.tget("/tancredi/api/v1/ringtones").then(function(n){e(n)},function(e){t(e)})})},this.uploadRingtone=function(t,a){return e(function(e,s){n.tupload("/tancredi/api/v1/ringtones",t,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteRingtone=function(t){return e(function(e,a){n.tdelete("/tancredi/api/v1/ringtones/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getBackground=function(){return e(function(e,t){n.tget("/tancredi/api/v1/backgrounds").then(function(n){e(n)},function(e){t(e)})})},this.uploadBackground=function(t,a){return e(function(e,s){n.tupload("/tancredi/api/v1/backgrounds",t,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteBackground=function(t){return e(function(e,a){n.tdelete("/tancredi/api/v1/backgrounds/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getScreensaver=function(){return e(function(e,t){n.tget("/tancredi/api/v1/screensavers").then(function(n){e(n)},function(e){t(e)})})},this.uploadScreensaver=function(t,a){return e(function(e,s){n.tupload("/tancredi/api/v1/screensavers",t,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteScreensaver=function(t){return e(function(e,a){n.tdelete("/tancredi/api/v1/screensavers/"+t).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("GenericPhoneUtilsService",["$filter",function(e){this.getLanguages=function(){return this.getOptionsLabels(["en","it"])},this.getDateFormat=function(){return[{text:"DD MM YY",value:"DD MM YY"},{text:"DD MM YYYY",value:"DD MM YYYY"},{text:"DD MMM WW",value:"DD MMM WW"},{text:"DD MMM YY",value:"DD MMM YY"},{text:"DD MMM YYYY",value:"DD MMM YYYY"},{text:"WWW DD MMM",value:"WWW DD MMM"},{text:"WWW MMM DD",value:"WWW MMM DD"},{text:"MM DD YYYY",value:"MM DD YYYY"},{text:"MMM DD WW",value:"MMM DD WW"},{text:"YY MM DD",value:"YY MM DD"},{text:"YYYY MM DD",value:"YYYY MM DD"},{text:"MM DD YY",value:"MM DD YY"}]},this.getTimeZones=function(){return this.getOptionsLabels(["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Bahia_Banderas","America/Bahia","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson_Creek","America/Dawson","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fortaleza","America/Fort_Nelson","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Inuvik","America/Iqaluit","America/Jamaica","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santarem","America/Santiago","America/Santo_Domingo","America/Scoresbysund","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Chita","Asia/Choibalsan","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kathmandu","Asia/Khandyga","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qyzylorda","Asia/Riyadh","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yangon","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/Stanley","Atlantic/St_Helena","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Wake","Pacific/Wallis","UTC"])},this.getToneZones=function(){return this.getOptionsLabels(["us","it","es","uk"],"tone_zone_")},this.getOptionsLabels=function(n,t=""){let a=[];for(let s of n){let n={text:e("translate")(t+s),value:s};a.push(n)}return a},this.countBlacklist=function(e){return e.split(",").length}}]),angular.module("nethvoiceWizardUiApp").service("PhoneService",["$q","RestService","UtilService",function(e,n,t){this.getPhones=function(){return e(function(e,t){n.tget("/tancredi/api/v1/phones").then(function(n){e(n)},function(e){t(e)})})},this.createPhone=function(t){return e(function(e,a){n.tpost("/tancredi/api/v1/phones",t).then(function(n){e(n)},function(e){a({error:e,phone:t})})})},this.getPhone=function(t){return e(function(e,a){n.tget("/tancredi/api/v1/phones/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getPhoneInherit=function(t){return e(function(e,a){n.tget("/tancredi/api/v1/phones/"+t+"?inherit=1").then(function(n){e(n)},function(e){a({error:e,phone:phone})})})},this.setPhoneModel=function(t,a){return e(function(e,s){n.tpatch("/tancredi/api/v1/phones/"+t,{model:a}).then(function(n){e(n)},function(e){s(e)})})},this.patchPhone=function(t,a){return e(function(e,s){n.tpatch("/tancredi/api/v1/phones/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.deletePhone=function(t){return e(function(e,a){n.tdelete("/tancredi/api/v1/phones/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getDelayedReboot=function(){return e(function(e,t){n.get("/phones/reboot").then(function(n){e(n)},function(e){t(e)})})},this.setPhoneReboot=function(t){return e(function(e,a){n.post("/phones/reboot",t).then(function(n){e(n)},function(e){a(e)})})},this.deletePhoneDelayedReboot=function(t){return e(function(e,a){n.deleteWithContentTypeJson("/phones/reboot",t).then(function(n){e(n)},function(e){a(e)})})},this.getMacVendors=function(){return e(function(e,t){n.tget("/tancredi/api/v1/macvendors").then(function(n){e(n)},function(e){t(e)})})},this.removeMacSeparators=function(e){return e.replace(/:|-/g,"")},this.getAllVendors=function(e){var n=new Set;return Object.keys(e).forEach(function(a){var s=e[a];s=t.capitalize(s),n.add(s)}),Array.from(n)},this.toRps=function(t,a){return e(function(e,s){n.post("/phones/rps/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.getVendor=function(e,n){var a=n[(e=this.removeMacSeparators(e).toUpperCase()).substring(0,6)];return a&&(a=t.capitalize(a)),a},this.checkMacAddress=function(e){var n=this.removeMacSeparators(e);return/^[0-9a-fA-F]{12}$/.test(n)},this.normalizeMacAddress=function(e){for(var n=[],t=0,a=(e=this.removeMacSeparators(e).toUpperCase()).length;t<a;t+=2)n.push(e.substr(t,2));return n.join("-")},this.checkNetmask=function(e){return/^(((255\.){3}(255|254|252|248|240|224|192|128|0+))|((255\.){2}(255|254|252|248|240|224|192|128|0+)\.0)|((255\.)(255|254|252|248|240|224|192|128|0+)(\.0+){2})|((255|254|252|248|240|224|192|128|0+)(\.0+){3}))$/.test(e)},this.getFilteredModels=function(e,n,t){var a=this.getVendor(e,t);return a?n.filter(function(e){return e.name.toLowerCase().startsWith(a.toLowerCase())}):angular.copy(n)},this.buildPhone=function(e,n,a){var s,i=e.mac,o=this.getFilteredModels(i,n,a);e.model&&(s=o.find(function(n){return e.model===n.name}));var l=e.display_name;return l||(l=this.getVendor(i,a)),l&&(l=t.capitalize(l)),{mac:i,model:s,vendor:l,filteredModels:o}},this.buildPhoneTancredi=function(e,n,t,a){return n&&(n=n.name),t||(t=this.getVendor(e,a)),{mac:e=this.formatMac(e),model:n,display_name:t}},this.formatMac=function(e){return e=(e=(e=(e=e.toUpperCase()).replace(/\W/gi,"")).replace(/(.{2})/g,"$1-")).substring(0,e.length-1)}}]),angular.module("nethvoiceWizardUiApp").service("ProvFanvilService",["GenericPhoneService",function(e){this.preferences=function(n){return e.preferences(n)},this.phonebook=function(n){return e.phonebook(n)},this.displayAndRingtones=function(n){return e.displayAndRingtones(n)},this.network=function(n){return e.network(n)},this.softKeys=function(n){return e.softKeys(n)},this.lineKeys=function(n){return e.lineKeys(n)},this.expansionKeys=function(n){return e.expansionKeys(n)}}]),angular.module("nethvoiceWizardUiApp").service("ProvNethesisService",["GenericPhoneService",function(e){this.preferences=function(n){return e.preferences(n)},this.phonebook=function(n){return e.phonebook(n)},this.displayAndRingtones=function(n){return e.displayAndRingtones(n)},this.network=function(n){return e.network(n)},this.softKeys=function(n){return e.softKeys(n)},this.lineKeys=function(n){return e.lineKeys(n)},this.expansionKeys=function(n){return e.expansionKeys(n)}}]),angular.module("nethvoiceWizardUiApp").service("ProvSnomService",["GenericPhoneService",function(e){this.preferences=function(n){return e.preferences(n)},this.phonebook=function(n){return e.phonebook(n)},this.displayAndRingtones=function(n){return e.displayAndRingtones(n)},this.network=function(n){return e.network(n)},this.softKeys=function(n){return e.softKeys(n)},this.lineKeys=function(n){return e.lineKeys(n)},this.expansionKeys=function(n){return e.expansionKeys(n)}}]),angular.module("nethvoiceWizardUiApp").service("ProvGigasetService",["GenericPhoneService",function(e){this.preferences=function(n){return e.preferences(n)},this.phonebook=function(n){return e.phonebook(n)},this.displayAndRingtones=function(n){return e.displayAndRingtones(n)},this.network=function(n){return e.network(n)},this.softKeys=function(n){return e.softKeys(n)},this.lineKeys=function(n){return e.lineKeys(n)},this.expansionKeys=function(n){return e.expansionKeys(n)}}]),angular.module("nethvoiceWizardUiApp").service("ProvSangomaService",["GenericPhoneService",function(e){this.preferences=function(n){return e.preferences(n)},this.phonebook=function(n){return e.phonebook(n)},this.displayAndRingtones=function(n){return e.displayAndRingtones(n)},this.network=function(n){return e.network(n)},this.softKeys=function(n){return e.softKeys(n)},this.lineKeys=function(n){return e.lineKeys(n)},this.expansionKeys=function(n){return e.expansionKeys(n)}}]),angular.module("nethvoiceWizardUiApp").service("ProvYealinkService",["GenericPhoneService",function(e){this.preferences=function(n){return e.preferences(n)},this.displayAndRingtones=function(n){return e.displayAndRingtones(n)},this.phonebook=function(n){return e.phonebook(n)},this.network=function(n){return e.network(n)},this.softKeys=function(n){return e.softKeys(n)},this.lineKeys=function(n){return e.lineKeys(n)},this.expansionKeys=function(n){return e.expansionKeys(n)}}]),angular.module("nethvoiceWizardUiApp").service("ProvGlobalsService",["$q","RestService","GenericPhoneUtilsService",function(e,n,t){this.pinned=function(){return{name:"Pinned",data:[{variable:"provisioning_url_scheme",default_value:"",description:"Encryption",type:"list",options:[{text:"Enabled",value:"https"},{text:"Disabled",value:"http"}]},{variable:"hostname",default_value:"",description:"PBX address",type:"input"},{variable:"adminpw",default_value:"",description:"Admin password",type:"password"},{variable:"userpw",default_value:"",description:"User password",type:"password"}]}},this.preferences=function(){return{name:"Preferences",data:[{variable:"language",description:"Phone language",type:"list",options:t.getLanguages()},{variable:"provisioning_freq",description:"Provisioning scheduling",type:"list",options:[{text:"everyday",value:"everyday"},{text:"never_prov_freq",value:"never"}]},{variable:"tonezone",description:"Tone zone",type:"list",options:t.getToneZones()},{variable:"timezone",description:"Time zone",type:"list",options:t.getTimeZones()}]}},this.phonebook=function(){return{name:"ldap_phonebook_title",data:[{variable:"ldap_server",description:"ldap_server",type:"input"},{variable:"ldap_port",description:"ldap_port",type:"input"},{variable:"ldap_user",description:"ldap_user",type:"input"},{variable:"ldap_password",description:"ldap_password",type:"password"},{variable:"ldap_tls",description:"ldap_tls",type:"list",options:[{text:"ldap_tls_none",value:"none"},{text:"ldap_tls_starttls",value:"starttls"},{text:"ldap_tls_tls",value:"ldaps"}]},{variable:"ldap_base",description:"ldap_base",type:"input"},{variable:"ldap_name_filter",description:"ldap_name_filter",type:"input"},{variable:"ldap_number_filter",description:"ldap_number_filter",type:"input"},{variable:"ldap_name_attr",description:"ldap_name_attr",type:"input"},{variable:"ldap_name_display",description:"ldap_name_display",type:"input"},{variable:"ldap_mainphone_number_attr",description:"ldap_mainphone_number_attr",type:"input"},{variable:"ldap_mobilephone_number_attr",description:"ldap_mobilephone_number_attr",type:"input"},{variable:"ldap_otherphone_number_attr",description:"ldap_otherphone_number_attr",type:"input"}]}}}]),angular.module("nethvoiceWizardUiApp").service("GenericPhoneService",["GenericPhoneUtilsService",function(e){this.map=function(e){let n=parseInt(e.cap_softkey_count),t=e.cap_softkey_type_blacklist?e.cap_softkey_type_blacklist.split(","):"",a=parseInt(e.cap_linekey_count),s=e.linekey_type_blacklist?e.linekey_type_blacklist.split(","):"",i=parseInt(e.cap_expmodule_count),o=parseInt(e.cap_expkey_count),l=e.cap_expkey_type_blacklist?e.cap_expkey_type_blacklist.split(","):"",r=e.cap_date_format_blacklist?e.cap_date_format_blacklist.split(","):"",c=e.cap_dss_transfer_blacklist?e.cap_dss_transfer_blacklist.split(","):"",d=e.cap_ldap_tls_blacklist?e.cap_ldap_tls_blacklist.split(","):"",u=e.cap_ringtone_blacklist?e.cap_ringtone_blacklist.split(","):"",p=e.cap_ringtone_count,f=e.cap_background_file,m=e.cap_screensaver_file,g=e.cap_backlight_time_blacklist?e.cap_backlight_time_blacklist.split(","):"",v=e.cap_screensaver_time_blacklist?e.cap_screensaver_time_blacklist.split(","):"",b=e.cap_contrast,h=e.cap_brightness;return{general:{settings:!0,password:!0,date_format:{blacklist:r}},network:{},preferences:{dss_transfer:{blacklist:c}},displayAndRingtones:{ringtone:{blacklist:u,count:parseInt(p)+2,startfrom:-1},background_file:{visible:"1"==f},screensaver_file:{visible:"1"==m},backlight_time:{blacklist:g,visible:16!=g.length},screensaver_time:{blacklist:v,visible:16!=v.length},contrast:{count:10,startfrom:0,visible:"1"==b},brightness:{count:10,startfrom:0,visible:"1"==h}},phonebook:{ldap:!0,ldap_tls:{blacklist:d}},provisioning:{provisioning:!0},softKeys:{intervals:[{start:1,end:n}],hidden_types:t},lineKeys:{intervals:[{start:1,end:a}],hidden_types:s},expansionKeys:{modules:i,module_keys_count:o,intervals:[{start:1,end:o}],hidden_types:l}}},this.displayAndRingtones=function(){return{name:"Display and ringtone",items:[{variable:"ringtone",description:"Ringtone selection",type:"dynamicselectpicker"},{variable:"ringtone_file",description:"Custom ringtone management",type:"upload"},{variable:"background_file",description:"Background image",type:"upload"},{variable:"screensaver_file",description:"Screensaver image",type:"upload"},{variable:"backlight_time",description:"Backlight timeout",type:"selectpicker",options:[{text:"3 seconds",value:"3"},{text:"5 seconds",value:"5"},{text:"7 seconds",value:"7"},{text:"10 seconds",value:"10"},{text:"15 seconds",value:"15"},{text:"30 seconds",value:"30"},{text:"1 minute",value:"60"},{text:"2 minutes",value:"120"},{text:"5 minutes",value:"300"},{text:"10 minutes",value:"600"},{text:"20 minutes",value:"1200"},{text:"30 minutes",value:"1800"},{text:"40 minutes",value:"2400"},{text:"50 minutes",value:"3000"},{text:"1 hour",value:"3600"},{text:"Always on",value:"0"}]},{variable:"screensaver_time",description:"Screensaver timeout",type:"selectpicker",options:[{text:"3 seconds",value:"3"},{text:"5 seconds",value:"5"},{text:"7 seconds",value:"7"},{text:"10 seconds",value:"10"},{text:"15 seconds",value:"15"},{text:"30 seconds",value:"30"},{text:"1 minute",value:"60"},{text:"2 minutes",value:"120"},{text:"5 minutes",value:"300"},{text:"10 minutes",value:"600"},{text:"20 minutes",value:"1200"},{text:"30 minutes",value:"1800"},{text:"40 minutes",value:"2400"},{text:"50 minutes",value:"3000"},{text:"1 hour",value:"3600"},{text:"Disabled",value:"0"}]},{variable:"contrast",description:"Display contrast",type:"dynamicselectpicker"},{variable:"brightness",description:"Display brightness",type:"dynamicselectpicker"}]}},this.preferences=function(n){if(n.general.settings||n.general.password){var t=[];return n.general.settings&&(t=[{variable:"ntp_server",description:"NTP server address",type:"input"},{variable:"provisioning_freq",description:"Provisioning scheduling",type:"selectpicker",options:[{text:"everyday",value:"everyday"},{text:"never_prov_freq",value:"never"}]},{variable:"dss_transfer",description:"dss_transfer_label",type:"selectpicker",options:[{text:"dss_transfer_verify_label",value:"verify"},{text:"dss_transfer_attended_label",value:"attended"},{text:"dss_transfer_blind_label",value:"blind"}]},{variable:"language",description:"Phone language",type:"selectpicker",options:e.getLanguages()},{variable:"timezone",description:"Time zone",type:"bigcombobox",options:e.getTimeZones()},{variable:"tonezone",description:"Tone zone",type:"selectpicker",options:e.getToneZones()},{variable:"time_format",description:"time_format_label",type:"selectpicker",options:[{text:"time_format_12h",value:"12"},{text:"time_format_24h",value:"24"}]},{variable:"date_format",description:"Date format",type:"selectpicker",options:e.getDateFormat()},{variable:"firmware_file",description:"Firmware",type:"upload"}]),{name:"Preferences",items:t.concat([])}}},this.network=function(e){return{name:"network_settings_label",items:[{variable:"vlan_id_phone",description:"vlan_id_phone_label",type:"input"},{variable:"vlan_id_pcport",description:"vlan_id_pcport_label",type:"input"}]}},this.phonebook=function(e){var n=[];return e.phonebook.ldap&&(n=[{variable:"ldap_server",description:"ldap_server",type:"input"},{variable:"ldap_port",description:"ldap_port",type:"input"},{variable:"ldap_user",description:"ldap_user",type:"input"},{variable:"ldap_password",description:"ldap_password",type:"password"},{variable:"ldap_tls",description:"ldap_tls",type:"selectpicker",options:[{text:"ldap_tls_none",value:"none"},{text:"ldap_tls_starttls",value:"starttls"},{text:"ldap_tls_tls",value:"ldaps"}]},{variable:"ldap_base",description:"ldap_base",type:"input"},{variable:"ldap_name_filter",description:"ldap_name_filter",type:"input"},{variable:"ldap_number_filter",description:"ldap_number_filter",type:"input"},{variable:"ldap_name_attr",description:"ldap_name_attr",type:"input"},{variable:"ldap_name_display",description:"ldap_name_display",type:"input"},{variable:"ldap_mainphone_number_attr",description:"ldap_mainphone_number_attr",type:"input"},{variable:"ldap_mobilephone_number_attr",description:"ldap_mobilephone_number_attr",type:"input"},{variable:"ldap_otherphone_number_attr",description:"ldap_otherphone_number_attr",type:"input"}]),{name:"ldap_phonebook_title",items:n}},this.softKeys=function(e){if(e.softKeys.intervals[0].end)return{name:"Soft keys",items:[{description:"Soft key",type:"loop",keys:e.softKeys,data:{items:[{variable:"softkey_type",description:"Type",type:"list",options:[{text:"N/A",value:""},{text:"Forward",value:"forward"},{text:"DND",value:"dnd"},{text:"Recall",value:"recall"},{text:"Pick up",value:"pick_up"},{text:"Speed Dial",value:"speed_dial"},{text:"Group Pickup",value:"group_pickup"},{text:"History",value:"history"},{text:"Menu",value:"menu"},{text:"Status",value:"status"},{text:"Prefix",value:"prefix"},{text:"LDAP",value:"ldap"}]},{variable:"softkey_value",description:"Value",type:"input"},{variable:"softkey_label",description:"progkey_label",type:"input"}]}}]}},this.lineKeys=function(e){if(e.lineKeys.intervals[0].end)return{name:"Line keys",items:[{description:"Line key",type:"loop",keys:e.lineKeys,data:{items:[{variable:"linekey_type",description:"Type",type:"list",options:[{text:"N/A",value:""},{text:"Conference",value:"conference"},{text:"Forward",value:"forward"},{text:"Transfer",value:"transfer"},{text:"Hold",value:"hold"},{text:"DND",value:"dnd"},{text:"Recall",value:"recall"},{text:"Direct Pickup",value:"direct_pickup"},{text:"DTMF",value:"dtmf"},{text:"Dynamic Agent Login/Logout",value:"queuetoggle"},{text:"Voice Mail",value:"voice_mail"},{text:"Speed Dial",value:"speed_dial"},{text:"Line",value:"line"},{text:"BLF",value:"blf"},{text:"URL",value:"url"},{text:"Group Pickup",value:"group_pickup"},{text:"Multicast Paging",value:"multicast_paging"},{text:"Record",value:"record"},{text:"Prefix",value:"prefix"},{text:"Phone Lock",value:"phone_lock"},{text:"LDAP",value:"ldap"}]},{variable:"linekey_value",description:"Value",type:"input"},{variable:"linekey_label",description:"progkey_label",type:"input"}]}}]}},this.expansionKeys=function(e){if(e.expansionKeys.modules&&e.expansionKeys.intervals[0].end)return{name:"expkeys_title",items:[{description:"expkey_label",type:"loop",keys:e.expansionKeys,data:{items:[{variable:"expkey_type",description:"Type",type:"list",options:[{text:"N/A",value:""},{text:"Conference",value:"conference"},{text:"Forward",value:"forward"},{text:"Transfer",value:"transfer"},{text:"Hold",value:"hold"},{text:"DND",value:"dnd"},{text:"Recall",value:"recall"},{text:"Direct Pickup",value:"direct_pickup"},{text:"DTMF",value:"dtmf"},{text:"Voice Mail",value:"voice_mail"},{text:"Speed Dial",value:"speed_dial"},{text:"Line",value:"line"},{text:"BLF",value:"blf"},{text:"URL",value:"url"},{text:"Group Pickup",value:"group_pickup"},{text:"Multicast Paging",value:"multicast_paging"},{text:"Record",value:"record"},{text:"Prefix",value:"prefix"},{text:"Phone Lock",value:"phone_lock"},{text:"LDAP",value:"ldap"}]},{variable:"expkey_value",description:"Value",type:"input"},{variable:"expkey_label",description:"progkey_label",type:"input"}]}}]}}}]),angular.module("nethvoiceWizardUiApp").filter("range",function(){return function(e,n){n=parseInt(n);for(var t=0;t<n;t++)e.push(t);return e}}),angular.module("nethvoiceWizardUiApp").service("RestService",["$q","$http","LocalStorageService",function(e,n,t){this.setAuthHeader=function(e,a){n.defaults.headers.common.User=e,n.defaults.headers.common.Secretkey=a,t.set("secretkey",{user:e,hash:a.toString()})},this.getHash=function(e,n){var t=CryptoJS.SHA1(n);return CryptoJS.SHA1(e+t+customConfig.SECRET_KEY)},this.tget=function(t){return e(function(e,a){n.get(t).then(function(n){e(n)},function(e){a(e)})})},this.tpatch=function(t,a){return e(function(e,s){n.patch(t,a).then(function(n){e(n)},function(e){s(e)})})},this.tpost=function(t,a){return e(function(e,s){n.post(t,a).then(function(n){e(n)},function(e){s(e)})})},this.tdelete=function(t,a){return e(function(e,s){a?n.delete(t,{data:a}).then(function(n){e(n)},function(e){s(e)}):n.delete(t).then(function(n){e(n)},function(e){s(e)})})},this.tupload=function(t,a,s){let i=new FormData;i.append(0,a);let o={method:"POST",url:t,headers:{"Content-Type":void 0},data:i};return e(function(e,t){n(o).then(function(n){e(n)},function(e){t(e)})})},this.get=function(t){return e(function(e,a){n.get(customConfig.BASE_API_URL+t).then(function(n){e(n)},function(e){a(e)})})},this.post=function(t,a){return e(function(e,s){n.post(customConfig.BASE_API_URL+t,a).then(function(n){e(n)},function(e){s(e)})})},this.postfile=function(t,a){let s=new FormData;s.append(0,a);let i={method:"POST",url:customConfig.BASE_API_URL+t,headers:{"Content-Type":void 0},data:s};return e(function(e,t){n(i).then(function(n){e(n)},function(e){t(e)})})},this.patch=function(t,a){return e(function(e,s){n.patch(customConfig.BASE_API_URL+t,a).then(function(n){e(n)},function(e){s(e)})})},this.put=function(t,a){return e(function(e,s){n.put(customConfig.BASE_API_URL+t,a).then(function(n){e(n)},function(e){s(e)})})},this.delete=function(t,a){return e(function(e,s){a?n.delete(customConfig.BASE_API_URL+t,{data:a}).then(function(n){e(n)},function(e){s(e)}):n.delete(customConfig.BASE_API_URL+t).then(function(n){e(n)},function(e){s(e)})})},this.deleteWithContentTypeJson=function(t,a){var s={method:"DELETE",url:customConfig.BASE_API_URL+t,headers:{"Content-Type":"application/json;charset=utf-8"},data:a};return e(function(e,t){n(s).then(function(n){e(n)},function(e){t(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("UserService",["$q","RestService",function(e,n){this.count=function(){return e(function(e,t){n.get("/users/count").then(function(n){e(n)},function(e){t(e)})})},this.list=function(t){return e(function(e,a){n.get("/users/"+t).then(function(n){e(n)},function(e){a(e)})})},this.create=function(t){return e(function(e,a){n.post("/users",t).then(function(n){e(n)},function(e){a(e)})})},this.setPassword=function(t,a){return e(function(e,s){n.post("/users/"+t+"/password",a).then(function(n){e(n)},function(e){s(e)})})},this.getCsv=function(){return e(function(e,t){n.get("/csv/csvexport").then(function(n){e(n)},function(e){t(e)})})},this.setCsvImport=function(t){return e(function(e,a){n.post("/csv/csvimport",t).then(function(n){e(n)},function(e){a(e)})})},this.statusCsvImport=function(){return e(function(e,t){n.get("/csv/csvimport").then(function(n){e(n)},function(e){t(e)})})},this.createMainExtension=function(t){return e(function(e,a){n.post("/mainextensions",t).then(function(n){e(n)},function(e){a(e)})})},this.createPhysicalExtension=function(t){return e(function(e,a){n.post("/physicalextensions",t).then(function(n){e(n)},function(e){a(e)})})},this.deletePhysicalExtension=function(t){return e(function(e,a){n.delete("/physicalextensions/"+t).then(function(n){e(n)},function(e){a(e)})})},this.setPhoneModel=function(t,a){return e(function(e,s){n.patch("/physicalextensions/"+t,{model:a}).then(function(n){e(n)},function(e){s(e)})})},this.getVoiceMail=function(t){return e(function(e,a){n.get("/voicemails/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getMobileNumber=function(t){return e(function(e,a){n.get("/mobiles/"+t).then(function(n){e(n)},function(e){a(e)})})},this.createMobileNumber=function(t){return e(function(e,a){n.post("/mobiles",t).then(function(n){e(n)},function(e){a(e)})})},this.createVoiceMail=function(t){return e(function(e,a){n.post("/voicemails",t).then(function(n){e(n)},function(e){a(e)})})},this.createMobileExtension=function(t){return e(function(e,a){n.post("/mobileapp",t).then(function(n){e(n)},function(e){a(e)})})},this.getMobileExtension=function(t){return e(function(e,a){n.get("/mobileapp/"+t).then(function(n){e(n)},function(e){a(e)})})},this.deleteMobileExtension=function(t){return e(function(e,a){n.delete("/mobileapp/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getWebRTCExtension=function(t){return e(function(e,a){n.get("/webrtc/"+t).then(function(n){e(n)},function(e){a(e)})})},this.createWebRTCExtension=function(t){return e(function(e,a){n.post("/webrtc",t).then(function(n){e(n)},function(e){a(e)})})},this.deleteWebRTCExtension=function(t){return e(function(e,a){n.delete("/webrtc/"+t).then(function(n){e(n)},function(e){a(e)})})},this.retrieveFinalInfo=function(){return e(function(e,t){n.get("/final").then(function(n){e(n)},function(e){t(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("ConfigService",["$q","RestService",function(e,n){this.getConfig=function(){return e(function(e,t){n.get("/configuration/userprovider").then(function(n){e(n)},function(e){t(e)})})},this.setConfig=function(t){return e(function(e,a){n.post("/configuration/mode",{mode:t}).then(function(n){e(n)},function(e){a(e)})})},this.getNetworks=function(){return e(function(e,t){n.get("/configuration/networks").then(function(n){e(n)},function(e){t(e)})})},this.getWizard=function(){return e(function(e,t){n.get("/configuration/wizard").then(function(n){e(n.data)},function(e){t(e)})})},this.setWizard=function(t){return e(function(e,a){n.post("/configuration/wizard",t).then(function(n){e(n)},function(e){a(e)})})},this.setPBXLang=function(t){return e(function(e,a){n.post("/settings/language",t).then(function(n){e(n)},function(e){a(e)})})},this.setDefaultPBXLang=function(t){return e(function(e,a){n.post("/settings/defaultlanguage",t).then(function(n){e(n)},function(e){a(e)})})},this.getProvisioningInfo=function(){return e(function(e,t){n.get("/provisioning/engine").then(function(n){e(n)},function(e){t(e)})})},this.getExternalIp=function(){return e(function(e,t){n.get("/configuration/externalip").then(function(n){e(n)},function(e){t(e)})})},this.getSuggestedIp=function(){return e(function(e,t){n.get("/configuration/suggestedip").then(function(n){e(n)},function(e){t(e)})})},this.setExternalIp=function(t){return e(function(e,a){n.post("/configuration/externalip/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getLocalNetworks=function(){return e(function(e,t){n.get("/configuration/localnetworks").then(function(n){e(n)},function(e){t(e)})})},this.getExternalSip=function(){return e(function(e,t){n.get("/configuration/allowexternalsips").then(function(n){e(n)},function(e){t(e)})})},this.setExternalSip=function(t){return e(function(e,a){n.post("/configuration/allowexternalsips/"+t).then(function(n){e(n)},function(e){a(e)})})},this.setLocalNetworks=function(t){return e(function(e,a){n.post("/configuration/localnetworks",t).then(function(n){e(n)},function(e){a(e)})})},this.switchPhonebookJss=function(t){return e(function(e,a){n.post("/phonebook/ldaps/status/"+t).then(function(n){e(n)},function(e){a(e)})})},this.switchPhonebookJs=function(t){return e(function(e,a){n.post("/phonebook/ldap/status/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getPhonebookSettings=function(){return e(function(e,t){n.get("/phonebook/sources").then(function(n){e(n)},function(e){t(e)})})},this.switchRapidCode=function(t){return e(function(e,a){n.post("/phonebook/sources/speeddial/"+t).then(function(n){e(n)},function(e){a(e)})})},this.switchPbxExtensions=function(t){return e(function(e,a){n.post("/phonebook/sources/extensions/"+t).then(function(n){e(n)},function(e){a(e)})})},this.switchPublicContacts=function(t){return e(function(e,a){n.post("/phonebook/sources/nethcti/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getConferenceUrl=function(){return e(function(e,t){n.get("/settings/conferenceurl").then(function(n){e(n)},function(e){t(e)})})},this.setConferenceUrl=function(t){return e(function(e,a){n.post("/settings/conferenceurl",{url:t}).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("ConfigurationService",["$q","RestService",function(e,n){this.list=function(t){return e(function(e,a){n.get("/users/"+t).then(function(n){e(n)},function(e){a(e)})})},this.deletePhysicalExtension=function(t){return e(function(e,a){n.delete("/physicalextensions/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getVoiceMail=function(t){return e(function(e,a){n.get("/voicemails/"+t).then(function(n){e(n)},function(e){a(e)})})},this.createVoiceMail=function(t){return e(function(e,a){n.post("/voicemails",t).then(function(n){e(n)},function(e){a(e)})})},this.getMobileExtension=function(t){return e(function(e,a){n.get("/mobiles/"+t).then(function(n){e(n)},function(e){a(e)})})},this.createMobileExtension=function(t){return e(function(e,a){n.post("/mobiles",t).then(function(n){e(n)},function(e){a(e)})})},this.getWebRTCExtension=function(t){return e(function(e,a){n.get("/webrtc/"+t).then(function(n){e(n)},function(e){a(e)})})},this.createWebRTCExtension=function(t){return e(function(e,a){n.post("/webrtc",t).then(function(n){e(n)},function(e){a(e)})})},this.deleteWebRTCExtension=function(t){return e(function(e,a){n.delete("/webrtc/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getEncryption=function(t){return e(function(e,a){n.get("/extensions/"+t+"/srtp").then(function(n){e(n)},function(e){a(e)})})},this.setEncryption=function(t,a){return e(function(e,s){n.post("/extensions/"+t+"/srtp/"+a).then(function(n){e(n)},function(e){s(e)})})},this.retrieveFinalInfo=function(){return e(function(e,t){n.get("/final").then(function(n){e(n)},function(e){t(e)})})}}]),angular.module("nethvoiceWizardUiApp").filter("isEmpty",["UtilService",function(e){return function(n,t){return!n||e.isEmpty(n,t)}}]),angular.module("nethvoiceWizardUiApp").service("UtilService",["$interval","$q","RestService",function(e,n,t){this.isEmpty=function(e,n){if(n){var t=[];for(var a in e)t.push(0==Object.keys(e[a]).length);return t.every(Boolean)}return 0==Object.keys(e).length},this.randomPassword=function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},this.taskStatus=function(e){return n(function(n,a){t.get("/tasks/"+e).then(function(e){n(e)},function(e){a(e)})})},this.maskToCidr=function(e){if(void 0===e)return"";var n=e.match(/(\d+)/g),t=0;for(var a in n)t+=((n[a]>>>0).toString(2).match(/1/g)||[]).length;return t},this.hashNetwork=function(e){return CryptoJS.MD5(e.ip+"/"+this.maskToCidr(e.netmask))},this.extractTrunkInfo=function(e){var n=e.split("_");return{vendor:n[0]&&n[1]?n[0]:null,mac:n[1]&&n[1].replace(/(.{2})/g,"$1:").slice(0,-1)||null,tech:n[2]&&n[2].toUpperCase()||null,port:n[3]||null}},this.intersectTwoObj=function(e,n,t){return e.filter(function(e){return 0==n.filter(function(n){return n.trunkid==e.trunkid}).length})},this.capitalize=function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},this.findDuplicates=function(e){return Array.from(new Set((n=e).filter(function(e,t){return n.indexOf(e)!=t})));var n}}]),angular.module("nethvoiceWizardUiApp").filter("capitalize",function(){return function(e){return void 0===e?"":(null!=e&&(e=e.toLowerCase()),e.substring(0,1).toUpperCase()+e.substring(1))}}),angular.module("nethvoiceWizardUiApp").service("DashboardService",["$q","RestServiceCTI",function(e,n){this.getUsers=function(){return e(function(e,t){n.get("/user/endpoints/all").then(function(n){e(n)},function(e){t(e)})})},this.setPresenceOnline=function(t){return e(function(e,a){n.post("/user/presence",{username:t,status:"online"}).then(function(n){e(n)},function(e){a(e)})})},this.getExtensions=function(){return e(function(e,t){n.get("/astproxy/extensions").then(function(n){e(n)},function(e){t(e)})})},this.getTrunks=function(){return e(function(e,t){n.get("/astproxy/trunks").then(function(n){e(n)},function(e){t(e)})})},this.getExtension=function(t){return e(function(e,a){n.get("/astproxy/extension/"+t).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("DeviceService",["$q","RestService","UtilService",function(e,n,t){this.phoneList=function(){return e(function(e,t){n.get("/devices/phones/list").then(function(n){e(n)},function(e){t(e)})})},this.noLinkedDevices=function(){return e(function(e,t){n.get("/physicalextensions").then(function(n){e(n)},function(e){t(e)})})},this.phoneListByNetwork=function(a){return e(function(e,s){n.get("/devices/phones/list/"+t.hashNetwork(a)).then(function(n){e(n)},function(e){s(e)})})},this.gatewayList=function(){return e(function(e,t){n.get("/devices/gateways/list").then(function(n){e(n)},function(e){t(e)})})},this.gatewayListByNetwork=function(a){return e(function(e,s){n.get("/devices/gateways/list/"+t.hashNetwork(a)).then(function(n){e(n)},function(e){s(e)})})},this.phoneModelList=function(){return e(function(e,t){n.get("/devices/phones/manufacturers").then(function(n){e(n)},function(e){t(e)})})},this.gatewayModelList=function(){return e(function(e,t){n.get("/devices/gateways/manufacturers").then(function(n){e(n)},function(e){t(e)})})},this.startScan=function(a){return e(function(e,s){n.post("/devices/scan",{network:a.ip+"/"+t.maskToCidr(a.netmask)}).then(function(n){e(n)},function(e){s(e)})})},this.setPhoneModel=function(t){return e(function(e,a){n.post("/devices/phones/model",t).then(function(n){e(n)},function(e){a(e)})})},this.rebootPhone=function(t){return e(function(e,a){n.post("/devices/phones/reboot",t).then(function(n){e(n)},function(e){a(e)})})},this.generateDeviceConfig=function(t){return e(function(e,a){n.post("/devices/phones/provision",t).then(function(n){e(n)},function(e){a(e)})})},this.saveGatewayConfig=function(t){return e(function(e,a){n.post("/devices/gateways",t).then(function(n){e(n)},function(e){a(e)})})},this.pushGatewayConfig=function(t){return e(function(e,a){n.post("/devices/gateways/push",t).then(function(n){e(n)},function(e){a(e)})})},this.deleteGatewayConfig=function(t){return e(function(e,a){n.delete("/devices/gateways/"+t).then(function(n){e(n)},function(e){a(e)})})},this.downloadConfig=function(t,a){return e(function(e,s){n.get("/devices/gateways/download/"+t+(a?"/"+a:"")).then(function(n){e(n)},function(e){s(e)})})}}]),angular.module("nethvoiceWizardUiApp").filter("maskToCidr",["UtilService",function(e){return function(n){return e.maskToCidr(n)}}]),angular.module("nethvoiceWizardUiApp").filter("objCount",function(){return function(e){var n=0;for(var t in e)n+=Object.keys(e[t]).length;return n}}),angular.module("nethvoiceWizardUiApp").service("TrunkService",["$q","RestService",function(e,n){this.count=function(){return e(function(e,t){n.get("/trunks/count").then(function(n){e(n)},function(e){t(e)})})},this.getAllTrunks=function(){return e(function(e,t){n.get("/trunks").then(function(n){e(n)},function(e){t(e)})})},this.getSipByTech=function(t){return e(function(e,a){n.get("/trunks/"+t).then(function(n){e(n.data)},function(e){a(e)})})},this.getProviders=function(){return e(function(e,t){n.get("/providers").then(function(n){e(n.data)},function(e){t(e)})})},this.createTrunkVoip=function(t){return e(function(e,a){n.post("/trunks",{provider:t.provider,name:t.name,username:t.username,password:t.password,phone:t.phone,codecs:t.codecs,forceCodec:t.forceCodec}).then(function(n){e(n)},function(e){a(e)})})},this.changeTrunkPwd=function(t,a){return e(function(e,s){n.patch("/trunks/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteTrunk=function(t){return e(function(e,a){n.delete("/trunks/"+t).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").directive("genericError",function(){return{templateUrl:"scripts/directives/generic-error.html",controller:["$scope","$route","$location",function(e,n,t){e.reset=function(){e.error.show=!1}}]}}),angular.module("nethvoiceWizardUiApp").service("RouteService",["$q","RestService",function(e,n){this.countIn=function(){return e(function(e,t){n.get("/inboundroutes/count").then(function(n){e(n)},function(e){t(e)})})},this.countOut=function(){return e(function(e,t){n.get("/outboundroutes/count").then(function(n){e(n)},function(e){t(e)})})},this.getInbounds=function(){return e(function(e,t){n.get("/inboundroutes").then(function(n){e(n)},function(e){t(e)})})},this.getOutbounds=function(){return e(function(e,t){n.get("/outboundroutes").then(function(n){e(n)},function(e){t(e)})})},this.getDefaultOutbounds=function(){return e(function(e,t){n.get("/outboundroutes/defaults").then(function(n){e(n)},function(e){t(e)})})},this.deleteInboundRoute=function(t,a){return e(function(e,s){n.post("/inboundroutes/delete",{extension:t,cid:a}).then(function(n){e(n)},function(e){s(e)})})},this.createDefaultsOutbounds=function(t){return e(function(e,a){n.post("/outboundroutes",t).then(function(n){e(n)},function(e){a(e)})})},this.deleteOutboundTrunk=function(t,a){return e(function(e,s){n.delete("/outboundroutes/"+t+"/trunks/"+a).then(function(n){e(n)},function(e){s(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("CodecService",["$q","RestService",function(e,n){this.getVoipCodecs=function(){return e(function(e,t){n.get("/codecs/voip").then(function(n){e(n.data)},function(e){t(e)})})}}]),angular.module("nethvoiceWizardUiApp").filter("ellipsis",function(){return function(e,n){return window.screen.width<n&&window.screen.width>=768?e.substring(0,3)+"...":e}}),angular.module("nethvoiceWizardUiApp").controller("FinalCtrl",["$scope","$filter","UserService",function(e,n,t){e.wizard.isWizard=!1,e.customConfig=customConfig,e.generatePDF=function(){var a=[{title:n("translate")("Extension"),dataKey:"default_extension"},{title:n("translate")("Fullname"),dataKey:"displayname"},{title:n("translate")("Username"),dataKey:"username"},{title:n("translate")("Voicemail Password"),dataKey:"voicemailpwd"}];e.mode.isLdap&&a.push({title:"Password",dataKey:"password"});var s=[];t.retrieveFinalInfo().then(function(e){s=e.data;var t=new jsPDF("l","pt");t.autoTable(a,s,{theme:"grid",margin:{top:100},styles:{fontSize:12,cellPadding:15},headerStyles:{fillColor:[63,156,53]},addPageContent:function(e){t.text(n("translate")("Final wizard report"),40,30),t.setFontSize(11),t.setTextColor(100),t.text(n("translate")("Header Report 1"),40,60),t.text(n("translate")("Header Report 2"),40,80),t.setFontSize(11),t.text(customConfig.BRAND_NAME,e.settings.margin.left,t.internal.pageSize.height-20)}}),t.save("wizard_report.pdf")},function(e){console.log(e)})}}]),angular.module("nethvoiceWizardUiApp").controller("UsersProfilesCtrl",["$scope","UserService","ProfileService","$timeout",function(e,n,t,a){e.allProfiles=[],e.allPermissions=[],e.allGroups=[],e.onSaveSuccess=!1,e.onSaveError=!1,e.gruopsDisabled=!1,e.permissionsStatus={},e.outboundStatus={},e.initGraphics=function(){},e.isGroupPermission=function(e){return-1!==e.indexOf("grp_")},e.splitGroupName=function(e){return e.split(": ")},e.toPermissionName=function(e){return"grp_"+e},e.getAllProfiles=function(n){e.view.changeRoute=n,t.allProfiles().then(function(n){e.allProfiles=n.data,e.getAllGroups(),e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.createNewProfile=function(n,a){n.onSave=!0,n.duplicateProfile?t.getProfile(n.duplicateProfile.id).then(function(a){var s={name:n.name,macro_permissions:a.data.macro_permissions,outbound_routes_permissions:a.data.outbound_routes_permissions};t.create(s).then(function(t){n.onSave=!1,s.id=t.id,e.getAllProfiles(!1),e.onSaveSuccess=!0,e.onSaveError=!1,e.allProfiles.push(s),e.newProfile={},$("#newProfileModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccess=!1,e.onSaveError=!0,console.log(t)})},function(e){console.log(e)}):t.allPermissions().then(function(a){var s={name:n.name,macro_permissions:a.data,outbound_routes_permissions:a.data.outbound_routes_permissions};t.create(s).then(function(t){n.onSave=!1,s.id=t.id,e.getAllProfiles(!1),e.onSaveSuccess=!0,e.onSaveError=!1,e.allProfiles.push(s),e.newProfile={},$("#newProfileModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccess=!1,e.onSaveError=!0,console.log(t)})},function(e){console.log(e)})},e.saveProfile=function(n,s,i,o){if("operator_panel"==o)for(var l in s.permissions)i.id!=s.permissions[l].id&&(s.permissions[l].value=!1);n.onSave=!0,n.id?(i&&(e.permissionsStatus[i.id]="loading",e.outboundStatus[i.route_id]="loading"),t.update(n.id,n).then(function(t){e.checkAllGroups(),n.onSave=!1,e.onSaveSuccess=!0,e.onSaveError=!1,i&&(e.permissionsStatus[i.id]="success",e.outboundStatus[i.route_id]="success",a(function(){delete e.permissionsStatus[i.id],delete e.outboundStatus[i.route_id]},5e3))},function(t){i&&(i.value=!i.value),n.onSave=!1,e.onSaveSuccess=!1,e.onSaveError=!0,i&&(e.permissionsStatus[i.id]="error",e.outboundStatus[i.route_id]="error",e.$$phase||e.$apply())})):t.create(n).then(function(t){n.onSave=!1,n.id=t.id,e.getAllProfiles(!1),e.onSaveSuccess=!0,e.onSaveError=!1},function(t){n.onSave=!1,e.onSaveSuccess=!1,e.onSaveError=!0,console.log(t)})},e.deleteProfile=function(n){n.onSave=!0,t.delete(n.id).then(function(t){n.onSave=!1,e.getAllProfiles(!1)},function(e){n.onSave=!1,console.log(e)})},e.checkDisabledGruops=function(n){for(var t in e.allProfiles)for(var a in e.allProfiles[t].macro_permissions.presence_panel.permissions){var s=e.allProfiles[t].macro_permissions.presence_panel.permissions[a];if(s.name==e.toPermissionName(n.toLowerCase())&&1==s.value)return!0}},e.checkAllGroups=function(){for(var n in e.gruopsDisabled=!1,e.allGroups)1!=e.checkDisabledGruops(e.allGroups[n].name)&&(e.gruopsDisabled=!0)},e.getAllGroups=function(){t.allGroups().then(function(n){e.allGroups=n.data,e.checkAllGroups()},function(e){console.log(e)})},e.getAllProfiles(!0)}]),angular.module("nethvoiceWizardUiApp").service("ProfileService",["$q","RestService",function(e,n){this.allProfiles=function(){return e(function(e,t){n.get("/cti/profiles").then(function(n){e(n)},function(e){t(e)})})},this.allGroups=function(){return e(function(e,t){n.get("/cti/groups").then(function(n){e(n)},function(e){t(e)})})},this.allUserGroups=function(t){return e(function(e,a){n.get("/cti/users/groups/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getProfile=function(t){return e(function(e,a){n.get("/cti/profiles/"+t).then(function(n){e(n)},function(e){a(e)})})},this.allPermissions=function(){return e(function(e,t){n.get("/cti/permissions").then(function(n){e(n)},function(e){t(e)})})},this.getUserProfile=function(t){return e(function(e,a){n.get("/cti/profiles/users/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getUserGroup=function(t){return e(function(e,a){n.get("/cti/groups/users/"+t).then(function(n){e(n)},function(e){a(e)})})},this.setUserProfile=function(t,a){return e(function(e,s){n.post("/cti/profiles/users/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.setUserGroup=function(t,a){return e(function(e,s){n.post("/cti/groups/users/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.create=function(t){return e(function(e,a){n.post("/cti/profiles",t).then(function(n){e(n)},function(e){a(e)})})},this.createGroup=function(t){return e(function(e,a){n.post("/cti/groups",t).then(function(n){e(n)},function(e){a(e)})})},this.update=function(t,a){return e(function(e,s){n.post("/cti/profiles/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.delete=function(t){return e(function(e,a){n.delete("/cti/profiles/"+t).then(function(n){e(n)},function(e){a(e)})})},this.deleteGroup=function(t){return e(function(e,a){n.delete("/cti/groups/"+t).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").filter("profileList",function(){return function(e){var n=[];return angular.forEach(e,function(e){e.id&&n.push(e)}),n}}),angular.module("nethvoiceWizardUiApp").controller("AdminCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("nethvoiceWizardUiApp").controller("AdminSettingsCtrl",["$scope","UserService","RestService","RestServiceCTI","ConfigService","ModelService",function(e,n,t,a,s,i){e.wizard.isEnd=!1,e.view.changeRoute=!0,e.externalIp="",e.localNetworks=[],e.localNrFields=1,e.conferenceUrl="",e.conferenceUrlSuccess=!1,e.conferenceUrlError=!1,e.create=function(){e.admin.password===e.admin.confirmPassword?n.setPassword("admin",{password:e.admin.password}).then(function(n){var s=t.getHash("admin",e.admin.password);t.setAuthHeader("admin",s),a.setAuthHeader("admin",s),e.onSaveSuccess=!0,e.onSaveError=!1,e.wizard.isWizard&&e.natSaved?(e.wizard.isEnd=!0,e.passwordSaved=!0):e.wizard.isWizard&&(e.passwordSaved=!0)},function(n){e.onSaveSuccess=!1,e.onSaveError=!0}):(e.onSaveSuccess=!1,e.onSaveError=!0)};var o=function(){s.getSuggestedIp().then(function(n){e.externalIp=n.data,e.view.changeRoute=!1,e.$apply()},function(n){console.log(n),e.view.changeRoute=!1,e.$apply()})};e.openSaveNat=function(){$("#saveNat").modal("show")},e.saveNat=function(){for(let n in e.localNetworks)e.localNetworks[n]!={}&&e.localNetworks[n].net||(e.localNrFields=e.localNrFields-1,e.localNetworks.splice(n,1));e.loadingNatAction=!0;let n=s.setExternalIp(e.externalIp),t=s.setLocalNetworks(e.localNetworks);Promise.all([n,t]).then(function(n){e.loadingNatAction="ok",e.onSettingsSaveSuccess=!0,e.wizard.isWizard&&e.passwordSaved?(e.wizard.isEnd=!0,e.natSaved=!0):e.wizard.isWizard&&(e.natSaved=!0),setTimeout(function(){$("#saveNat").modal("hide")},700),e.$apply()},function(n){console.log(n),e.loadingNatAction="err",setTimeout(function(){$("#saveNat").modal("hide")},700),e.onSettingsSaveError=!0})};e.toggleRapidCode=function(){let n=e.rapidCodePbx?"enabled":"disabled";s.switchRapidCode(n).then(function(e){},function(n){e.rapidCodePbx=!e.rapidCodePbx,console.log(n)})},e.togglePbxExtensions=function(){let n=e.pbxExtensions?"enabled":"disabled";s.switchPbxExtensions(n).then(function(e){},function(n){e.pbxExtensions=!e.pbxExtensions,console.log(n)})},e.togglePublicContacts=function(){let n=e.publicContactsPbx?"enabled":"disabled";s.switchPublicContacts(n).then(function(e){},function(n){e.publicContactsPbx=!e.publicContactsPbx,console.log(n)})},e.togglePhonebookjs=function(){let n=e.phonebookjsStatus?"enabled":"disabled";s.switchPhonebookJs(n).then(function(e){},function(e){console.log(e)})},e.togglePhonebookjss=function(){let n=e.phonebookjssStatus?"enabled":"disabled";s.switchPhonebookJss(n).then(function(e){},function(e){console.log(e)})},e.deleteField=function(){e.localNrFields=e.localNrFields-1,e.localNetworks.pop()},e.addField=function(){e.localNrFields=e.localNrFields+1,e.localNetworks.push({})},e.toggleSipTls=function(){let n=!1===e.sipTlsStatus?"disabled":"enabled";s.setExternalSip(n).then(function(e){},function(e){console.log(e)})};e.saveConferenceUrl=function(){s.setConferenceUrl(e.conferenceUrl).then(function(){e.conferenceUrlSuccess=!0,e.conferenceUrlError=!1,e.$$phase||e.$apply()},function(n){e.conferenceUrlError=!0,e.conferenceUrlSuccess=!1,e.$$phase||e.$apply(),console.log(n)})};var l=function(){s.getExternalIp().then(function(n){n.data?(e.externalIp=n.data,setTimeout(function(){e.view.changeRoute=!1,e.$apply()},1e3)):"tancredi"!=e.wizard.provisioning?o():i.getDefaults().then(function(n){i.checkConnectivity({host:n.data.hostname,scheme:n.data.provisioning_url_scheme}).then(function(t){t.data.valid_certificate?(e.externalIp=n.data.hostname,e.view.changeRoute=!1,e.$apply()):o(),setTimeout(function(){e.$apply()},100)},function(e){console.log(e)})},function(e){console.log(e)})},function(e){console.log(e)}),s.getLocalNetworks().then(function(n){n.data&&(e.localNetworks=n.data),n.data&&parseInt(n.data.length)>1&&(e.localNrFields=n.data.length)},function(e){console.log(e)}),s.getExternalSip().then(function(n){e.sipTlsStatus="disabled"!=n.data},function(e){console.log(e)}),i.ldapCheck().then(function(n){e.phonebookjsStatus=n.data.ldap.enabled,e.phonebookjssStatus=n.data.ldaps.enabled},function(e){console.log(e)}),s.getPhonebookSettings().then(function(n){e.rapidCodePbx=n.data.speeddial,e.pbxExtensions=n.data.extensions,e.publicContactsPbx=n.data.nethcti},function(e){console.log(e)}),s.getConferenceUrl().then(function(n){e.conferenceUrl=n.data},function(e){console.log(e)}),$("#saveNat").on("hidden.bs.modal",function(){e.loadingNatAction=""})};angular.element(document).ready(function(){l()})}]),angular.module("nethvoiceWizardUiApp").controller("AdminReportCtrl",["$scope","$rootScope","$filter","UserService",function(e,n,t,a){e.customConfig=customConfig,e.users=[],e.view.changeRoute=!0,e.usersLimit=20,e.retrieveInfo=function(){a.retrieveFinalInfo().then(function(n){e.users=n.data,e.view.changeRoute=!1},function(e){console.log(e)})},n.$on("scrollingContainerView",function(){e.users&&e.users.length>e.usersLimit&&(e.usersLimit+=e.SCROLLPLUS)}),e.generatePDF=function(){var n=[{title:t("translate")("Extension"),dataKey:"default_extension"},{title:t("translate")("Fullname"),dataKey:"displayname"},{title:t("translate")("Username"),dataKey:"username"},{title:t("translate")("Voicemail Password"),dataKey:"voicemailpwd"}];e.mode.isLdap&&n.push({title:"Password",dataKey:"password"});var s=[];a.retrieveFinalInfo().then(function(e){s=e.data;var a=new jsPDF("l","pt");a.autoTable(n,s,{theme:"grid",margin:{top:100},styles:{fontSize:12,cellPadding:15},headerStyles:{fillColor:[63,156,53]},addPageContent:function(e){a.text(t("translate")("Final wizard report"),40,30),a.setFontSize(11),a.setTextColor(100),a.text(t("translate")("Header Report 1"),40,60),a.text(t("translate")("Header Report 2"),40,80),a.setFontSize(11),a.text(customConfig.BRAND_NAME,e.settings.margin.left,a.internal.pageSize.height-20)}}),a.save("wizard_report.pdf")},function(e){console.log(e)})},e.retrieveInfo()}]),angular.module("nethvoiceWizardUiApp").controller("UsersGroupsCtrl",["$scope","ProfileService",function(e,n){e.allGroups=[],e.getAllGroups=function(t){e.view.changeRoute=t,n.allGroups().then(function(n){e.allGroups=n.data,e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.saveGroup=function(t){t.onSave=!0,n.createGroup(t).then(function(n){t.onSave=!1,t.id=n.data.id,e.getAllGroups(!1),e.onSaveSuccess=!0,e.onSaveError=!1,e.allGroups.push(t),e.newGroup={},$("#newGroupModal").modal("hide")},function(n){t.onSave=!1,e.onSaveSuccess=!1,e.onSaveError=!0,$("#newGroupModal").modal("hide"),console.log(n)})},e.deleteGroup=function(t){t.onSave=!0,n.deleteGroup(t.id).then(function(n){t.onSave=!1,e.getAllGroups(!1)},function(e){t.onSave=!1,console.log(e)})},e.getAllGroups(!0)}]),angular.module("nethvoiceWizardUiApp").controller("AppsCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("nethvoiceWizardUiApp").controller("AppsCardsCtrl",["$scope","ProfileService","ApplicationService",function(e,n,t){e.allProfiles=[],e.allSources=[],e.allTemplates=[],e.allCards=[],e.allDBTypes=[],e.supportedColors={red:"#db2828",orange:"#f2711c",yellow:"#fbbd08",olive:"#b5cc18",green:"#21ba45",teal:"#00b5ad",blue:"#2185d0",violet:"#6435c9",purple:"#a333c8",pink:"#e03997",brown:"#a5673f"},e.sourcePortMap={"mssql:7_1":"1433","mssql:7_2":"1433","mssql:7_3_A":"1433","mssql:7_3_B":"1433","mssql:7_4":"1433",mysql:"3306",postgres:"5432"},e.newSource={verified:!1,isChecking:!1,checked:!1,showPass:!1},e.newTemplate={html:"",custom:!0},e.newCard={query:""},e.updatePort=function(){e.newSource.port=e.sourcePortMap[e.newSource.type]},e.isCustomerCardsWizard=function(n){var t=!0;return 1==n&&(t=0==e.allSources.length&&0==e.allTemplates.length&&0==e.allCards.length),2==n&&(t=0==e.allTemplates.length&&0==e.allCards.length),3==n&&(t=0==e.allCards.length),t},e.togglePass=function(e){e.showPass=!e.showPass},e.setColor=function(e,n){e.onSaveColor=!0;var t=e.color;e.color=n,RegExp.quote=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};var a=t,s=new RegExp(RegExp.quote(a),"g");e.html=e.html.replace(s,n).replace("\x3c!-- color: "+t+" --\x3e\n","\x3c!-- color: "+n+" --\x3e\n")},e.editorOnChange=function(e){setTimeout(function(){e[1].resize()},200)},e.getDBName=function(n){return e.allDBTypes[n]},e.getSourceName=function(n){var t=e.allSources.filter(function(e){return e.id==n})[0];return t&&t.name},e.getAllDBTypes=function(){t.allDBTypes().then(function(n){e.allDBTypes=n.data},function(e){console.log(e)})},e.getAllSources=function(n){e.view.changeRoute=n,t.allSources().then(function(n){for(var t in e.allSources=n.data,e.view.changeRoute=!1,e.allSources)e.checkConnection(e.allSources[t])},function(n){console.log(n),e.view.changeRoute=!1})},e.getAllTemplates=function(n){e.view.changeRoute=n,t.allTemplates().then(function(n){for(var t in e.allTemplates=n.data,e.allTemplates)e.allTemplates[t].html=atob(e.allTemplates[t].html);e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.getAllCards=function(n){e.view.changeRoute=n,t.allCards().then(function(n){for(var t in e.allCards=n.data,e.allCards)e.allCards[t].query=atob(e.allCards[t].query),e.allCards[t].template=e.allCards[t].template.custom?e.allCards[t].template.name+"_custom":e.allCards[t].template.name;e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.getAllProfiles=function(){n.allProfiles().then(function(n){e.allProfiles=n.data},function(e){console.log(e)})},e.checkConnection=function(e){e.isChecking=!0,t.checkConnectionSource(e).then(function(n){e.checked=!0,e.isChecking=!1,e.verified=!0},function(n){e.checked=!0,e.isChecking=!1,e.verified=!1,console.log(n)})},e.saveSource=function(n){n.onSave=!0,delete n.checked,delete n.isChecking,delete n.onSave,delete n.onMod,delete n.verified,delete n.showPass,n.id?t.updateSource(n.id,n).then(function(t){n.onSave=!1,e.getAllSources(!1),e.onSaveSuccessSource=!0,e.onSaveErrorSource=!1,e.allSources.push(n),e.newSource={verified:!1,isChecking:!1,checked:!1},$("#newSourceModal").modal("hide"),e.isCustomerCardsWizard(2)&&setTimeout(function(){$("#newTemplateModal").modal("show")},500)},function(t){n.onSave=!1,e.onSaveSuccessSource=!1,e.onSaveErrorSource=!0,$("#newSourceModal").modal("hide"),console.log(t)}):t.createSource(n).then(function(t){n.onSave=!1,e.getAllSources(!1),e.onSaveSuccessSource=!0,e.onSaveErrorSource=!1,e.allSources.push(n),e.newSource={verified:!1,isChecking:!1,checked:!1},$("#newSourceModal").modal("hide"),e.isCustomerCardsWizard(3)&&setTimeout(function(){$("#newCardModal").modal("show")},500)},function(t){n.onSave=!1,e.onSaveSuccessSource=!1,e.onSaveErrorSource=!0,$("#newSourceModal").modal("hide"),console.log(t)})},e.modifySource=function(n){n.onMod=!0,e.newSource=n},e.checkSourceDeps=function(n){$("#cardSourceDepsModal").modal("show"),e.cardDeps=n,e.cardDeps.loading=!0,t.sourceDeps(n.id).then(function(n){e.cardDeps.dependencies=n.data,e.cardDeps.loading=!1},function(n){e.cardDeps.loading=!1,console.log(n)})},e.deleteSource=function(n){n.onSave=!0,t.deleteSource(n.id).then(function(t){n.onSave=!1,e.getAllSources(!1),$("#cardSourceDepsModal").modal("hide")},function(e){n.onSave=!1,console.log(e)})},e.cancelSource=function(n){e.newSource={verified:!1,isChecking:!1,checked:!1},e.newSource.onMod=!1},e.saveTemplate=function(n){n.onSave=!0,n.html=btoa(n.html),delete n.objects,delete n.onSave,delete n.onMod,delete n.onSaveColor,delete n.color,n.onMod&&n.name==n.old_name?t.updateTemplate(n.old_name,n).then(function(t){n.onSave=!1,e.getAllTemplates(!1),e.onSaveSuccessTemplate=!0,e.onSaveErrorTemplate=!1,e.allTemplates.push(n),e.newTemplate={html:"",custom:!0},$("#newTemplateModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccessTemplate=!1,e.onSaveErrorTemplate=!0,$("#newTemplateModal").modal("hide"),console.log(t)}):t.createTemplate(n).then(function(t){n.onSave=!1,e.getAllTemplates(!1),e.onSaveSuccessTemplate=!0,e.onSaveErrorTemplate=!1,e.allTemplates.push(n),e.newTemplate={html:"",custom:!0},$("#newTemplateModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccessTemplate=!1,e.onSaveErrorTemplate=!0,$("#newTemplateModal").modal("hide"),console.log(t)})},e.switchResultsData=function(e){var n="";switch(e){case"table":n=JSON.stringify([{Col_1:"Val_1",Col_2:"Val_2"},{Col_1:"Val_3",Col_2:"Val_4"}]);break;case"identity":n=JSON.stringify([{name:"John Doe",type:"public",extension:"200",homephone:"555894512",workphone:"78960012",cellphone:"340784512",url:"http://google.com",company:"Google Inc."}]);break;case"statistics":n=JSON.stringify([{key:"value"}]);break;case"lastcalls":n=JSON.stringify([{date:"18/04/2017",time:"09:50:25",billsec:"15:23:56",clid:"John Doe",dst:"Marilyn Monroe"}])}return n},e.modifyTemplate=function(n){n.onMod=!0,n.old_name=n.name,n.objects=n.custom?'[{"name": "John", "lastname": "Doe"}]':e.switchResultsData(n.name),e.newTemplate=n},e.checkTemplateDeps=function(n){$("#cardTemplateDepsModal").modal("show"),e.cardDeps=n,e.cardDeps.loading=!0,t.templateDeps(n.name).then(function(n){e.cardDeps.dependencies=n.data,e.cardDeps.loading=!1},function(n){e.cardDeps.loading=!1,console.log(n)})},e.deleteTemplate=function(n){n.onSave=!0,t.deleteTemplate(n.name).then(function(t){n.onSave=!1,e.getAllTemplates(!1),$("#cardTemplateDepsModal").modal("hide")},function(e){n.onSave=!1,console.log(e)})},e.cancelTemplate=function(n){e.newTemplate={html:"<% for(var i=0; i<results.length; i++){ %><%= results[i].name %> <strong><%= results[i].lastname %></strong><% } %>",custom:!0,objects:JSON.stringify([{name:"John",lastname:"Doe"}])},e.newTemplate.onMod=!1},e.saveCard=function(n){n.onSave=!0,n.query=btoa(n.query),delete n.onSave,delete n.onMod,delete n.render_html,delete n.isChecking,delete n.permission_id,n.id?t.updateCard(n.id,n).then(function(t){n.onSave=!1,e.getAllCards(!1),e.onSaveSuccessCard=!0,e.onSaveErrorCard=!1,e.allCards.push(n),e.newCard={query:""},$("#newCardModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccessCard=!1,e.onSaveErrorCard=!0,$("#newCardModal").modal("hide"),console.log(t)}):t.createCard(n).then(function(t){n.onSave=!1,e.getAllCards(!1),e.onSaveSuccessCard=!0,e.onSaveErrorCard=!1,e.allCards.push(n),e.newCard={query:""},$("#newCardModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccessCard=!1,e.onSaveErrorCard=!0,$("#newCardModal").modal("hide"),console.log(t)})},e.modifyCard=function(n){n.onMod=!0,n.render_html="",e.newCard=n,e.updatePreview(n)},e.deleteCard=function(n){n.onSave=!0,t.deleteCard(n.id).then(function(t){n.onSave=!1,e.getAllCards(!1)},function(e){n.onSave=!1,console.log(e)})},e.cancelCard=function(n){e.newCard={query:"",render_html:""},e.newCard.onMod=!1},e.setPreview=function(n){var t="";for(var a in e.allTemplates)n.template==e.allTemplates[a].name&&(t=e.allTemplates[a].html);n.html=t,n.render_html="",e.ccard=n},e.updatePreview=function(e){e.isChecking=!0,t.customerCardPreview({dbconn_id:e.dbconn_id,template:e.template,query:btoa(e.query)}).then(function(n){e.render_html='<style>body{overflow: auto !important; padding: 5px !important;}</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"/>'+atob(n.data.html),e.isChecking=!1},function(n){e.isChecking=!1,e.render_html="",console.log(n)})},e.setTemplatePreview=function(e){e.objects='[{"name": "John", "lastname": "Doe"}]'},e.setDuplicate=function(n){e.duplicated=n,e.duplicated.old_name=n.name},e.duplicateTemplate=function(n){n.name=n.name,n.custom=!0,e.saveTemplate(n),$("#duplicateTemplateModal").modal("hide")},e.$on("$routeChangeSuccess",function(n,t,a){"views/apps/cards.html"===t.templateUrl&&(e.getAllDBTypes(),e.getAllProfiles(),e.getAllSources(!0),e.getAllTemplates(!0),e.getAllCards(!0))}),e.$on("loginCompleted",function(n,t){e.getAllDBTypes(),e.getAllProfiles(),e.getAllSources(!0),e.getAllTemplates(!0),e.getAllCards(!0)})}]),angular.module("nethvoiceWizardUiApp").service("ApplicationService",["$q","$http","RestService","RestServiceCTI",function(e,n,t,a){this.allExtensions=function(){return e(function(e,n){t.get("/physicalextensions").then(function(n){e(n)},function(e){n(e)})})},this.allSources=function(){return e(function(e,n){t.get("/cti/dbconn").then(function(n){e(n)},function(e){n(e)})})},this.allVideoSources=function(){return e(function(e,n){t.get("/cti/streaming").then(function(n){e(n)},function(e){n(e)})})},this.getParamUrls=function(){return e(function(e,n){t.get("/cti/paramurls").then(function(n){e(n)},function(e){n(e)})})},this.allTemplates=function(){return e(function(e,n){t.get("/cti/customer_card/template").then(function(n){e(n)},function(e){n(e)})})},this.allCards=function(){return e(function(e,n){t.get("/cti/customer_card").then(function(n){e(n)},function(e){n(e)})})},this.allDBTypes=function(){return e(function(e,n){t.get("/cti/dbconn/type").then(function(n){e(n)},function(e){n(e)})})},this.sourceDeps=function(n){return e(function(e,a){t.get("/cti/customer_card?dbconn_id="+n).then(function(n){e(n)},function(e){a(e)})})},this.templateDeps=function(n){return e(function(e,a){t.get("/cti/customer_card?template="+n).then(function(n){e(n)},function(e){a(e)})})},this.checkConnectionSource=function(n){return e(function(e,t){a.post("/dbconn/test",n).then(function(n){e(n)},function(e){t(e)})})},this.checkConnectionVideoSource=function(n){return e(function(e,a){t.post("/cti/sources/test",n).then(function(n){e(n)},function(e){a(e)})})},this.customerCardPreview=function(n){return e(function(e,t){a.post("/custcard/preview",n).then(function(n){e(n)},function(e){t(e)})})},this.createSource=function(n){return e(function(e,a){t.post("/cti/dbconn",n).then(function(n){e(n)},function(e){a(e)})})},this.createVideoSource=function(n){return e(function(e,a){t.post("/cti/streaming",n).then(function(n){e(n)},function(e){a(e)})})},this.createParamUrl=function(n){return e(function(e,a){t.post("/cti/paramurl",n).then(function(n){e(n)},function(e){a(e)})})},this.updateParamUrl=function(n){return e(function(e,a){t.put("/cti/paramurl/"+n.id,n).then(function(n){e(n)},function(e){a(e)})})},this.deleteParamUrl=function(n){return e(function(e,a){t.post("/cti/paramurl/delete",n).then(function(n){e(n)},function(e){a(e)})})},this.updateVideoSource=function(n,a){return e(function(e,s){t.put("/cti/streaming/"+n,a).then(function(n){e(n)},function(e){s(e)})})},this.updateSource=function(n,a){return e(function(e,s){t.put("/cti/dbconn/"+n,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteSource=function(n){return e(function(e,a){t.delete("/cti/dbconn/"+n).then(function(n){e(n)},function(e){a(e)})})},this.deleteVideoSource=function(n){return e(function(e,a){t.delete("/cti/streaming/"+n).then(function(n){e(n)},function(e){a(e)})})},this.createTemplate=function(n){return e(function(e,a){t.post("/cti/customer_card/template",n).then(function(n){e(n)},function(e){a(e)})})},this.updateTemplate=function(n,a){return e(function(e,s){t.put("/cti/customer_card/template/"+n,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteTemplate=function(n){return e(function(e,a){t.delete("/cti/customer_card/template/"+n).then(function(n){e(n)},function(e){a(e)})})},this.createCard=function(n){return e(function(e,a){t.post("/cti/customer_card",n).then(function(n){e(n)},function(e){a(e)})})},this.updateCard=function(n,a){return e(function(e,s){t.put("/cti/customer_card/"+n,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteCard=function(n){return e(function(e,a){t.delete("/cti/customer_card/"+n).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("RestServiceCTI",["$q","$http","LocalStorageService",function(e,n,t){this.setAuthHeader=function(e,a){n.defaults.headers.common.User=e,n.defaults.headers.common.Secretkey=a,t.set("secretkey",{user:e,hash:a.toString()})},this.get=function(t){return e(function(e,a){n.get(customConfig.BASE_API_URL_CTI+t).then(function(n){e(n)},function(e){a(e)})})},this.post=function(t,a){return e(function(e,s){n.post(customConfig.BASE_API_URL_CTI+t,a).then(function(n){e(n)},function(e){s(e)})})},this.put=function(t,a){return e(function(e,s){n.put(customConfig.BASE_API_URL_CTI+t,a).then(function(n){e(n)},function(e){s(e)})})},this.delete=function(t){return e(function(e,a){n.delete(customConfig.BASE_API_URL_CTI+t).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").filter("trustUrl",["$sce",function(e){return function(n){return e.trustAsResourceUrl(n)}}]),angular.module("nethvoiceWizardUiApp").filter("regexpParse",function(){return function(e){return e&&e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()}}),angular.module("nethvoiceWizardUiApp").filter("toBase64",function(){return function(e){return btoa(e)}}),angular.module("nethvoiceWizardUiApp").filter("ejsRender",function(){return function(e,n,t){return'<style>body{overflow-x: auto !important; padding: 5px !important;}</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"/>'+ejs.render(e,{results:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(n)?JSON.parse(n):[{}],name:t})}}),angular.module("nethvoiceWizardUiApp").filter("customFilterMultiple",function(){return function(e,n,t){if(!e)return e;if(!t)return e;let a=(""+t).toLowerCase(),s={},i=n.split(",");for(let n in i)angular.forEach(e,function(e,t){-1!==(""+e[i[n]]).toLowerCase().indexOf(a)&&(s[t]=e),"dashboardUsersSearch"===i[n]&&angular.forEach(e.endpoints.extension,function(n,i){-1!==n.id.indexOf(a)&&(s[t]=e)}),"configurationsUsersSearch"===i[n]&&angular.forEach(e.devices,function(n,i){(n.mac&&-1!==n.mac.toLowerCase().indexOf(a)||n.extension&&-1!==n.extension.toLowerCase().indexOf(a))&&(s[t]=e)})});return s}}),angular.module("nethvoiceWizardUiApp").filter("withExtension",function(){return function(e){if(!e)return e;var n=[];return angular.forEach(e,function(e,t){"none"!=e.default_extension&&""!=e.default_extension&&n.push(e)}),n}}),angular.module("nethvoiceWizardUiApp").filter("blacklistFilterNoKey",function(){return function(e,n){if(n)for(let t in e)n.includes(e[t].value)&&e.splice(t,1);return e}}),angular.module("nethvoiceWizardUiApp").filter("blacklistFilterNoKeyDsp",function(){return function(e,n){if(n)for(let t in e)n.includes(e[t].toString())&&e.pop();return e}}),angular.module("nethvoiceWizardUiApp").controller("AppsStreamingCtrl",["$scope","ProfileService","ApplicationService","UserService",function(e,n,t,a){e.allSources=[],e.allProfiles=[],e.newSource={verified:!1,isChecking:!1,checked:!1,showPass:!1},e.currentSource={},e.users=[],e.selectSource=function(n){e.currentSource=n},e.saveSource=function(n){n.onSave=!0,delete n.checked,delete n.isChecking,delete n.onSave,delete n.verified,n.onMod?t.updateVideoSource(n.descr,n).then(function(t){n.onSave=!1,e.onSaveSuccessSource=!0,e.onSaveErrorSource=!1,e.getSourceList(),e.newSource={verified:!1,isChecking:!1,checked:!1},e.checkConnection(n),$("#newSourceModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccessSource=!1,e.onSaveErrorSource=!0,$("#newSourceModal").modal("hide"),console.log(t)}):t.createVideoSource(n).then(function(t){n.onSave=!1,e.onSaveSuccessSource=!0,e.onSaveErrorSource=!1,e.getSourceList(),e.newSource={verified:!1,isChecking:!1,checked:!1},e.checkConnection(n),$("#newSourceModal").modal("hide")},function(t){n.onSave=!1,e.onSaveSuccessSource=!1,e.onSaveErrorSource=!0,$("#newSourceModal").modal("hide"),console.log(t)})},e.deleteSource=function(n){n.onSave=!0,t.deleteVideoSource(n.descr).then(function(t){n.onSave=!1,e.getSourceList(),$("#deleteModal").modal("hide")},function(e){n.onSave=!1,console.log(e)})},e.cancelSource=function(n){e.newSource={verified:!1,isChecking:!1,checked:!1},e.newSource.onMod=!1},e.modifySource=function(n){n.onMod=!0,e.newSource=n,e.newSource.currentDescr=n.descr},e.checkConnection=function(e){e.isChecking=!0,t.checkConnectionVideoSource({url:e.url}).then(function(n){e.checked=!0,e.isChecking=!1,e.verified=!0,e.preview="data:image/png;base64,"+n.data},function(n){e.checked=!0,e.isChecking=!1,e.verified=!1,console.log(n)})},e.getSourceList=function(){t.allVideoSources().then(function(n){for(var t in e.allSources=n.data,e.view.changeRoute=!1,e.allSources)e.checkConnection(e.allSources[t])},function(n){e.view.changeRoute=!1,console.log(n)})},e.getUserList=function(){e.view.changeRoute=!0,t.allExtensions().then(function(n){e.users=n.data,e.getSourceList()},function(n){e.users=[],e.view.changeRoute=!1,console.log(n)})},e.getAllProfiles=function(){n.allProfiles().then(function(n){e.allProfiles=n.data},function(e){console.log(e)})},e.$on("$routeChangeSuccess",function(n,t,a){"views/apps/streaming.html"===t.templateUrl&&(e.getUserList(),e.getAllProfiles())}),e.$on("loginCompleted",function(n,t){e.getUserList(),e.getAllProfiles()})}]),angular.module("nethvoiceWizardUiApp").controller("AppsParamurlCtrl",["$rootScope","$scope","ProfileService","ApplicationService","UserService",function(e,n,t,a,s){n.allUrls=[],n.newUrl={url:"",profiles:[],only_queues:!1},n.currentUrl={},n.users=[],n.tdata={allProfiles:[],busyProfiles:[],dataLoaded:!1},n.selectUrl=function(e){n.currentUrl=e},n.saveParamurl=function(e){e.onSave=!0,delete e.onSave,e.onMod?a.updateParamUrl(e).then(function(t){e.onSave=!1,n.onSaveSuccessSource=!0,n.onSaveErrorSource=!1,$("#newParamurlModal").modal("hide"),n.cancelParamurl(),n.getParamUrls()},function(t){e.onSave=!1,n.onSaveSuccessSource=!1,n.onSaveErrorSource=!0,$("#newParamurlModal").modal("hide"),console.log(t)}):a.createParamUrl(e).then(function(t){e.onSave=!1,n.onSaveSuccessSource=!0,n.onSaveErrorSource=!1,$("#newParamurlModal").modal("hide"),n.cancelParamurl(),n.getParamUrls()},function(t){e.onSave=!1,n.onSaveSuccessSource=!1,n.onSaveErrorSource=!0,$("#newParamurlModal").modal("hide"),console.log(t)})},n.deleteUrl=function(e){e.onSave=!0,a.deleteParamUrl({url:e.url,profiles:e.profiles}).then(function(t){e.onSave=!1,n.cancelParamurl(),n.getParamUrls(),$("#deleteModal").modal("hide")},function(n){e.onSave=!1,console.log(n)})},n.cancelParamurl=function(e){n.newUrl={url:"",profiles:[],only_queue:!1},n.newUrl.onMod=!1},n.modifyUrl=function(e){e.onMod=!0,n.newUrl=angular.copy(e)},n.getParamUrls=function(){a.getParamUrls().then(function(e){n.allUrls=e.data,n.allUrlProfiles={},n.view.changeRoute=!1,n.tdata.busyProfiles=[];for(var t=0;t<n.allUrls.length;t++)n.tdata.busyProfiles=n.tdata.busyProfiles.concat(n.allUrls[t].profiles.split(",")),n.allUrlProfiles[n.allUrls[t].id]=n.allUrls[t],n.allUrlProfiles[n.allUrls[t].id].profiles=n.allUrlProfiles[n.allUrls[t].id].profiles.split(",");n.tdata.dataLoaded=!0,n.$$phase||n.$apply(),n.view.changeRoute=!1},function(e){n.view.changeRoute=!1,console.log(e)})},n.getAllProfiles=function(){n.view.changeRoute=!0,t.allProfiles().then(function(e){n.tdata.allProfiles=e.data},function(e){console.log(e)})},n.openModal=function(){n.newUrl={url:"",profiles:[],only_queues:!1},n.getAllProfiles(),n.getParamUrls()},n.clipboardCopied=function(e){n.tdata.popoverInit||($("[data-toggle=popover]").popovers().on("hidden.bs.popover",function(e){$(e.target).data("bs.popover").inState.click=!1}),n.tdata.popoverInit=!0),$("#copy-clipboard-btn-"+e).popover("show"),setTimeout(function(){$("#copy-clipboard-btn-"+e).popover("hide")},800)},n.$on("$routeChangeSuccess",function(e,t,a){"views/apps/paramurl.html"===t.templateUrl&&(n.getAllProfiles(),n.getParamUrls(),n.tdata.clipInit||(new ClipboardJS(".copy-clipboard-btn"),n.tdata.clipInit=!0))}),n.$on("loginCompleted",function(e,t){n.getAllProfiles(),n.getParamUrls(),n.tdata.clipInit||(new ClipboardJS(".copy-clipboard-btn"),n.tdata.clipInit=!0)})}]),angular.module("nethvoiceWizardUiApp").controller("AdminLanguagesCtrl",["$scope","$interval","LanguageService","UtilService","ConfigService","LocalStorageService",function(e,n,t,a,s,i){e.taskPromise=null,e.currentProgress=0,e.errorCount=0,e.defaultLanguage="",e.startInstallation=!1,e.currentLanguage="",e.language=i.get("preferredLanguage"),e.availableLangs=["it","en","fr","de","es"],e.$on("$destroy",function(){n.cancel(e.taskPromise)}),e.getLangName=function(e){return t.getNativeName(e)},e.getLanguageList=function(n){e.view.changeRoute=n,t.getInstalledLanguages().then(function(n){for(var t in n.data)1==n.data[t].default?(e.language=t,e.currentLanguage=t,e.wizard.nextState=!0,e.view.changeRoute=!1):e.view.changeRoute=!1},function(n){console.log(n),e.view.changeRoute=!1})},e.setDefaultPBXLanguage=function(t){e.startInstallation=!0,e.currentProgress=0,e.onSaveSuccess=!1,e.onSaveError=!1,e.wizard.nextState=!0,s.setPBXLang({lang:t}).then(function(i){e.taskPromise=n(function(){a.taskStatus(i.data.result).then(function(a){a.data.progress<100?(e.errorCount=0,e.currentProgress=a.data.progress):100==a.data.progress?(e.errorCount=0,n.cancel(e.taskPromise),e.currentProgress=100,s.setDefaultPBXLang({lang:t}).then(function(n){e.currentLanguage=e.language,e.onSaveSuccess=!0,e.onSaveError=!1},function(n){console.error(n),e.onSaveSuccess=!1,e.onSaveError=!0})):(console.log(a.error),e.errorCount<appConfig.MAX_TRIES?e.errorCount++:(n.cancel(e.taskPromise),e.currentProgress=-1,e.onSaveSuccess=!1,e.onSaveError=!0))},function(t){console.log(t),e.errorCount<appConfig.MAX_TRIES?e.errorCount++:(n.cancel(e.taskPromise),e.currentProgress=-1,e.onSaveSuccess=!1,e.onSaveError=!0)})},5e3)},function(n){console.error(n),e.onSaveSuccess=!1,e.onSaveError=!0,e.currentProgress=100})},e.getLanguageList(!0)}]),angular.module("nethvoiceWizardUiApp").controller("BulkextensionsCtrl",["$scope","$rootScope","$filter","$location","$q","ConfigService","UserService","UtilService","ProfileService","BulkService",function(e,n,t,a,s,i,o,l,r,c){e.users={},e.interval={},e.allGroups={},e.profiles=[],e.bulkData={},e.exts={},e.temp={advancedOptions:!1},e.dest={},e.num={tot:0,selected:0},e.bulkEdit={},e.usersLimit=20,e.view.changeRoute=!0,e.selectDest={busydest:{label:"Busy"},noanswerdest:{label:"No answer"},notreachabledest:{label:"Not reachable"}},e.phoneTypes={0:"physical",1:"webrtc"},e.search={string:"",result:!1},n.$on("scrollingContainerView",function(){e.users&&e.users.length>e.usersLimit&&(e.usersLimit+=e.SCROLLPLUS)}),e.getUserList=function(){e.lockOnList||(e.lockOnList=!0,o.list(!0).then(function(n){e.users=n.data,e.num.tot=Object.keys(e.users).length,e.view.changeRoute=!1},function(n){e.users={},e.view.changeRoute=!1,console.log(n)}))},e.selectUser=function(n){1!=n.selected?(n.selected=!0,e.num.selected++):(n.selected=!1,e.search.result=!1,e.num.selected--)},e.getAllGroups=function(){r.allGroups().then(function(n){e.allGroups=n.data},function(e){console.log(e)})},e.selectGroup=function(n){var t=[];r.allUserGroups(n).then(function(n){for(var a in e.num.selected=0,n.data)for(var s in e.users)n.data[a].user_id==e.users[s].id?(t.push(e.users[s].id),e.users[s].selected=!0,e.num.selected++):t.includes(e.users[s].id)||(e.users[s].selected=!1)},function(e){console.log(e)})},e.selectAll=function(n){for(var t in e.users)1==n?(e.num.selected=Object.keys(e.users).length,e.users[t].selected=!0):(e.num.selected=0,e.users[t].selected=!1,e.search.result=!1);e.search.string=""},e.selectInterval=function(){for(var n in e.num.selected=0,e.users)e.users[n].selected=!1,e.users[n].default_extension>=e.interval.from&&e.users[n].default_extension<=e.interval.to&&(e.users[n].selected=!0,e.num.selected++);$("#setInterval").modal("hide")},e.bulkEditSave=function(){for(var n in e.temp.profile=e.bulkEdit.profile,e.temp.onsave=!0,null===e.bulkEdit.outboundcid&&(e.bulkEdit.outboundcid_fixed=null),e.profiles)e.profiles[n]==e.bulkEdit.profile&&(e.bulkEdit.profile=n);c.setBulkInfo(e.exts,e.bulkEdit).then(function(n){for(var t in e.temp.onsave=!1,e.selectDest)e.selectDest[t].key="",e.selectDest[t].selected="",e.selectDest[t].value={};$("#bulkEdit").modal("hide")},function(n){e.temp.onsave=!1,console.log(n)})},e.initEditModal=function(){for(var n in e.bulkEdit={},e.selectedUsers=[],e.temp.profile="",$("#bulkEdit").modal("show"),e.users)"none"==e.users[n].default_extension||1!=e.users[n].selected||e.selectedUsers.includes(e.users[n].default_extension)||e.selectedUsers.push(e.users[n].default_extension);e.exts=e.selectedUsers.join(","),e.exts&&c.getBulkInfo(e.exts).then(function(n){for(var t in e.bulkEdit=n.data,e.bulkEdit.outboundcid&&(e.bulkEdit.outboundcid_fixed=e.bulkEdit.outboundcid,e.bulkEdit.outboundcid="fixed"),e.bulkData=angular.copy(n.data),null!==e.bulkEdit.ringtime&&(e.bulkEdit.ringtime=parseInt(e.bulkEdit.ringtime)),e.dest)for(var a in e.dest[t])e.dest[t][a].destination==e.bulkEdit.noanswerdest&&(e.selectDest.noanswerdest.selected=e.dest[t][a].description,e.selectDest.noanswerdest.key=t,e.selectDest.noanswerdest.value=e.dest[t]),e.dest[t][a].destination==e.bulkEdit.busydest&&(e.selectDest.busydest.selected=e.dest[t][a].description,e.selectDest.busydest.key=t,e.selectDest.busydest.value=e.dest[t]),e.dest[t][a].destination==e.bulkEdit.notreachabledest&&(e.selectDest.notreachabledest.selected=e.dest[t][a].description,e.selectDest.notreachabledest.key=t,e.selectDest.notreachabledest.value=e.dest[t])},function(e){console.log(e)})},e.checkSame=function(){for(var n in e.checkUsers=[],e.checkProfile=[],e.users)"none"!=e.users[n].profile&&1==e.users[n].selected&&(e.checkUsers.push(e.users[n].profile),e.$$phase||e.$apply());if(t=e.checkUsers,1==new Set(t).size)return!0;var t},e.selectResults=function(n){var a=t("filter")(e.users,n);for(var s in e.users)e.users[s].selected=!1;for(var s in 0==e.search.result?e.search.result=!0:e.search.result=!1,a)0==e.search.result?a[s].selected=!1:a[s].selected=!0},e.selectDests=function(n){for(var t in e.dest)for(var a in e.dest[t])e.dest[t][a].destination==e.bulkData[n]&&(e.selectDest[n].selected=e.dest[t][a].description,e.selectDest[n].key=t,e.selectDest[n].value=e.dest[t])},e.closeEditModal=function(){for(var n in $("#bulkEdit").modal("hide"),e.selectDest)e.selectDest[n].key="",e.selectDest[n].selected="",e.selectDest[n].value={}},e.lock=function(n,t){"disable"==n?(e.bulkData[t]=e.bulkEdit[t],e.bulkEdit[t]=null):"enable"==n&&null!==e.bulkData[t]?e.bulkEdit[t]=e.bulkData[t]:"callwaiting"==t?e.bulkEdit.callwaiting=!0:"profile"==t?e.bulkEdit.profile="Standard":e.bulkEdit[t]=""},e.lockDests=function(n,t){"disable"==n?(e.bulkData[t]=e.bulkEdit[t],e.bulkEdit[t]=null,e.selectDest[t].value={},e.selectDest[t].key=""):"enable"==n&&null!==e.bulkData[t]?(e.bulkEdit[t]=e.bulkData[t],e.selectDests(t)):e.bulkEdit[t]=""},e.setDest=function(n,t,a){e.selectDest[a].value=t,e.selectDest[a].key=n,e.bulkEdit[a]=t[0].destination,e.selectDest[a].selected=t[0].description},e.setDestVal=function(n,t){e.bulkEdit[t]=e.selectDest[t].value[n].destination,e.selectDest[t].selected=e.selectDest[t].value[n].description},e.isEmptyObj=function(e){return l.isEmpty(e)},e.resetDest=function(n,t){e.bulkEdit[n]=t,e.selectDest[n].value={},e.selectDest[n].key=""},c.getDestinations().then(function(n){for(let e in n.data)delete n.data[e][99999];e.dest=n.data},function(e){console.log(e)}),r.allProfiles().then(function(n){e.profiles=n.data},function(e){console.log(e)}),e.$on("$routeChangeSuccess",function(n,t,a){"views/apps/bulkextensions.html"===t.templateUrl&&(e.getUserList(),e.getAllGroups())}),e.$on("loginCompleted",function(n,t){e.getUserList(),e.getAllGroups()})}]),angular.module("nethvoiceWizardUiApp").service("BulkService",["$q","RestService",function(e,n){this.allContexts=function(){return e(function(e,t){n.get("/contexts").then(function(n){e(n)},function(e){t(e)})})},this.getBulkInfo=function(t){return e(function(e,a){n.get("/bulk/"+t).then(function(n){e(n)},function(e){a(e)})})},this.getDestinations=function(){return e(function(e,t){n.get("/destinations").then(function(n){e(n)},function(e){t(e)})})},this.setBulkInfo=function(t,a){return e(function(e,s){n.post("/bulk/"+t,a).then(function(n){e(n)},function(e){s(e)})})}}]),angular.module("nethvoiceWizardUiApp").service("MigrationService",["$q","RestService",function(e,n){this.isMigration=function(){return e(function(e,t){n.get("/migration/ismigration").then(function(n){e(n)},function(e){t(e)})})},this.getOldUsers=function(){return e(function(e,t){n.get("/migration/oldusers").then(function(n){e(n)},function(e){t(e)})})},this.importProfiles=function(){return e(function(e,t){n.post("/migration/importprofiles").then(function(n){e(n)},function(e){t(e)})})},this.importUsers=function(t){return e(function(e,a){n.post("/migration/importusers",t).then(function(n){e(n)},function(e){a(e)})})},this.importOldVoipTrunks=function(){return e(function(e,t){n.post("/migration/importoldvoiptrunks").then(function(n){e(n)},function(e){t(e)})})},this.importOldGateways=function(){return e(function(e,t){n.post("/migration/gateways").then(function(n){e(n)},function(e){t(e)})})},this.importIax=function(){return e(function(e,t){n.post("/migration/iax").then(function(n){e(n)},function(e){t(e)})})},this.importOldOutRoutes=function(){return e(function(e,t){n.post("/migration/importoutboundroutes").then(function(n){e(n)},function(e){t(e)})})},this.assignTrunksRoutes=function(){return e(function(e,t){n.post("/migration/trunksroutesassignements").then(function(n){e(n)},function(e){t(e)})})},this.importGroups=function(){return e(function(e,t){n.post("/migration/groups").then(function(n){e(n)},function(e){t(e)})})},this.importQueues=function(){return e(function(e,t){n.post("/migration/queues").then(function(n){e(n)},function(e){t(e)})})},this.importIvr=function(){return e(function(e,t){n.post("/migration/ivr").then(function(n){e(n)},function(e){t(e)})})},this.importCqr=function(){return e(function(e,t){n.post("/migration/cqr").then(function(n){e(n)},function(e){t(e)})})},this.importRecordings=function(){return e(function(e,t){n.post("/migration/recordings").then(function(n){e(n)},function(e){t(e)})})},this.importAnnouncements=function(){return e(function(e,t){n.post("/migration/announcements").then(function(n){e(n)},function(e){t(e)})})},this.importDaynight=function(){return e(function(e,t){n.post("/migration/daynight").then(function(n){e(n)},function(e){t(e)})})},this.importTimegroups=function(){return e(function(e,t){n.post("/migration/timegroups").then(function(n){e(n)},function(e){t(e)})})},this.importTimeconditions=function(){return e(function(e,t){n.post("/migration/timeconditions").then(function(n){e(n)},function(e){t(e)})})},this.importInRoutes=function(){return e(function(e,t){n.post("/migration/inboundroutes").then(function(n){e(n)},function(e){t(e)})})},this.importPostMig=function(){return e(function(e,t){n.post("/migration/postmigration").then(function(n){e(n)},function(e){t(e)})})},this.getCdrLength=function(){return e(function(e,t){n.get("/migration/cdrrowcount").then(function(n){e(n)},function(e){t(e)})})},this.importCdr=function(){return e(function(e,t){n.post("/migration/cdr").then(function(n){e(n)},function(e){t(e)})})},this.getCdrStatus=function(){return e(function(e,t){n.get("/migration/cdr").then(function(n){e(n)},function(e){t(e)})})},this.getReport=function(){return e(function(e,t){n.get("/migration/report").then(function(n){e(n)},function(e){t(e)})})},this.getMigrationStatus=function(){return e(function(e,t){n.get("/migration/migrationstatus").then(function(n){e(n)},function(e){t(e)})})},this.setMigrationStatus=function(t){return e(function(e,a){n.post("/migration/migrationstatus",t).then(function(n){e(n)},function(e){a(e)})})},this.endMigration=function(){return e(function(e,t){n.post("/migration/endmigration").then(function(n){e(n)},function(e){t(e)})})}}]),angular.module("nethvoiceWizardUiApp").controller("MigrationCtrl",["$scope","$location",function(e,n){e.view.changeRoute=!1,e.startMigration=function(){n.path("/migration/users"),e.wizard.fromMigrationStart=!0},e.skipMigration=function(){n.path("/migration/cdr"),e.wizard.isMigrationSkip=!0},e.redirectOnMigrationStatus()}]),angular.module("nethvoiceWizardUiApp").controller("UsersmigrationCtrl",["$scope","$rootScope","$location","$interval","UserService","UtilService","MigrationService",function(e,n,t,a,s,i,o){e.migration={oldUserToRemove:"",newUserForKey:"",profiles:{statusDone:!1,started:!1,loading:!1,completed:!1,status:"todo",data:{}},users:{statusDone:!1,started:!1,loading:!1,completed:!1,status:"todo",data:{}}},e.olduserLimit=20,e.userLimit=20,e.totalUsers=0,e.usersTranfered=0,e.errorUserCreation=!1,e.temp={errorCount:0,currentProgress:0},e.users={},e.taskPromise=null,e.onSave=!1,e.lockOnList=!1,e.openSelect=function(e){$("#"+e).addClass("open")},e.removeOldExtension=function(){e.oldusers.splice(e.oldUserToRemove,1),$("#confirmDelete").modal("hide"),e.oldUserToRemove="",e.reloadAvaibleUsers()},e.showConfMigAlert=function(){$("#alertStartConfMig").modal("show")},e.startConfigMig=function(){$("#alertStartConfMig").modal("hide"),t.path("/migration/config")},e.checkRemoveOldExtension=function(n){e.oldUserToRemove=n},e.createUser=function(n){var t=n.username,a=n.fullname;for(var o in e.errorUserCreation=!1,e.onSave=!0,e.oldusers)if(e.oldusers[o].username===n.username)return e.onSave=!1,void(e.errorUserCreation=!0);s.create(n).then(function(o){s.setPassword(n.username,{password:i.randomPassword(8)}).then(function(n){e.onSave=!1,$("#createUser").modal("hide"),e.oldusers[e.migration.newUserForKey].username=t,e.oldusers[e.migration.newUserForKey].name=a,e.getUsersList(),e.newUser={},e.migration.newUserForKey=""},function(n){e.onSave=!1,console.log(n)})},function(n){e.onSave=!1,console.log(n)})},e.associateUser=function(n,t,a){n.username=t.username,n.name=t.displayname,e.openSelect("selectId"+n.extension),e.reloadAvaibleUsers()},e.disassociatesUser=function(n){n.username="",n.name=n.oldname,e.reloadAvaibleUsers()},e.setNewUserFor=function(n){e.migration.newUserForKey=n},e.reloadAvaibleUsers=function(){for(var n in e.users)for(var t in e.oldusers){if(e.oldusers[t].username===e.users[n].username){e.users[n].inuse=!0;break}e.users[n].inuse=!1}},e.areUsersAvaible=function(){for(var n in e.users)if(!1===e.users[n].inuse)return!0;return!1},e.resetUsersMig=function(){e.migration.users.completed=!1,e.migration.users.status="todo"},e.resetUser=function(n){n.username=n.oldusername,n.name=n.oldname,e.reloadAvaibleUsers()},e.startProfilesMig=function(){e.migration.profiles.loading=!0,e.migration.profiles.started=!0,o.importProfiles().then(function(n){e.slideDown("collapse-profilemig"),e.slideDown("collapse-usermig"),e.migration.profiles.loading=!1,e.migration.profiles.data=n.data,e.migration.profiles.status="success"},function(n){e.slideDown("collapse-profilemig"),e.slideDown("collapse-usermig"),e.migration.profiles.loading=!1,e.migration.profiles.data=n.data,e.migration.profiles.status="fail",console.log(n)})},e.startUsersMig=function(){e.migration.users.loading=!0,e.toggleMig("collapse-usermig"),o.importUsers(e.oldusers).then(function(n){e.importConfirm()},function(n){console.log(n),e.slideDown("collapse-usermig"),e.migration.users.loading=!1,e.migration.users.status="fail"})},e.failUserMig=function(n){e.migration.users.data=n.data,e.slideDown("collapse-usermig"),e.slideUp("collapse-profilemig"),e.migration.users.loading=!1,e.migration.users.status="fail",e.importError()},e.importError=function(){e.temp.loadingCancel=!1,a.cancel(e.taskPromise),e.getUsersList(),e.temp.currentProgress=-1},e.clearImport=function(){e.temp.errorCount=0,e.temp.currentProgress=0,e.temp.loading=!1,e.temp.loadingCancel=!1},e.hideUserMigModal=function(){setTimeout(function(){$("#importModalMig").modal("hide"),e.temp.errorCount=0,e.temp.currentProgress=0,e.temp.loading=!1,e.temp.loadingCancel=!1},1e3)},e.importConfirm=function(){e.temp.loading=!0,e.temp.loadingCancel=!0,e.migration.users.started=!0,e.taskPromise=a(function(){s.statusCsvImport().then(function(n){n.data.result<100&&null!=n.data.result?(e.temp.errorCount=0,e.temp.currentProgress=n.data.result):100==n.data.result?(a.cancel(e.taskPromise),e.temp.errorCount=0,e.temp.currentProgress=100,e.migration.users.data=n.data,e.migration.users.loading=!1,e.migration.users.status="success",e.toggleMig("collapse-usermig"),e.getUsersList(),e.hideUserMigModal()):(e.failUserMig(n),e.hideUserMigModal(),console.log(n.error))},function(n){e.failUserMig(n),e.hideUserMigModal(),console.log(n)})},5e3)},e.getUsersList=function(){e.lockOnList||(e.lockOnList=!0,s.list(!0).then(function(n){e.users=n.data,e.lockOnList=!1,e.reloadAvaibleUsers(),e.countUser(e.users),setTimeout(function(){e.$apply()},100)},function(n){e.users={},e.lockOnList=!1,console.log(n)}))},e.countUser=function(n){for(var t in e.counting=0,n)e.counting=e.counting+1;e.usersTranfered=e.counting},e.getOldUsers=function(){o.getOldUsers().then(function(n){for(var t in e.view.changeRoute=!1,e.oldusers=n.data,e.oldusers)""!==e.oldusers[t].name&&(e.oldusers[t].oldname=e.oldusers[t].name),""!==e.oldusers[t].username&&(e.oldusers[t].oldusername=e.oldusers[t].username);e.countOldUser(e.oldusers),e.getUsersList()},function(n){e.view.changeRoute=!1,console.log(n)})},e.countOldUser=function(n){for(var t in e.count=0,n)e.count=e.count+1;e.totalUsers=e.count},n.$on("scrollingContainerView",function(){e.totalUsers&&e.totalUsers>e.olduserLimit&&(e.olduserLimit+=e.SCROLLPLUS),e.usersTranfered&&e.usersTranfered>e.userLimit&&(e.userLimit+=e.SCROLLPLUS)}),e.validateMigrationStatus=function(){o.getMigrationStatus().then(function(n){"ready"==n.data&&e.wizard.fromMigrationStart?e.startProfilesMig():"profiles"===n.data?(e.migration.profiles.statusDone=!0,e.slideDown("collapse-usermig")):"users"===n.data?(e.migration.profiles.statusDone=!0,e.migration.users.statusDone=!0):e.redirectOnMigrationStatus(n.data)},function(e){console.log(e)})},e.validateMigrationStatus(),e.getOldUsers()}]),angular.module("nethvoiceWizardUiApp").controller("ConfigmigrationCtrl",["$scope","$location","MigrationService",function(e,n,t){e.view.changeRoute=!1,e.nextSepMig=function(n){for(var t in e.migration){if(a){e.migration[t].action();break}if(t===n)var a=!0}},e.migration={vtrunks:{id:0,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){$("html, body").animate({scrollTop:0},1),e.startItemMig("vtrunks"),t.importOldVoipTrunks().then(function(n){e.successItemMig("vtrunks",n.data),e.slideDown("collapse-vtrunks")},function(n){e.failItemMig("vtrunks",n.data),e.slideDown("collapse-vtrunks"),console.log(n)})}},gateptrunks:{id:1,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("gateptrunks"),t.importOldGateways().then(function(n){e.successItemMig("gateptrunks",n.data),e.slideDown("collapse-gateptrunks")},function(n){e.failItemMig("gateptrunks",n.data),e.slideDown("collapse-gateptrunks"),console.log(n)})}},iax:{id:2,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("iax"),t.importIax().then(function(n){e.successItemMig("iax",n.data),e.slideDown("collapse-iax")},function(n){e.failItemMig("iax",n.data),e.slideDown("collapse-iax"),console.log(n)})}},outroutes:{id:3,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("outroutes"),t.importOldOutRoutes().then(function(n){t.assignTrunksRoutes().then(function(n){e.successItemMig("outroutes",n.data),e.slideDown("collapse-outroutes")},function(n){e.failItemMig("outroutes",n.data),e.slideDown("collapse-outroutes"),console.log(n)})},function(n){e.failItemMig("outroutes",n.data),e.slideDown("collapse-outroutes"),console.log(n)})}},groups:{id:4,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("groups"),t.importGroups().then(function(n){e.successItemMig("groups",n.data),e.slideDown("collapse-groups")},function(n){e.failItemMig("groups",n.data),e.slideDown("collapse-groups"),console.log(n)})}},queues:{id:5,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("queues"),t.importQueues().then(function(n){e.successItemMig("queues",n.data),e.slideDown("collapse-queues")},function(n){e.failItemMig("queues",n.data),e.slideDown("collapse-queues"),console.log(n)})}},ivr:{id:6,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("ivr"),t.importIvr().then(function(n){e.successItemMig("ivr",n.data),e.slideDown("collapse-ivr")},function(n){e.failItemMig("ivr",n.data),e.slideDown("collapse-ivr"),console.log(n)})}},cqr:{id:7,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("cqr"),t.importCqr().then(function(n){e.successItemMig("cqr",n.data),e.slideDown("collapse-cqr")},function(n){e.failItemMig("cqr",n.data),e.slideDown("collapse-cqr"),console.log(n)})}},recordings:{id:8,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("recordings"),t.importRecordings().then(function(n){e.successItemMig("recordings",n.data),e.slideDown("collapse-recordings")},function(n){e.failItemMig("recordings",n.data),e.slideDown("collapse-recordings"),console.log(n)})}},announcements:{id:9,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("announcements"),t.importAnnouncements().then(function(n){e.successItemMig("announcements",n.data),e.slideDown("collapse-announcements")},function(n){e.failItemMig("announcements",n.data),e.slideDown("collapse-announcements"),console.log(n)})}},daynight:{id:10,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("daynight"),t.importDaynight().then(function(n){e.successItemMig("daynight",n.data),e.slideDown("collapse-daynight")},function(n){e.failItemMig("daynight",n.data),e.slideDown("collapse-daynight"),console.log(n)})}},tgroupstcond:{id:11,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("tgroupstcond"),t.importTimegroups().then(function(n){t.importTimeconditions().then(function(n){e.successItemMig("tgroupstcond",n.data),e.slideDown("collapse-tgroupstcond")},function(n){e.failItemMig("tgroupstcond",n.data),e.slideDown("collapse-tgroupstcond"),console.log(n)})},function(n){e.failItemMig("tgroupstcond",n.data),e.slideDown("collapse-tgroupstcond"),console.log(n)})}},iroutes:{id:12,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("iroutes"),t.importInRoutes().then(function(n){e.successItemMig("iroutes",n.data),e.slideDown("collapse-iroutes")},function(n){e.failItemMig("iroutes",n.data),e.slideDown("collapse-iroutes"),console.log(n)})}},postmig:{id:13,started:!1,loading:!1,completed:!1,statusDone:!1,status:"todo",data:{},action:function(){e.startItemMig("postmig"),t.importPostMig().then(function(n){e.successItemMig("postmig",n.data),e.slideDown("collapse-postmig"),e.wizard.confMigrationDone=!0},function(n){e.failItemMig("postmig",n.data),e.slideDown("collapse-postmig"),e.wizard.confMigrationDone=!0,console.log(n)})}}},e.goToCdr=function(){n.path("/migration/cdr")},e.setMigCompletedTimeout=function(n,t){"postmig"!==n&&e.nextSepMig(n)},e.startItemMig=function(n){e.migration[n].started=!0,e.migration[n].loading=!0},e.successItemMig=function(n,t){e.migration[n].data=t,e.migration[n].loading=!1,e.migration[n].status="success",e.setMigCompletedTimeout(n,!0)},e.failItemMig=function(n,t){e.migration[n].data=t,e.migration[n].loading=!1,e.migration[n].status="fail",e.setMigCompletedTimeout(n,!0)},e.disableDoneSteps=function(n){if("users"!==n)for(var t in e.migration)if(e.migration[t].statusDone=!0,n===t)break},e.validateMigrationStatus=function(){t.getMigrationStatus().then(function(t){var a=migrationConfig.LABEL_INFO[t.data];if(a){var s=migrationConfig.LABEL_INFO[a.next];"done"!==t.data&&"cdr"!==t.data&&s.route===n.path()?(e.migration[a.next].action(),e.disableDoneSteps(t.data)):e.redirectOnMigrationStatus(t.data)}else e.redirectOnMigrationStatus(t.data)},function(e){console.log(e)})},e.validateMigrationStatus()}]),angular.module("nethvoiceWizardUiApp").controller("CdrmigrationCtrl",["$scope","$location","$interval","MigrationService",function(e,n,t,a){e.migration={cdr:{id:0,count:0,started:!1,loading:!1,completed:!1,status:"todo",data:{}}},e.view.changeRoute=!1,e.hideCdrModal=function(){$("#importModalMig").modal("hide")},e.startCdrMig=function(){e.migration.cdr.loading=!0,e.migration.cdr.started=!0,e.hideCdrModal(),e.toggleMig("collapse-cdr"),a.importCdr().then(function(n){e.migration.cdr.data=n.data,e.slideDown("collapse-cdr"),e.migration.cdr.status="success",e.migration.cdr.loading=!1},function(n){console.log(n),e.migration.cdr.data=n.data,e.slideDown("collapse-cdr"),e.migration.cdr.status="fail",e.migration.cdr.loading=!1})},e.setMigraitonCdrStatus=function(e){a.setMigrationStatus({status:e}).then(function(e){},function(e){console.log(e)})},e.goToReport=function(t){t&&e.setMigraitonCdrStatus(t),n.path("/migration/report")},e.initCdr=function(){a.getCdrLength().then(function(n){e.migration.cdr.count=n.data.count},function(e){console.log(e)})},e.initCdr(),e.wizard.isMigrationSkip||e.redirectOnMigrationStatus()}]),angular.module("nethvoiceWizardUiApp").controller("ReportmigrationCtrl",["$scope","$location","$filter","MigrationService",function(e,n,t,a){e.migration=migrationConfig.LABEL_INFO,e.report={},e.getReport=function(){a.getReport().then(function(n){e.view.changeRoute=!1,e.report=n.data},function(e){console.log(e)})},e.generatePDF=function(){var n=new jsPDF("l","pt");n.text(t("translate")("Migration report"),40,35),n.setFontSize(11),n.setTextColor(100),n.text(t("translate")("Header Migration Report 1"),40,63),n.setFontSize(11);var a=0;$.each(e.migration,function(s,i){for(var o in i.rows=[],i.functions)for(var l in e.report[i.functions[o]])for(var r in e.report[i.functions[o]][l]){var c={msg:e.report[i.functions[o]][l][r],case:"errors"===l?"error":"warnings"===l?"warning":"infos"===l?"info":l};i.rows.push(c)}if(i.columns=[{title:t("translate")("Migration")+": "+t("translate")(s),dataKey:"msg"},{title:t("translate")("Type"),dataKey:"case"}],i.rows[0]){if(0===a)var d=100;else d=20;a++,n.autoTable(i.columns,i.rows,{startY:n.autoTableEndPosY()+d,theme:"grid",styles:{fontSize:11,cellPadding:10,overflow:"linebreak"},columnStyles:{msg:{columnWidth:"auto"},case:{columnWidth:65}},headerStyles:{fillColor:[63,156,53]}})}}),n.save("migration_report.pdf")},e.getReport(),e.redirectOnMigrationStatus()}]),angular.module("nethvoiceWizardUiApp").controller("DashboardCtrl",["$rootScope","$scope","$interval","DashboardService",function(e,n,t,a){n.data={users:{},extensions:{},trunks:{},selExten:{},updateInterval:void 0,userChangingPresenceUsername:void 0,userChangingPresenceName:void 0},n.usersNumber=[],n.trunksNumber=[],n.view.changeRoute=!0,n.usersLimit=20,n.trunksLimit=20,n.scrollingUsersContainer=function(){n.usersNumber&&n.usersNumber.length>n.usersLimit&&(n.usersLimit+=n.SCROLLPLUS)},n.scrollingTrunksContainer=function(){n.trunksNumber&&n.trunksNumber.length>n.trunksLimit&&(n.trunksLimit+=n.SCROLLPLUS)},n.update=function(){n.getUsers(),n.getExtensions(),n.getTrunks()},n.getUsers=function(e){a.getUsers().then(function(e){n.data.users=e.data,n.usersNumber=Object.values(n.data.users),n.wizard.isWizard||(n.view.changeRoute=!1)},function(e){console.log(e)})},n.getExtensions=function(e){a.getExtensions().then(function(e){n.data.extensions=e.data},function(e){console.log(e)})},n.getTrunks=function(e){a.getTrunks().then(function(e){n.data.trunks=e.data,n.trunksNumber=Object.values(n.data.trunks)},function(e){console.log(e)})},n.showExtenDetails=function(e,t){a.getExtension(e).then(function(e){n.data.selExten=e.data;for(var a=0;a<n.data.users[t].endpoints.extension.length;a++)n.data.users[t].endpoints.extension[a].id===e.data.exten&&(n.data.selExten.type=n.data.users[t].endpoints.extension[a].type);$("#extenDetailsModal").modal("show")},function(e){console.log(e)})},n.setPresenceOnline=function(e){a.setPresenceOnline(e).then(function(e){$("#presenceSetupConfirmation").modal("hide"),n.update()},function(e){console.log(e),$("#presenceSetupConfirmation").modal("hide"),n.update()})},n.showSetPresenceConfirmation=function(e){n.data.userChangingPresenceUsername=e.username,n.data.userChangingPresenceName=e.name,$("#presenceSetupConfirmation").modal("show")},n.$on("$routeChangeStart",function(){t.cancel(n.data.updateInterval)}),e.$on("loginCompleted",function(e,t){n.update()}),n.data.updateInterval=t(function(){n.update()},15e3),n.login&&n.update(),n.redirectOnMigrationStatus()}]),angular.module("nethvoiceWizardUiApp").controller("PhonebookCtrl",["$scope","ApplicationService","PhonebookService",function(e,n,t){e.sourcePortMap={"mssql:7_1":"1433","mssql:7_2":"1433","mssql:7_3_A":"1433","mssql:7_3_B":"1433","mssql:7_4":"1433",mysql:"3306",postgres:"5432"},e.phonebookIcons={homeemail:{icon:"envelope",label:"Email"},workemail:{icon:"envelope",label:"Email"},homephone:{icon:"phone",label:"Home phone"},workphone:{icon:"phone",label:"Work phone"},cellphone:{icon:"mobile",label:"Cell phone"},fax:{icon:"fax",label:"Fax"},title:{icon:"graduation-cap",label:"Job title"},company:{icon:"building",label:"Company"},notes:{icon:"file",label:"Notes"},homelocation:{icon:"marker",label:"Location"},worklocation:{icon:"marker",label:"Location"},url:{icon:"world",label:"Site"},name:{icon:"user",label:"Name"}},e.allDBTypes={mysql:"MySQL",csv:"CSV"},e.syncIntervals={15:"15 minutes",30:"30 minutes",60:"1 hour",360:"6 hours",1440:"24 hours"},e.sourceModal={tab:"datasource",querySelectDone:!1,querySelectProgress:!1},e.querySelect=[],e.ui={onModify:!1},e.newSource={mapping:{}},e.colsSources={},e.colsDestinations={},e.view.changeRoute=!0,e.getSourceName=function(e,n){return e.type?e.type:n},e.getSourceType=function(n,t){return e.allDBTypes[n.dbtype]?e.allDBTypes[n.dbtype]:t},e.getAllSources=function(){t.readConfig().then(function(n){e.allSources=n.data,e.view.changeRoute=!1},function(e){console.log(e)})},e.getDestColumns=function(){t.readFields().then(function(n){for(var t in n.data)e.colsDestinations[n.data[t]]={inuse:!1}},function(e){console.log(e)})},e.getSourceColumns=function(n,t){for(var a in e.colsSources={},n)e.colsSources[a]={inuse:!1};t.sourceColumns=e.colsSources},e.csvUploadClick=function(n){$("#csvUploadFile").one("change",function(n){try{t.uploadFile(event.target.files[0]).then(n=>{if(!n.data.uri||!n.data.uri.startsWith("file:///"))throw"Response uri field is missing or malformed";e.newSource.url=n.data.uri,setTimeout(()=>{$("#pbSourceCheckButton").click()})})}catch(e){console.error("File upload error!",e)}}).click()},e.togglePass=function(e){e.showPass=!e.showPass},e.enableSourceSave=function(n,t){e.enableSourceSaveVal=!0,e.newSource.mapping[n]=t,e.reloadAvailableDestinations()},e.disassociatesColumn=function(n,t){e.colsDestinations[t].inuse=!1,delete e.newSource.mapping[n],e.reloadAvailableDestinations()},e.reloadAvailableDestinations=function(){for(var n in e.colsDestinations)for(var t in e.newSource.mapping){if(e.newSource.mapping[t]===n){e.colsDestinations[n].inuse=!0;break}e.colsDestinations[n].inuse=!1}},e.modifySource=function(n,t){e.ui.onModify=!0,e.ui.modifyId=n,e.newSource=t,e.colsSources=t.sourceColumns,setTimeout(function(){e.checkConnection(t)},500)},e.newSourceEvent=function(){e.ui.onModify=!1,e.switchsourceModalTab("datasource"),e.querySelect=[],e.newSource={query:"SELECT * FROM [table]",dbtype:"mysql",interval:"1440",port:e.sourcePortMap.mysql,mapping:{},enabled:!0},e.reloadAvailableDestinations()};var a=function(e){var n={};return"mysql"==e.dbtype?n={dbtype:"mysql",dbname:e.dbname,host:e.host,port:e.port,user:e.user,password:e.password,query:e.query}:"csv"==e.dbtype&&(n={dbtype:"csv",url:e.url}),n.type=e.type,n.mapping=e.mapping,n.enabled=e.enabled,n.interval=e.interval,n};e.saveSource=function(){t.createConfig(a(e.newSource)).then(function(n){$("#creationsourceModal").modal("hide"),e.onSaveSuccessSource=!0,e.ui.onModify=!1,e.getAllSources()},function(n){e.onSaveErrorSource=!0,console.log(n)})},e.updateSource=function(n){t.updateConfig(e.ui.modifyId,a(e.newSource)).then(function(t){n||($("#creationsourceModal").modal("hide"),e.getAllSources())},function(e){console.log(e)})},e.runSyncNow=function(n){e.allSources[n].syncing=!0,t.syncNow(n).then(function(t){e.allSources[n].syncing=!1,e.allSources[n].startSync=!0,t.data.status?e.allSources[n].synced=!0:e.allSources[n].synced=!1},function(e){console.log(e)})},e.switchsourceModalTab=function(n){e.sourceModal.tab=n},e.openDeleteModal=function(n){e.ui.deleteId=n,$("#deleteModal").modal("show")},e.onOfSource=function(n,t){e.ui.modifyId=n,e.newSource=t,e.updateSource(!0)},e.updateDbType=function(){"mysql"==e.newSource.dbtype?e.newSource.port=e.sourcePortMap[e.newSource.dbtype]:delete e.newSource.port},e.deletePhonebookSource=function(){t.deleteConfig(e.ui.deleteId).then(function(n){$("#deleteModal").modal("hide"),e.getAllSources()},function(e){console.log(e)})},e.checkConnection=function(n){var s=a(n);n.isChecking=!0,e.sourceModal.querySelectProgress=!0,t.testConnections(s).then(function(t){e.sourceModal.querySelectProgress=!1,0!=t.data.status?(n.checked=!0,n.isChecking=!1,n.verified=!0,e.querySelect=t.data,e.slideUp("collapse-mappreview"),e.getSourceColumns(t.data[0],n)):(e.querySelect=[],n.checked=!0,n.isChecking=!1,n.verified=!1)},function(e){n.checked=!0,n.isChecking=!1,n.verified=!1,console.log(e)})},e.showCreationWizard=function(){$("#creationsourceModal").modal("show")},e.$on("$routeChangeSuccess",function(n,t,a){"views/apps/phonebook.html"===t.templateUrl&&(e.getDestColumns(),e.getAllSources())}),e.$on("loginCompleted",function(n,t){e.getDestColumns(),e.getAllSources()})}]),angular.module("nethvoiceWizardUiApp").service("PhonebookService",["$q","RestService",function(e,n){this.readFields=function(){return e(function(e,t){n.get("/phonebook/fields").then(function(n){e(n)},function(e){t(e)})})},this.testConnections=function(t){return e(function(e,a){n.post("/phonebook/test",t).then(function(n){e(n)},function(e){a(e)})})},this.readColumns=function(t){return e(function(e,a){n.post("/phonebook/getcolumns",t).then(function(n){e(n)},function(e){a(e)})})},this.createConfig=function(t){return e(function(e,a){n.post("/phonebook/config",t).then(function(n){e(n)},function(e){a(e)})})},this.readConfig=function(){return e(function(e,t){n.get("/phonebook/config").then(function(n){e(n)},function(e){t(e)})})},this.updateConfig=function(t,a){return e(function(e,s){n.post("/phonebook/config/"+t,a).then(function(n){e(n)},function(e){s(e)})})},this.deleteConfig=function(t){return e(function(e,a){n.delete("/phonebook/config/"+t).then(function(n){e(n)},function(e){a(e)})})},this.syncNow=function(t){return e(function(e,a){n.post("/phonebook/syncnow/"+t).then(function(n){e(n)},function(e){a(e)})})},this.uploadFile=function(t){return e(function(e,a){n.postfile("/phonebook/uploadfile",t).then(function(n){e(n)},function(e){a(e)})})}}]),angular.module("nethvoiceWizardUiApp").controller("DevicesModelsCtrl",["$scope","$filter","ModelService","ProvGlobalsService","$translate","$timeout",function(e,n,t,a,s,i){e.view.changeRoute=!0,e.inventoryModels=[],e.loadingModels={},e.loadingActions=!1,e.newModelSourceName="",e.newModelCustomName="",e.newModelShown=!1,e.newModelsErrors={newModelCustomNameEmpty:!1,newModelSourceEmpty:!1,apiError:!1},e.adminPw={showAdminPwWarning:!1};var o="",l=function(){t.getUsedModels().then(function(n){e.inventoryModels=n.data,e.view.changeRoute=!1,t.getModels().then(function(n){for(let t in n.data)n.data[t].name.split("-").length>2&&!e.inventoryModels.find(function(e){return e.name===n.data[t].name})&&e.inventoryModels.push(n.data[t])},function(e){console.log(e)})},function(n){e.view.changeRoute=!1,console.log(n)})};e.setCurrentModel=function(n){e.currentModel.name!=n?(e.loadingModels[n]=!0,e.buildModel(n).then(function(t){e.modelLdapTypeCheck(),setTimeout(function(){e.loadingModels[n]=!1,e.$apply()},1e3)},function(e){console.log(e)})):e.currentModel.hidden=!e.currentModel.hidden},e.checkCurrentModelChanged=function(n){e.currentModel?e.currentModel.name!=n?e.currentModel.changed?(o=n,$("#modelChangeConfirm").modal("show")):e.setCurrentModel(n):e.currentModel.hidden=!e.currentModel.hidden:e.setCurrentModel(n)},e.openDefaultSettings=function(){t.getDefaults().then(function(n){e.$parent.defaultSettings=n.data,e.$parent.storedDefaultSettings=angular.copy(n.data),e.connectivityCheck({host:n.data.hostname,scheme:n.data.provisioning_url_scheme}),e.ldapCheck(),e.loadingDefaults(),e.adminPw.origValue=n.data.adminpw,e.adminPw.showAdminPwWarning=!1,$("#defaultSettingsModal").modal("show"),setTimeout(function(){$("#defaultSettingsModal select").each(function(){$(this).hasClass("selectpicker")?$(this).selectpicker("refresh"):$(this).hasClass("combobox")&&$(this).combobox("refresh")})},500)},function(e){console.log(e)})},e.onModelSetContinue=function(){$("#modelChangeConfirm").modal("hide"),e.setCurrentModel(o)},e.createPhone=function(){t.addPhone({mac:"9C-75-14-14-23-34"}).then(function(e){},function(e){console.log(e)})},e.listPhones=function(){t.getPhones().then(function(e){},function(e){console.log(e)})},e.listModels=function(){t.getUsedModels().then(function(e){},function(e){console.log(e)})},e.showNewModelModal=function(){$("#newModelModal").modal("show"),e.newModelShown=!0};var r=function(){for(var n in e.newModelsErrors.apiError=void 0,e.newModelsErrors)1==e.newModelsErrors[n]&&(e.newModelsErrors[n]=!1)},c=function(n){e.loadingActions=n,setTimeout(function(){e.loadingActions=!1,e.$apply()},1e3)};e.createNewModel=function(){if(a=!1,""==e.newModelSourceName&&(e.newModelsErrors.newModelSourceEmpty=!0,a=!0),""==e.newModelCustomName&&(e.newModelsErrors.newModelCustomNameEmpty=!0,a=!0),!a){var a;r();var s=(e=>{let n,t="";for(let a=0;a<e.length;a++)t+=(n=e.charCodeAt(a))>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||45===n||46===n||95===n?e[a]:"_";return t})(e.newModelSourceName+"-"+e.newModelCustomName);e.loadingActions=!0,t.getModel(e.newModelSourceName).then(function(a){t.createModel({name:s,display_name:a.data.display_name+" - "+e.newModelCustomName,variables:a.data.variables}).then(function(n){$("#newModelModal").modal("hide"),e.newModelSourceName="",e.newModelCustomName="",l(),c("ok"),setTimeout(function(){e.checkCurrentModelChanged(s),$("#modelFromSelect").selectpicker("refresh")},1e3)},function(t){console.log(t),e.newModelsErrors.apiError=n("translate")("The model name is already registered"),c("err")})},function(n){console.log(n),e.newModelsErrors.apiError=n.data.title,c("err")})}},angular.element(document).ready(function(){l()}),$("#newModelModal").on("hidden.bs.modal",function(){r(),e.newModelSourceName="",e.newModelCustomName="",e.$apply(),setTimeout(function(){$("#modelFromSelect").selectpicker("refresh")},500)}),$("#newModelModal").on("changed.bs.select",function(){r(),e.newModelCustomName="",e.$apply()}),e.$on("reloadModels",function(){l()}),e.$on("$routeChangeStart",function(){e.view.changeRoute=!0,e.globalsUi=null,e.inventoryModels=null})}]),angular.module("nethvoiceWizardUiApp").controller("BulkdevicesCtrl",["$scope","$rootScope","$filter","$timeout","PhoneService","ModelService","UserService","ProfileService",function(e,n,t,a,s,i,o,l){e.models=[],e.phones=[],e.numFiltered=0,e.numSelected=0,e.view.changeRoute=!0,e.errors=[],e.errorId=0,e.phonesLimit=20;var r={id:0,display_name:t("translate")("Choose")+"..."};function c(){Promise.all([i.getModels(),o.list(!0),s.getPhones(),l.allGroups(),s.getDelayedReboot()]).then(function(e){b(e[0].data),g(e[1].data),m(e[2].data),v(e[3].data),p(e[4].data)},function(n){console.log(n),d(n.data,"Error retrieving data"),e.view.changeRoute=!1})}function d(n,t,a){n.i18nMessage=t,n.id=e.errorId,n.warning=a,e.errorId++,e.errors.push(n)}e.$watch("phones",function(n,t){e.numFiltered=0,e.numSelected=0,e.allSelectedSameVendor=null,e.allSelectedSameModel="",e.allSelectedSameReboot=void 0,e.somePhonesRegistered=!1,e.models=e.models.filter(function(e){return 0!==e.id}),e.phones.forEach(function(n){n.filtered&&e.numFiltered++,n.selected&&(e.numSelected++,null==e.allSelectedSameVendor&&n.vendor?e.allSelectedSameVendor=n.vendor:n.vendor===e.allSelectedSameVendor&&n.vendor||(e.allSelectedSameVendor=!1),""===e.allSelectedSameModel?e.allSelectedSameModel=n.model:n.model!==e.allSelectedSameModel&&(e.allSelectedSameModel=!1),void 0===e.allSelectedSameReboot?e.allSelectedSameReboot=n.delayedReboot:(e.allSelectedSameReboot&&n.delayedReboot&&n.delayedReboot.getTime()!==e.allSelectedSameReboot.getTime()||e.allSelectedSameReboot&&!n.delayedReboot||!e.allSelectedSameReboot&&n.delayedReboot)&&(e.allSelectedSameReboot=!1),!e.somePhonesRegistered&&n.registered&&(e.somePhonesRegistered=!0))})},!0),e.deleteError=function(n){e.errors=e.errors.filter(function(e){return e.id!==n})};var u=function(){var e=new Date;return e.setMinutes(5*Math.ceil(e.getMinutes()/5)),e.setSeconds(0),e.setMilliseconds(0),e};function p(n){e.phones.forEach(function(e){e.delayedReboot=null}),e.bulkDelayedReboot=u(),Object.keys(n).forEach(function(t){var a=n[t],s=e.phones.find(function(e){return e.mac===t});if(s){var i=new Date;i.setHours(a.hours),i.setMinutes(a.minutes),s.delayedReboot=i}})}function f(){s.getDelayedReboot().then(function(e){p(e.data)},function(e){console.log(e),d(e.data,"Error retrieving delayed reboot data")})}function m(n){e.filteredGroup=null,e.filteredModel=null,e.phones=[],n.forEach(function(n){var t=s.buildPhone(n,e.models,e.macVendors);t.filtered=!0,e.phones.push(t)}),e.phones.forEach(function(n){e.users.forEach(function(e){e.devices.forEach(function(t){t.mac===n.mac&&(n.user=e,n.registered=t.registered)})})}),e.view.changeRoute=!1}function g(n){n.forEach(function(e){e.devices.forEach(function(e){if(e.mac){var n=s.normalizeMacAddress(e.mac);e.mac=n}})}),e.users=n}function v(n){e.groups=n,e.users.forEach(function(e){!function(e){l.getUserGroup(e.id).then(function(n){e.groups=n.data},function(e){404!=e.status&&console.log(e)})}(e)})}function b(n){e.models=n}function h(e){var n=e.toString();return n.length>1?n:1==n.length?"0"+n:"00"}e.getPhones=function(){s.getPhones().then(function(e){m(e.data)},function(e){console.log(e),d(e.data,"Error retrieving phones")})},e.getUsers=function(){o.list(!0).then(function(e){g(e.data)},function(e){console.log(e),d(e.data,"Error retrieving users")})},e.getGroups=function(){l.allGroups().then(function(e){v(e.data)},function(e){console.log(e),d(e.data,"Error retrieving groups")})},e.clearFilters=function(){e.filteredGroup=null,e.filteredModel=null,e.filterPhones()},e.filterPhones=function(){var n=!1;(e.phonesLimit=appConfig.PHONES_PER_PAGE,$("#phone-list")[0].scrollTop=0,e.filteredGroup||e.filteredModel||(n=!0),e.phones.forEach(function(e){e.filtered=n,e.selected=!1}),e.filteredGroup||e.filteredModel)&&(e.filteredGroup?e.users.filter(function(n){return n.groups.includes(e.filteredGroup.id)}).forEach(function(n){n.devices.forEach(function(n){var t=e.phones.find(function(e){return e.mac===n.mac});t&&(e.filteredModel?t.model&&t.model.name===e.filteredModel.name&&(t.filtered=!0):t.filtered=!0)})}):e.phones.forEach(function(n){n.model&&n.model.name===e.filteredModel.name&&(n.filtered=!0)}))},e.getModels=function(){i.getModels().then(function(e){b(e.data)},function(e){console.log(e),d(e.data,"Error retrieving models")})},e.bulkModelSave=function(){var n=null;e.bulkModel&&(n=e.bulkModel.name);var t=[];e.phones.forEach(function(e){e.selected&&(t.push(s.setPhoneModel(e.mac,n)),t.push(o.setPhoneModel(e.mac,n)))}),Promise.all(t).then(function(n){e.getPhones()},function(e){console.log(e),d(e.data,"Error setting phone model")}),$("#bulkModelModal").modal("hide")},e.bulkDelayedRebootSave=function(){var n,t,a,i;e.bulkDelayedRebootSwitch||(e.bulkDelayedReboot=null),e.bulkDelayedReboot?(t=h(e.bulkDelayedReboot.getHours()),a=h(e.bulkDelayedReboot.getMinutes()),i={},e.phones.forEach(function(e){e.selected&&(i[e.mac]={hours:t,minutes:a})}),s.setPhoneReboot(i).then(function(e){var n=[];Object.keys(e.data).forEach(function(t){var a=e.data[t];204!==a.code&&(a.mac=t,n.push(a))}),n.length?(console.log(n),d(n[0],"Error setting delayed reboot on some phones",!0)):f()},function(e){console.log(e),d(e.data,"Error setting delayed reboot")})):(n=[],e.phones.forEach(function(e){e.selected&&n.push(e.mac)}),s.deletePhoneDelayedReboot(n).then(function(e){f()},function(e){console.log(e),d(e.data,"Error canceling delayed reboot")})),$("#bulkDelayedRebootModal").modal("hide")},e.toggleShowPhonesNotRebooted=function(){e.showPhonesNotRebooted=!e.showPhonesNotRebooted},e.bulkRebootNow=function(){var n={};e.showPhonesNotRebooted=!1,e.rebootNowInProgress=!0,e.phones.forEach(function(e){e.selected&&(n[e.mac]={})}),s.setPhoneReboot(n).then(function(n){e.phonesNotRebooted=[],Object.keys(n.data).forEach(function(t){var a=n.data[t];if(204!==a.code){console.log(a);var s=e.phones.find(function(e){return e.mac===t});e.phonesNotRebooted.push(s)}}),e.rebootNowInProgress=!1,e.showResultsRebootNow=!0,e.phonesNotRebooted.length||(e.hideRebootNowModalTimeout=a(function(){$("#reboot-now-modal").modal("hide")},2500))},function(n){console.log(n),e.rebootNowInProgress=!1,d(n.data,"Error rebooting phones"),$("#reboot-now-modal").modal("hide")})},e.showRebootNowModal=function(){e.showResultsRebootNow=!1,a.cancel(e.hideRebootNowModalTimeout),$("#reboot-now-modal").modal("show")},e.showSetModelModal=function(){e.allSelectedSameVendor?e.filteredModels=e.models.filter(function(n){return n.name.toLowerCase().startsWith(e.allSelectedSameVendor.toLowerCase())}):e.filteredModels=angular.copy(e.models),0!=e.allSelectedSameModel?e.bulkModel=e.allSelectedSameModel:(e.bulkModel=r,e.filteredModels.push(r)),$("#bulkModelModal").modal("show")},e.showSetRebootModal=function(){e.bulkDelayedReboot=e.allSelectedSameReboot,e.bulkDelayedReboot?e.bulkDelayedRebootSwitch=!0:(e.bulkDelayedRebootSwitch=!1,e.bulkDelayedReboot=u()),$("#bulkDelayedRebootModal").modal("show")},e.selectAllOrNoneToggle=function(){var n=null;n=e.numSelected!==e.numFiltered,e.phones.forEach(function(e){e.filtered&&(e.selected=n)})},n.$on("scrollingContainerView",function(){e.phones&&e.phones.length>e.phonesLimit&&(e.phonesLimit+=e.SCROLLPLUS)});document.addEventListener("bulkDevicesScroll",function(){e.$apply(function(){e.phonesLimit+=e.PHONES_PAGE})}),angular.element(document).ready(function(){e.macVendors?c():s.getMacVendors().then(function(n){e.$parent.macVendors=n.data,c()},function(e){console.log(e)})})}]),angular.module("nethvoiceWizardUiApp").directive("whenScrolled",function(){return function(e,n,t){var a=n[0];n.bind("scroll",function(){a.scrollTop+a.offsetHeight>=a.scrollHeight-100&&e.$apply(t.whenScrolled)})}}),angular.module("nethvoiceWizardUiApp").directive("showPassword",function(){return function(e,n,t){e.$watch(t.showPassword,function(e){e?n.attr("type","text"):n.attr("type","password")})}}),angular.module("nethvoiceWizardUiApp").controller("FileUploadCtrl",["$scope","ModelService","$filter","$rootScope",function(e,n,t,a){e.evt={draghover:!1},e.uploadingFiles={},e.uploadingError=!1,e.uploadingSuccess=!1,e.uploadingErrorMsg="",e.fileSelection=function(){document.querySelector("#dragArea input").click()},e.uploadProgress=function(e){console.log("UPLOAD PROGRESS: "+e)};var s=function(){e.uploadingErrorMsg="",e.uploadingError=!1,e.uploadingSuccess=!1};e.hideAlertDanger=function(){$("#uploadErrorAlert").hide()},e.showAlertDanger=function(){$("#uploadErrorAlert").show()};var i=function(){e.uploadingFiles={},e.uploadingSuccess=!0,document.querySelector("#dragArea input").value=""},o=function(n){e.uploadingErrorMsg=n.data.title,e.uploadingFiles={},e.uploadingError=!0,e.showAlertDanger(),document.querySelector("#dragArea input").value=""};e.fileUpload=function(a,l){if(s(),!function(e){return!!e.name.match(/^[a-zA-Z0-9\-_\.()]+$/g)}(a))return e.uploadingError=!0,e.showAlertDanger(),e.uploadingErrorMsg=t("translate")("upload_invalid_filename"),document.querySelector("#dragArea input").value="",void e.$apply();switch(function(n){let t={size:e.formatBytes(n.size),name:n.name};e.uploadingFiles[n.name]=t}(a),e.uploadVariable){case"firmware_file":n.uploadFirmware(a,l).then(function(n){e.reloadFirmwaresList(),i()},function(e){o(e),console.log(e)});break;case"ringtone_file":n.uploadRingtone(a,l).then(function(n){e.reloadRingtonesList(),i()},function(e){o(e),console.log(e)});break;case"background_file":n.uploadBackground(a,l).then(function(n){e.reloadBackgroundsList(),i()},function(e){o(e),console.log(e)});break;case"screensaver_file":n.uploadScreensaver(a,l).then(function(n){e.reloadScreensaversList(),i()},function(e){o(e),console.log(e)})}},e.fileDelete=function(t){switch(e.uploadVariable){case"firmware_file":n.deleteFirmware(t).then(function(n){e.reloadFirmwaresList(),e.uploadingFiles={}},function(n){e.uploadingFiles={},console.log(n)});break;case"ringtone_file":n.deleteRingtone(t).then(function(n){e.reloadRingtonesList(),e.uploadingFiles={}},function(n){e.uploadingFiles={},console.log(n)});break;case"background_file":n.deleteBackground(t).then(function(n){e.reloadBackgroundsList(),e.uploadingFiles={}},function(n){console.log(n),e.uploadingFiles={}});break;case"screensaver_file":n.deleteScreensaver(t).then(function(n){e.reloadScreensaversList(),e.uploadingFiles={}},function(n){console.log(n),e.uploadingFiles={}})}},e.$on("uploadModalHidden",function(){s()})}]),customElements.define("scrolling-sentinel",class extends HTMLElement{constructor(){var e,n;super(),this.observer=new IntersectionObserver(t=>{t[0].intersectionRatio<=0||(e=t[0].target.getAttribute("event"),n=new Event(e),document.dispatchEvent(n))}),this.observer.observe(this)}disconnectedCallback(){this.observer.unobserve(this)}}),angular.module("nethvoiceWizardUiApp").run(["$templateCache",function(e){e.put("views/admin.html","<p>This is the admin view.</p>"),e.put("views/admin/languages.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'languages\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'admin/languages\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Languages\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Languages settings\' | translate}}</h1> <div class="container-fluid col-xs-12 col-sm-12 col-md-6 col-lg-6 adjust-voip" ng-init="init()"> <div ng-show="onSaveSuccess" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Language saved\' | translate}}.</strong> {{\'System language saved with success\' | translate}} </div> <div ng-show="onSaveError" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Language error\' | translate}}</strong> {{\'System language installation error\' | translate}} </div> <h3>{{\'Set system language\' | translate}} <span ng-if="language" class="slim-weight">( {{\'current\' | translate}}: {{getLangName(currentLanguage)}} )</span></h3> <form class="form-horizontal" ng-submit="setDefaultPBXLanguage(language)"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Language\' | translate}}</label> <div class="col-sm-9"> <select title="-" pf-select="{ width: \'180px\' }" ng-model="language" ng-options="l as getLangName(l) for l in availableLangs track by l"> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label"></label> <div class="col-sm-9"> <button ng-disabled="language == currentLanguage" type="submit" class="col-md-2 btn btn-primary right-align">{{\'Set\' | translate}}</button> </div> </div> </form> <div ng-show="startInstallation"> <div class="progress-description"> <div ng-if="currentProgress < 100 && currentProgress != -1" class="spinner spinner-xs spinner-inline"></div> <span ng-if="currentProgress == 100" class="pficon pficon-ok"></span> <span ng-if="currentProgress == -1" class="pficon pficon-error-circle-o"></span> <span ng-if="currentProgress != -1"><strong>{{\'Installing\' | translate}}:</strong> {{\'system languages\' | translate}}</span> <span ng-if="currentProgress == -1"><strong>{{\'Error\' | translate}}:</strong> {{\'installation failed\' | translate}}</span> </div> <div class="progress progress-label-top-right"> <div class="progress-bar {{currentProgress == -1 ? \'progress-bar-danger\' : \'progress-bar-success\'}}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: {{currentProgress == -1 ? \'100\' : currentProgress}}%"> <span>{{currentProgress == -1 ? \'100\' : currentProgress}}%</span> </div> </div> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div>'),e.put("views/admin/report.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'report\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'admin/report\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Report\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Final report\' | translate}}</h1> <div class="container-fluid report-margin-top"> <button ng-click="generatePDF()" class="btn btn-primary btn-lg"> {{\'Print PDF report\' | translate}}</button> </div> <div class="list-group list-view-pf list-view-pf-view adjust-margin-extensions"> <div class="list-group-item" ng-repeat="user in users | filter:searchUsersString | limitTo: usersLimit"> <div popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="Password" ng-if="mode.isLdap" class="list-view-pf-actions"> <strong>{{user.password}}</strong> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-user list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div popover-placement="top-left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Extension\' | translate}}" class="list-group-item-heading"> {{user.default_extension}} </div> <div popover-placement="top-left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Username\' | translate}}" class="list-group-item-text"> <span>{{user.username}}</span> </div> </div> <div popover-placement="top-left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Fullname\' | translate}}" class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> {{user.displayname}} </div> </div> <div popover-placement="top-left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Voicemail Password\' | translate}}" class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> {{user.voicemailpwd}} </div> </div> </div> </div> </div> </div> </div> </div>'),e.put("views/admin/settings.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'settings\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'admin/settings\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Admin\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Settings\' | translate}}</h1> <div class="container-fluid col-xs-12 col-sm-12 col-md-6 col-lg-6 adjust-voip" ng-init="init()"> <div class="col-lg-12"> <div ng-show="onSaveSuccess" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Password changed\' | translate}}.</strong> {{\'Administrator password updated with success\' | translate}} </div> <div ng-show="onSaveError" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Password error\' | translate}}</strong> {{\'Administrator password update failed\' | translate}} </div> <div ng-show="wizard.isWizard && !passwordSaved" class="alert alert-warning"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Remember to save the password before continue" | translate}}.</strong> </div> </div> <div class="col-lg-12 mb-30"> <h3 class="settings-h3 fz-19 fw-300">{{\'Change Password\' | translate}}</h3> <form class="form-horizontal" ng-submit="create()"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Password\' | translate}}</label> <div class="col-sm-9"> <input type="password" ng-model="admin.password" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Confirm Password\' | translate}}</label> <div class="col-sm-9"> <input type="password" ng-model="admin.confirmPassword" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label"></label> <div class="col-sm-9"> <button type="submit" class="btn btn-primary right-align">{{\'Save Password\' | translate}}</button> </div> </div> </form> <div ng-show="conferenceUrlSuccess" class="alert alert-success alert-dismissable mt-25"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Videoconference URL successfully saved\' | translate}}.</strong> </div> <div ng-show="conferenceUrlError" class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{"Error while saving Videoconference URL" | translate}}.</strong> </div> <h3 class="settings-h3 fz-19 fw-300 mt-30">{{\'Videoconference\' | translate}}</h3> <div class="alert alert-info"> <span class="pficon pficon-info"></span> <strong> {{"Provide the Conference System URL provided by the supplier" | translate}}. </strong> <p> {{"Alternatively, you can enter the URL of any public Jitsi server, checking the conditions of use, compatibility with your privacy directives and the need for continuity of service" | translate}}. </p> </div> <form class="form-horizontal" ng-submit="saveConferenceUrl()"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Videoconference URL\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="conferenceUrl" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label"></label> <div class="col-sm-9"> <button type="submit" class="btn btn-primary right-align">{{\'Save URL\' | translate}}</button> </div> </div> </form> <div ng-show="onSettingsSaveSuccess" class="alert alert-success alert-dismissable mt-25"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'NAT settings saved\' | translate}}.</strong> {{\'NAT settings saved with success\' | translate}}. </div> <div ng-show="wizard.isWizard && !natSaved" class="alert alert-warning"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Remember to save the NAT settings before continue" | translate}}.</strong> </div> <h3 class="settings-h3 fz-19 fw-300 mt-30">{{\'NAT Settings\' | translate}}</h3> <form class="form-horizontal" ng-submit="openSaveNat()"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'External address\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="externalIp" class="form-control" required> </div> </div> <div ng-repeat="x in [].constructor(localNrFields) track by $index" class="form-group"> <label class="col-sm-3 control-label">{{$index == 0 ? "Reti locali" : "" | translate}}</label> <div class="col-sm-5 withslash"> <input type="text" ng-change="setLNnet()" ng-model="localNetworks[$index].net" class="form-control"> </div> <div class="col-sm-4"> <input type="text" ng-model="localNetworks[$index].mask" class="form-control"> </div> \x3c!-- <button ng-if="$last" type="button" ng-click="deleteField()" class="btn btn-default dln-btn">\n              {{\'Delete\' | translate}}\n            </button> --\x3e </div> <div class="form-group"> <label class="col-sm-3 control-label"></label> <div class="col-sm-9"> <button type="button" ng-click="addField()" class="btn btn-default">{{\'Add\' | translate}}</button> <button type="button" ng-if="localNrFields > 1" ng-click="deleteField()" class="btn btn-default">{{\'Delete\' | translate}}</button> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label"></label> <div class="col-sm-9"> <button type="submit" class="btn btn-primary right-align">{{\'Save NAT settings\' | translate}}</button> </div> </div> </form> <h3 class="settings-h3 fz-19 fw-300 mt-30">{{\'Firewall Settings\' | translate}}</h3> <div class="alert alert-info"> <span class="pficon pficon-info"></span> <strong>{{"External SIPS enables access to SIP TLS from external IPs (Port 5061 for SIPS, ports from 10000 to 20000 UDP for the audio, port 6061 for App access)" | translate}}.</strong> </div> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'External SIPS\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="sipTlsStatus" ng-change="toggleSipTls()" id="siptls-switch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </form> <h3 class="settings-h3 fz-19 fw-300 mt-35">{{\'Phonebook Settings\' | translate}}</h3> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'LDAP phonebook\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="phonebookjsStatus" ng-change="togglePhonebookjs()" id="phonebookjs-switch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'LDAPS phonebook\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="phonebookjssStatus" ng-change="togglePhonebookjss()" id="phonebookjss-switch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </form> <h3 class="settings-h3 fz-19 fw-300 mt-35">{{\'Phonebook Sources\' | translate}}</h3> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Rapid code PBX\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="rapidCodePbx" ng-change="toggleRapidCode()" id="rapidCodeSwitch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'PBX extensions\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="pbxExtensions" ng-change="togglePbxExtensions()" id="pbxExtensionsSwitch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'CTI public contacts\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="publicContactsPbx" ng-change="togglePublicContacts()" id="publicContactsSwitch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </form> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> \x3c!-- save confirm nat --\x3e <div class="modal fade" id="saveNat" tabindex="-1" role="dialog" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="nModelMLabel">{{"Save NAT settings" | translate}}</h4> </div> <form class="form-horizontal mt-10" ng-submit="saveNat()"> <div class="modal-body"> <div class="alert alert-warning"> <span class="pficon pficon-warning-triangle-o"></span> <strong> {{"Asterisk will be restarted and ongoing calls will be terminated" | translate}}. </strong> <p> {{"Are you sure" | translate}}? </p> </div> </div> <div ng-if="loadingNatAction == true" class="spinner spinner-sm adjust-margin loader-modal fz-18"></div> <span ng-if="loadingNatAction == \'ok\'" class="pficon pficon-ok adjust-margin loader-modal fz-18"></span> <span ng-if="loadingNatAction == \'err\'" class="pficon pficon-error-circle-o adjust-margin loader-modal fz-18"></span> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary" ng-disabled="loadingNatAction == true || loadingNatAction == \'ok\'"> {{\'Save\' | translate}} </button> </div> </form> </div> </div> </div>'),e.put("views/apps.html","<p>This is the apps view.</p>"),e.put("views/apps/bulkdevices.html",'<div class="wizard-pf-contents adjust-size no-margin-bottom"> <h1 class="control-label centered" for="textInput-markup"> {{ \'Bulk phones\' | translate }} </h1> <div class="container-fluid mg-top-20"> \x3c!-- toast messages --\x3e <div class="toast-notifications-list-pf"> <div ng-class="[\'toast-pf\', \'alert\', {\'alert-danger\': !error.warning }, { \'alert-warning\': error.warning }, \'alert-dismissable\', \'mg-bottom-5\']" id="error-{{error.id}}" ng-repeat="error in errors track by $index"> <button type="button" class="close" data-dismiss="error-{{error.id}}" ng-click="deleteError(error.id)" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span ng-class="[\'pficon\', { \'pficon-error-circle-o\': !error.warning }, { \'pficon-warning-triangle-o\': error.warning }]"></span> <strong ng-show="error.i18nMessage">{{ error.i18nMessage | translate }}.</strong> <span ng-show="error.message">{{ error.message }}.</span> <span ng-show="error.error">{{ error.error }}.</span> <span ng-show="error.title"><i>{{ error.title }}</i>.</span> </div> \x3c!-- success notification --\x3e <div class="toast-pf alert alert-success mg-bottom-5" ng-show="showSuccess"> <span class="pficon pficon-ok"></span> {{ successMessage | translate }} </div> </div> <div> \x3c!-- empty state --\x3e <div ng-show="phones.length == 0" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon pficon-add-circle-o"></span> </div> <h1> {{ \'No phone\' | translate }} </h1> <div class="blank-slate-pf-main-action"> <button class="btn btn-primary wizard-pf-open wizard-pf-add-phone" ng-click="goTo(\'devices/inventory\')">{{ \'Go to Phones page\' | translate }}</button> </div> </div> \x3c!-- filters --\x3e <div ng-show="phones.length != 0"> <div class="row mg-bottom-10"> <div class="col-sm-12 no-padding mg-bottom-6"> \x3c!-- filter by group combobox --\x3e <div class="filter"> <div>{{ \'Filter by group\' | translate }}</div> <select pf-select="{ noneSelectedText: \'\' }" class="width-240" ng-change="filterPhones()" ng-model="filteredGroup" ng-options="group.name for group in groups | orderBy:orderByValue"> <option value="">{{ \'All\' | translate }}</option> </select> </div> \x3c!-- filter by model combobox --\x3e <div class="filter"> <div>{{ \'Filter by model\' | translate }}</div> <select pf-select="{ noneSelectedText: \'\' }" class="width-240" data-live-search="true" data-size="5" ng-change="filterPhones()" ng-model="filteredModel" ng-options="model.display_name for model in models | orderBy:\'display_name\'"> <option value="">{{ \'All\' | translate }}</option> </select> </div> \x3c!-- clear filters --\x3e <a href="" ng-click="clearFilters()" class="card-pf-link-with-icon ng-binding mg-left-10 black"> <span class="pficon pficon-close"></span> {{ \'Clear filters\' | translate }} </a> </div> </div> \x3c!-- actions button --\x3e <div class="mg-bottom-15"> <button class="btn btn-lg btn-primary" ng-click="showSetModelModal()" ng-disabled="numSelected == 0 || !allSelectedSameVendor">{{ \'Set model\' | translate }}</button> <button class="btn btn-lg btn-primary" ng-click="showSetRebootModal()" ng-disabled="numSelected == 0">{{ \'Delayed reboot\' | translate }}</button> <button class="btn btn-lg btn-primary" ng-click="showRebootNowModal()" ng-disabled="numSelected == 0 || !somePhonesRegistered">{{ \'Reboot now\' | translate }}</button> </div> <div ng-show="numFiltered != 0"> \x3c!-- selection indicator --\x3e <label class="right-only"> {{ numSelected }} {{ \'of\' | translate }} {{ numFiltered }} {{ \'selected\' | translate }} </label> \x3c!-- select all checkbox --\x3e <input type="checkbox" ng-click="selectAllOrNoneToggle()" id="select-all-none-checkbox" ng-checked="numSelected === numFiltered"> <label for="select-all-none-checkbox">{{ \'Select all\' | translate }}</label> </div> \x3c!-- empty state for active filters --\x3e <div ng-show="numFiltered == 0" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-filter"></span> </div> <h1> {{ \'No phone\' | translate }} </h1> <p> {{ \'Please change or clear active filters\' | translate }} </p> </div> \x3c!-- phone list --\x3e <div class="list-group list-view-pf clear" ng-show="numFiltered != 0" id="phone-list"> <div class="list-group-item cursor-default {{phone.selected ? \'selected\' : \'\'}}" ng-repeat="phone in phones | limitTo: phonesLimit | orderBy: \'display_name\' | limitTo: phonesLimit" ng-show="phone.filtered"> <label for="checkbox-phone-{{$index}}" class="width-100p pointer"> <div class="list-view-pf-actions width-15p"> \x3c!-- reboot --\x3e <div> <span class="pficon pficon-restart mg-right-5"></span> <span class="adjust-weight">{{ \'Reboot\' | translate }}:</span> <b>{{ phone.delayedReboot ? (phone.delayedReboot | date:\'HH:mm\') : \'-\' }}</b> </div> <div> <span ng-class="[\'pficon\', \'mg-right-5\', { \'pficon-ok\': phone.registered, \'pficon-error-circle-o\': !phone.registered }]"></span> <span class="adjust-weight">{{ (phone.registered ? \'Registered\' : \'Not registered\') | translate }}</span> </div> </div> \x3c!-- checkbox --\x3e <div class="list-view-pf-checkbox"> <input type="checkbox" ng-model="phone.selected" id="checkbox-phone-{{$index}}"> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading adjust-weight"> <div> {{ phone.vendor ? phone.vendor : \'-\'}} </div> <div> <b>{{ phone.mac }}</b> </div> </div> <div class="list-group-item-text width-55p"> \x3c!-- model --\x3e <div class="line-height-normal"> <span class="fa fa-phone mg-right-5"></span> <span class="adjust-weight">{{ \'Model\' | translate }}:</span> <b>{{ phone.model ? phone.model.display_name : \'-\' }}</b> </div> \x3c!-- user --\x3e <div class="line-height-normal"> <span class="fa fa-user mg-right-5"></span> <span class="adjust-weight">{{ \'User\' | translate }}:</span> <b>{{ phone.user ? phone.user.displayname : \'-\' }}</b> </div> </div> </div> </div> </div></label> </div> <scrolling-sentinel event="bulkDevicesScroll"></scrolling-sentinel> </div> </div> \x3c!-- set model modal --\x3e <div class="modal fade" id="bulkModelModal" tabindex="-1" role="dialog" aria-labelledby="bulkModelModalLabel" aria-hidden="true" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="bulkModelModalLabel">{{ \'Set model\' | translate }}</h4> </div> <form class="form-horizontal" ng-submit="bulkModelSave()"> <div class="modal-body"> \x3c!-- bulk notification --\x3e <div class="alert alert-info"> <span class="pficon pficon-info"></span> <span>{{ \'This change will be applied to\' | translate }} <b>{{ numSelected }} {{ numSelected > 1 ? (\'phones\' | translate) : (\'phone\' | translate) }}</b></span>. </div> \x3c!-- bulk model --\x3e <div class="form-group"> <label class="col-sm-4 control-label">{{ \'Model\' | translate }}</label> <div class="col-sm-6"> <select class="form-control" pf-select="{ noneSelectedText: \'-\' }" ng-model="bulkModel" ng-options="model.display_name for model in filteredModels | orderBy: \'id\'"> <option value="">-</option> </select> </div> </div> </div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ \'Cancel\' | translate }}</button> <button type="submit" class="btn btn-primary" ng-disabled="bulkModel.id === 0">{{ \'Save\' | translate }}</button> </div> </form></div>  </div> </div> </div> \x3c!-- set reboot modal --\x3e <div class="modal fade" id="bulkDelayedRebootModal" tabindex="-1" role="dialog" aria-labelledby="bulkDelayedRebootModalLabel" aria-hidden="true" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="bulkDelayedRebootModalLabel">{{ \'Delayed reboot\' | translate }}</h4> </div> <form class="form-horizontal" ng-submit="bulkDelayedRebootSave()"> <div class="modal-body"> \x3c!-- bulk notification --\x3e <div class="alert alert-info"> <span class="pficon pficon-info"></span> <span>{{ \'This change will be applied to\' | translate }} <b>{{ numSelected }} {{ numSelected > 1 ? (\'phones\' | translate) : (\'phone\' | translate) }}</b>. {{ \'Only phones with an extension registered will be successfully rebooted\' | translate }}</span>. </div> \x3c!-- bulk reboot switch --\x3e <div class="form-group"> <label class="col-sm-4 control-label">{{ \'Enable delayed reboot\' | translate }}</label> <div class="col-sm-6"> <input bs-switch ng-model="bulkDelayedRebootSwitch" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> \x3c!-- bulk reboot time --\x3e <div class="form-group"> <label class="col-sm-4 control-label pad-top-25">{{ \'Reboot time\' | translate }}</label> <div class="col-sm-5"> <div uib-timepicker ng-model="bulkDelayedReboot" ng-change="changed()" show-meridian="false" ng-disabled="!bulkDelayedRebootSwitch" minute-step="5" required></div> </div> </div> </div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ \'Cancel\' | translate }}</button> <button type="submit" class="btn btn-primary" ng-disabled="bulkDelayedRebootSwitch && !bulkDelayedReboot">{{ \'Save\' | translate }}</button> </div> </form></div>  </div> </div> \x3c!-- reboot now modal --\x3e <div class="modal fade" id="reboot-now-modal" tabindex="-1" role="dialog" aria-labelledby="rebootNowModal" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title"> {{ \'Reboot now\' | translate }} </h4> </div> <div class="modal-body"> <form class="form-horizontal"> \x3c!-- loader --\x3e <div ng-show="rebootNowInProgress" class="centered"> <div class="spinner"></div> </div> <div ng-show="!rebootNowInProgress"> \x3c!-- confirmation --\x3e <div ng-show="!showResultsRebootNow"> <div class="alert alert-warning alert-dismissable"> <span class="pficon pficon-warning-triangle-o"></span> <p> <strong>{{ \'You are about to reboot\' | translate }} {{ numSelected }} {{ numSelected > 1 ? (\'phones\' | translate) : (\'phone\' | translate) }}. </strong> </p> <p> {{ \'Only phones with an extension registered will be successfully rebooted\' | translate }}. </p> <p> {{ \'Are you sure\' | translate }}? </p> </div> </div> \x3c!-- reboot results --\x3e <div ng-show="showResultsRebootNow"> \x3c!-- success --\x3e <div ng-show="phonesNotRebooted.length == 0" class="alert alert-success"> <span class="pficon pficon-ok"></span> <span> {{ \'Reboot command was sent successfully\' | translate }} </span> </div> \x3c!-- errors --\x3e <div ng-show="phonesNotRebooted.length != 0" class="alert alert-warning alert-dismissable"> <span class="pficon pficon-warning-triangle-o"></span> <p> <strong>{{ \'Warning\' | translate }}:</strong> {{ \'Some phones could not be rebooted\' | translate }} </p> <legend class="fields-section-header-pf col-sm-1 toggle-legend" aria-expanded="true"> <span ng-class="[\'fa\', \'fa-angle-right\', \'field-section-toggle-pf\', { \'fa-angle-down\': showSuccessfullyAddedPhones }]" ng-click="toggleShowPhonesNotRebooted()"> </span> <a class="field-section-toggle-pf" ng-click="toggleShowPhonesNotRebooted()">{{ \'Show\' | translate }}</a> </legend> <div ng-show="showPhonesNotRebooted" class="toggle-legend-list"> <ul> <li ng-repeat="phone in phonesNotRebooted"> <span class="mg-right-5"><b>{{ phone.mac }}</b></span> <span ng-show="phone.model">{{ phone.model.display_name }}</span> <span ng-show="!phone.model && phone.vendor">{{ phone.vendor }}</span> </li> </ul> </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <div ng-show="!showResultsRebootNow && !rebootNowInProgress"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ \'Cancel\' | translate }}</button> <button type="submit" class="btn btn-primary" ng-click="bulkRebootNow()"> {{ \'Reboot now\' | translate }} </button> </div> <div ng-show="showResultsRebootNow"> <button type="button" class="btn btn-primary" data-dismiss="modal">{{ \'Close\' | translate }}</button> </div> </div> </div> </div> </div> </div> </div>'),e.put("views/apps/bulkextensions.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'bulkextensions\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'apps/bulkextensions\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'Bulk extensions\' | translate}}</span> </a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size no-margin-bottom"> <h1 class="control-label centered" for="textInput-markup">{{\'Bulk extensions configuration\' | translate}}</h1> <div ng-if="!(users | isEmpty)" class="container-fluid"> <div class="row bulk-margin-top"> <div class="col-sm-9 no-padding"> <div class="filter-label-bulk">{{\'Select\' | translate}}:</div> <div class="dropdown inline-display"> <button class="btn btn-default dropdown-toggle drd-button" type="button" id="dropdownMenu1" data-toggle="dropdown"> <span class="filter-option pull-left"> - </span> <span class="caret drd-carret"></span> </button> <ul class="dropdown-menu drd-ul" role="menu" aria-labelledby="dropdownMenu1"> <li> <a ng-click="selectAll(true)">{{\'All\' | translate}}</a> </li> <li> <a id="intervalButton" data-toggle="modal" data-target="#setInterval">{{\'Interval\' | translate}}</a> </li> <li ng-if="!(allGroups | isEmpty)" class="divider"></li> <li ng-repeat="group in allGroups"> <a ng-click="selectGroup(group.id)">{{\'Group\' | translate}} {{group.name}}</a> </li> <li ng-if="!(allGroups | isEmpty)" class="divider"></li> <li> <a ng-click="selectAll(false)">{{\'None\' | translate}}</a> </li> </ul> </div> <button ng-disabled="num.selected < 1" ng-click="initEditModal()" class="btn btn-default inline-display"> {{\'Edit\' | translate}} </button> </div> <div class="col-sm-3 label-selected-bulk no-padding"> <strong>{{num.selected}}</strong> {{\'of\' | translate}} <strong>{{num.tot}}</strong> {{\'selected\' | translate}} </div> </div> <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="search.string" type="text" class="form-control input-lg" placeholder="{{\'Search users\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <div class="check-results"> <a ng-if="(search.string  + \'\').length >= 2 && (users | filter:search.string) != \'\' && !search.result" ng-click="selectResults(search.string)"> {{\'Select search results\' | translate}}</a> <a ng-if="(search.string  + \'\').length >= 2 && (users | filter:search.string) != \'\' && search.result" ng-click="selectResults(search.string)"> {{\'Deselect search results\' | translate}}</a> </div> <div class="form-group config-row-button"> </div> <div class="list-group list-view-pf list-view-pf-view adjust-margin-extensions margin-bottom-lg"> <div ng-if="user.default_extension !== \'none\'" class="list-group-item {{user.selected == true ? \'selected\' : \'\'}}" ng-repeat="user in users | customFilterMultiple:\'displayname,username,default_extension\':search.string | orderBy:\'user.username\' | limitTo: usersLimit" ng-click="selectUser(user)"> <div class="list-view-pf-actions {{user.alreadyExists ? \'has-error\' : \'\'}}"> <div ng-show="user.isInAction" class="spinner spinner-sm adjust-margin"></div> <span ng-show="!user.isInAction" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{user.default_extension === \'none\' ? \'Not configured\' : \'Configured\' | translate}}" class="pficon {{user.default_extension === \'none\' ? \'pficon-info\' : \'pficon-ok\'}} icon-med"></span> <span ng-if="user.alreadyExists" class="help-block">{{\'Extension already in use\' | translate}}</span> </div> <div class="list-view-pf-checkbox"> <input type="checkbox" ng-click="user.selected == true ? user.selected = false : user.selected = true" ng-model="user.selected" ng-disabled="user.default_extension === \'none\'"> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-user list-view-pf-icon-sm {{user.default_extension === \'none\' ? \'disabled\' : \'\'}}"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading {{user.default_extension === \'none\' ? \'disabled\' : \'\'}}">{{user.username}}</div> <div class="list-group-item-text"> <span class="{{user.default_extension === \'none\' ? \'disabled\' : \'\'}}">{{user.displayname}}</span> </div> </div> <div class="list-view-pf-additional-info"> <div ng-if="user.default_extension === \'none\'" class="list-view-pf-additional-info-item {{user.alreadyExists ? \'has-error\' : \'\'}}"> <form class="full-size" ng-submit="setMainExtension(user)"> <input ng-model="user.temp_ext" type="text" class="form-control" id="filter" placeholder="{{\'Insert extension\' | translate}}"> </form> <div class="input-group-btn"> <button ng-click="setMainExtension(user)" type="button" class="btn btn-default" aria-haspopup="true" aria-expanded="false">{{\'Add\' | translate}}</button> </div> </div> <div ng-if="user.default_extension !== \'none\'" class="list-view-pf-additional-info-item"> <b> {{user.default_extension}} </b> </div> </div> </div> </div> </div> </div> </div> <div ng-if="users | isEmpty" class="blank-slate-pf bulk-margin-top"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'No users found\' | translate}} </h1> <p ng-if="!mode.isLdap"> {{\'Check your LDAP or Active Directory settings\' | translate}} </p> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> <div class="modal fade" id="bulkEdit" tabindex="-1" role="dialog" aria-labelledby="bulkEditLabel" aria-hidden="true" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="bulkEditLabel">{{\'Edit selected extensions\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="bulkEditSave()"> <div class="modal-body"> <div class="alert alert-info"> <span class="pficon pficon-info"></span> <strong>{{\'Locked fields will be left untouched\' | translate}}.</strong> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-profile-bulk">{{\'Profile\' | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <div class="dropdown inline-display imp-full-size-max"> <select ng-disabled="bulkEdit.profile === null" class="dropdown inline-display imp-full-size-max editProfile" aria-labelledby="textInput-profile-bulk" title="{{bulkEdit.profile !== null && checkSame() ? bulkEdit.profile : bulkEdit.profile !== null && !checkSame() ? \'Choose the profile\' : \'This field will be left untouched\' | translate}}" pf-select="{ width: \'100%\' }" ng-model="bulkEdit.profile" ng-options="p.id as p.name | translate for p in profiles"> </select> </div> <span ng-click="bulkEdit.profile === null ? lock(\'enable\', \'profile\') : lock(\'disable\', \'profile\')" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.profile === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit.profile === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-callWaiting-bulk">{{\'Call waiting\' | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <div class="dropdown inline-display imp-full-size-max"> <button ng-disabled="bulkEdit.callwaiting === null" class="btn btn-default dropdown-toggle drd-button imp-full-size-max" type="button" id="textInput-callWaiting-bulk" data-toggle="dropdown"> <span class="filter-option pull-left"> {{bulkEdit.callwaiting === true ? \'Enabled\' : bulkEdit.callwaiting === false ? \'Disabled\' : bulkEdit.callwaiting === null ? \'This field will be left untouched\' : \'-\' | translate}} </span> <span class="caret drd-carret"></span> </button> <ul class="dropdown-menu drd-ul imp-full-size-max" role="menu" aria-labelledby="textInput-callWaiting-bulk"> <li> <a ng-click="bulkEdit.callwaiting = true">{{\'Enabled\' | translate}}</a> </li> <li> <a ng-click="bulkEdit.callwaiting = false">{{\'Disabled\' | translate}}</a> </li> </ul> </div> <span ng-click="bulkEdit.callwaiting === null ? lock(\'enable\', \'callwaiting\') : lock(\'disable\', \'callwaiting\')" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.callwaiting === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit.callwaiting === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-ringingtime-bulk">{{\'Ringing time\' | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <input required placeholder="{{ bulkEdit.ringtime === null ? \'This field will be left untouched \' : \'\' | translate}}" ng-disabled="bulkEdit.ringtime === null" ng-model="bulkEdit.ringtime" popover-placement="top-left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.ringtime === 0 ? \'0 = infinite\' : \'\' | translate}}" type="number" class="standardFont form-control" id="textInput-ringingtime-bulk" min="0" max="120"> <span ng-click="bulkEdit.ringtime === null ? lock(\'enable\', \'ringtime\') : lock(\'disable\', \'ringtime\')" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.ringtime === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit.ringtime === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-callgroup-bulk">{{\'Call Groups\' | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <input placeholder="{{ bulkEdit.callgroup === null ? \'This field will be left untouched \' : \'\' | translate}}" ng-disabled="bulkEdit.callgroup === null" ng-model="bulkEdit.callgroup" type="text" id="textInput-callgroup-bulk" class="standardFont form-control"> <span ng-click="bulkEdit.callgroup === null ? lock(\'enable\', \'callgroup\') : lock(\'disable\', \'callgroup\')" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.callgroup === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit.callgroup === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-pickupgroup-bulk">{{\'Pickup Groups\' | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <input placeholder="{{ bulkEdit.pickupgroup === null ? \'This field will be left untouched \' : \'\' | translate}}" ng-disabled="bulkEdit.pickupgroup === null" ng-model="bulkEdit.pickupgroup" type="text" id="textInput-pickupgroup-bulk" class="standardFont form-control"> <span ng-click="bulkEdit.pickupgroup === null ? lock(\'enable\', \'pickupgroup\') : lock(\'disable\', \'pickupgroup\')" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.pickupgroup === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit.pickupgroup === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-outboundcid-bulk">{{\'Outbound CID\' | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <div class="dropdown inline-display imp-full-size-max"> <button ng-disabled="bulkEdit.outboundcid === null" class="btn btn-default dropdown-toggle drd-button imp-full-size-max" type="button" id="textInput-outboundcid-bulk" data-toggle="dropdown"> <span class="filter-option pull-left"> {{bulkEdit.outboundcid === \'fixed\' ? \'Fixed\' : bulkEdit.outboundcid === \'variable\' ? \'Variable\' : bulkEdit.outboundcid === null ? \'This field will be left untouched\' : \'-\' | translate}} </span> <span class="caret drd-carret"></span> </button> <ul class="dropdown-menu drd-ul imp-full-size-max" role="menu" aria-labelledby="textInput-outboundcid-bulk"> <li> <a ng-click="bulkEdit.outboundcid = \'fixed\'">{{\'Fixed\' | translate}}</a> </li> <li> <a ng-click="bulkEdit.outboundcid = \'variable\'">{{\'Variable\' | translate}}</a> </li> </ul> </div> <span ng-click="bulkEdit.outboundcid === null ? lock(\'enable\', \'outboundcid\') : lock(\'disable\', \'outboundcid\')" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit.outboundcid === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit.outboundcid === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div ng-if="bulkEdit.outboundcid"> <div ng-if="bulkEdit.outboundcid == \'fixed\'"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-didnumber-bulk">{{\'CID Root\' | translate}}</label> <div class="col-sm-9"> <div class="input-group imp-full-size-max right-padding"> <input pattern="^(\\d+)$" type="text" ng-model="bulkEdit.outboundcid_fixed" id="textInput-didnumber-bulk" class="form-control"> </div> </div> </div> </div> <div ng-if="bulkEdit.outboundcid == \'variable\'"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-didroot-bulk">{{\'CID Root\' | translate}}</label> <div class="col-sm-9"> <div class="input-group imp-full-size-max right-padding"> <input pattern="^(\\d+)$" type="text" ng-model="bulkEdit.outboundcid_fixed" id="textInput-didroot-bulk" class="form-control"> </div> </div> </div> <label class="col-sm-3 control-label" for="textInput-didvariable-bulk"></label> <div id="digitsWarning" class="col-sm-9"> <div class="alert alert-info"> <span class="pficon pficon-info"></span> <strong class="ng-binding">{{"Enter the number of digits of the extension to be queued at the root to obtain the Outbound CID" | translate}}.</strong> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-didvariable-bulk">{{\'Digits number\' | translate}}</label> <div class="col-sm-9"> <div class="input-group imp-full-size-max right-padding"> <input pattern="^(\\d+)$" type="text" ng-model="bulkEdit.outboundcid_variable" id="textInput-didvariable-bulk" class="form-control"> </div> </div> </div> </div> </div> \x3c!-- <div class="form-group">\n            <button class="btn btn-default" type="button"><i class="fa fa-lock"></i></button>\n          </div>\n          <div class="form-group">\n            <label class="col-sm-3 control-label" for="textInput-directdidmodule-bulk">{{\'Direct did module\' | translate}}</label>\n            <div class="col-sm-9">\n              <input type="checkbox" bs-switch ng-model="bulkEdit.directdidmodule" class="bootstrap-switch bootstrap-switch-permission" id="textInput-directdidmodule-bulk"></div>\n          </div>\n          <div class="form-group">\n            <label class="col-sm-3 control-label" for="textInput-directdidroot-bulk">{{\'Direct did root\' | translate}}</label>\n            <div class="col-sm-9">\n              <input ng-model="bulkEdit.directdid.root" type="text" id="textInput-directdidroot-bulk" class="form-control"></div>\n          </div>\n          <div class="form-group">\n            <label class="col-sm-3 control-label" for="textInput-directdidvariable-bulk">{{\'Direct did variable\' | translate}}</label>\n            <div class="col-sm-9">\n              <input ng-model="bulkEdit.directdid.variable" type="text" id="textInput-directdidvariable-bulk" class="form-control"></div>\n          </div>--\x3e <div class="form-divider-row"> <span class="fa {{temp.advancedOptions == true ? \'fa-angle-down\' : \'fa-angle-right\'}}"></span> <a class="inline-display form-divider-string" ng-click="temp.advancedOptions == true ? temp.advancedOptions = false : temp.advancedOptions = true">{{temp.advancedOptions == true ? \'Hide advanced options\' : \'Show advanced options\' | translate}}</a> <hr class="inline-hr"> </div> <div ng-show="temp.advancedOptions" id="bulk-advanced-options"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-pickupgroup-bulk"> </label> <div class="col-sm-9"> <div class="input-group"> <strong>{{"Optional destinations" | translate}}:</strong> </div> </div> </div> <div ng-repeat="(destKey, destVal) in selectDest"> <div class="form-group"> <label class="col-sm-3 control-label" for="selectInput-{{destKey}}-bulk" title="{{destVal.label + \' destination\' | translate}}">{{destVal.label | translate}}</label> <div class="col-sm-9"> <div class="input-group"> <div class="dropdown inline-display imp-full-size-max"> <button ng-disabled="bulkEdit[destKey] === null" class="btn btn-default dropdown-toggle drd-button imp-full-size-max" type="button" id="selectInput-{{destKey}}-bulk" data-toggle="dropdown"> <span class="filter-option pull-left {{bulkEdit[destKey] === null ? \'\' : \'\'}}"> {{bulkEdit[destKey] === null ? \'This field will be left untouched\' : selectDest[destKey].key ? selectDest[destKey].key : \'Unavail Voicemail if Enabled\' | translate}} </span> <span class="caret drd-carret"></span> </button> <ul class="dropdown-menu drd-ul imp-full-size-max" role="menu" aria-labelledby="textInput-contest-bulk"> <li> <a ng-click="resetDest(destKey, \'\')">{{"Unavail Voicemail if Enabled" | translate}}</a> </li> <li ng-repeat="(k, v) in dest" ng-if="!isEmptyObj(v)"> <a ng-click="setDest(k, v, destKey)">{{k | translate}}</a> </li> </ul> </div> <span ng-click="bulkEdit[destKey] === null ? lockDests(\'enable\', destKey) : lockDests(\'disable\', destKey)" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{bulkEdit[destKey] === null ? \'Unlock field\' : \'Lock field\' | translate}}" class="input-group-addon btn btn-default"> <span class="fa {{bulkEdit[destKey] === null ? \'fa-lock\' : \'fa-unlock-alt\'}}"></span> </span> </div> </div> </div> <div ng-if="!(selectDest[destKey].value | isEmpty) && bulkEdit[destKey] != null" class="form-group"> <label class="col-sm-3 control-label" for="selectInput-{{destKey}}item-bulk"> </label> <div class="col-sm-9"> <div class="dropdown inline-display imp-full-size-max right-padding"> <button class="btn btn-default dropdown-toggle drd-button imp-full-size-max" type="button" id="selectInput-{{destKey}}item-bulk" data-toggle="dropdown"> <span class="filter-option pull-left"> {{selectDest[destKey].selected ? selectDest[destKey].selected : selectDest[destKey].value[0].description | translate}} </span> <span class="caret drd-carret"></span> </button> <ul class="dropdown-menu drd-ul imp-full-size-max" role="menu" aria-labelledby="textInput-contest-bulk"> <li ng-repeat="(k, v) in selectDest[destKey].value" ng-if="k != \'99999\'"> <a ng-click="setDestVal(k, destKey)">{{v.description | translate}}</a> </li> </ul> </div> </div> </div> </div> </div> </div> <div ng-show="temp.onsave" class="spinner spinner-sm adjust-margin loader-modal"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" ng-click="closeEditModal()">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </form> </div> </div> </div> <div class="modal fade" id="setInterval" tabindex="-1" role="dialog" aria-labelledby="intervalButton" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="setIntervalLabel">{{\'Interval\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="selectInterval()"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="frominterval-modal-markup">{{\'From\' | translate}}</label> <div class="col-sm-9"> <input ng-model="interval.from" type="number" id="frominterval-modal-markup" class="form-control" min="0"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="tointerval-modal-markup">{{\'To\' | translate}}</label> <div class="col-sm-9"> <input ng-model="interval.to" type="number" id="tointerval-modal-markup" class="form-control" min="0"> </div> </div> </div> <div ng-show="onSave" class="spinner spinner-sm adjust-margin loader-modal"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </form> </div> </div> </div>'),e.put("views/apps/cards.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'cards\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'apps/cards\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Customer cards\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Customer cards configuration\' | translate}}</h1> \x3c!-- WIZARD --\x3e <div ng-if="(allSources | isEmpty) && (allTemplates | isEmpty) && (allCards | isEmpty)" class="blank-slate-pf costumer-cards-margin-top"> <div class="blank-slate-pf-icon"> <span class="fa fa-calendar-o"></span> </div> <h1> {{\'No customer cards found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#newSourceModal" class="btn btn-primary btn-lg">{{\'Create new card\' | translate}}</button> </div> </div> \x3c!-- END WIZARD --\x3e \x3c!-- SOURCES --\x3e <h3 ng-if="!(allSources | isEmpty)" class="costumer-cards-margin-top">{{\'Sources\' | translate}}</h3> <div ng-if="onSaveSuccessSource" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Source saved\' | translate}}.</strong> {{\'Source saved with success\' | translate}} </div> <div ng-if="onSaveErrorSource" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Source not saved\' | translate}}.</strong> {{\'Source saving error\' | translate}} </div> <div ng-if="!(allSources | isEmpty)" class="row row-cards-pf adjust-card"> <div ng-repeat="g in allSources track by $index | orderBy:\'name\'" class="col-xs-12 col-sm-6 col-md-4 col-lg-4"> <div id="accordion-markup-{{g.id}}" class="card-pf"> <div data-toggle="collapse" data-parent="#accordion-markup-{{g.id}}" href="#collapse-{{g.id}}"> <h2 class="card-pf-title pointer"> <span class="pficon pficon-volume"></span> {{g.name}} <span class="right-only small-font">{{getDBName(g.type)}} <span class="fa fa-sort-desc"></span> </span> </h2> </div> <div class="card-pf-body card-body-small-bottom"> <div id="collapse-{{g.id}}" class="panel-collapse collapse"> <div class="progress-description full-size-max"> {{\'Database address\' | translate}} <span class="right-only"><strong>{{g.host}}</strong></span> </div> <div class="progress-description full-size-max"> {{\'Database port\' | translate}} <span class="right-only"><strong>{{g.port}}</strong></span> </div> <div class="progress-description full-size-max"> {{\'Database user\' | translate}} <span class="right-only"><strong>{{g.user}}</strong></span> </div> <div class="progress-description full-size-max"> {{\'Database password\' | translate}} <span class="right-only"><strong>{{g.showPass ? g.pass : \'*****\'}}</strong> <a ng-click="togglePass(g)">{{g.showPass ? \'Hide\' : \'Show\' | translate}}</a></span> </div> </div> <div class="progress progress-xs progress-label-top-right"> <div class="progress-bar progress-bar-{{g.verified ? \'success\' : \'danger\'}}" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%" data-toggle="tooltip" title="100% Used"> </div> <span>{{g.verified ? \'Connected\' : \'Connection error\' | translate}}</span> </div> </div> <div class="card-pf-footer"> <div class="card-pf-time-frame-filter"> <div ng-show="g.onSave" class="spinner spinner-sm adjust-margin spinner-right"></div> </div> <p> <button data-toggle="modal" data-target="#newSourceModal" ng-click="modifySource(g)" class="btn btn-primary" type="button">{{\'Modify\' | translate}}</button> <button ng-click="checkSourceDeps(g)" class="btn btn-danger" type="button">{{\'Delete\' | translate}}</button> </p> </div> </div> </div> </div> <button ng-click="cancelSource()" ng-if="!(allSources | isEmpty)" data-toggle="modal" data-target="#newSourceModal" class="btn btn-primary btn-lg right-only">{{\'Create new source\' | translate}}</button> <div ng-if="(allSources | isEmpty) && !((allSources | isEmpty) && (allTemplates | isEmpty) && (allCards | isEmpty))" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-volume"></span> </div> <h1> {{\'No sources found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button ng-click="cancelSource()" data-toggle="modal" data-target="#newSourceModal" class="btn btn-primary btn-lg">{{\'Create new source\' | translate}}</button> </div> </div> \x3c!-- END SOURCES --\x3e <div ng-if="!((allSources | isEmpty) && (allTemplates | isEmpty) && (allCards | isEmpty))" class="divider"></div> \x3c!-- TEMPLATES --\x3e <h3 ng-if="!(allTemplates | isEmpty)">{{\'Templates\' | translate}}</h3> <div ng-if="onSaveSuccessTemplate" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Template saved\' | translate}}.</strong> {{\'Template saved with success\' | translate}} </div> <div ng-if="onSaveErrorTemplate" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Template not saved\' | translate}}.</strong> {{\'Template saving error\' | translate}} </div> <div ng-if="!(allTemplates | isEmpty)" class="row row-cards-pf adjust-card"> <div ng-repeat="g in allTemplates track by $index | orderBy:\'-name\'" class="col-xs-12 col-sm-6 col-md-4 col-lg-4"> <div id="accordion-template-{{$index}}" class="card-pf"> <h2 class="card-pf-title"> <span class="pficon pficon-blueprint"></span> {{g.name}} <span ng-if="!g.custom" class="right-only small-font right"> <span class="pficon pficon-thumb-tack-o"></span> {{\'default\'}} </span> </h2> <div class="card-pf-body"> <div ng-if="g.custom" class="progress-description full-size-max"> <div ng-click="setTemplatePreview(g)" class="pointer" data-toggle="collapse" data-parent="#accordion-template-{{$index}}" href="#collapse-template-{{$index}}"> {{\'Preview\' | translate}} </div> <div id="collapse-template-{{$index}}" class="panel-collapse collapse"> <div> <iframe class="editor-preview-list" src="{{\'data:text/html;base64,\' + (g.html | ejsRender:g.objects:g.name | toBase64) | trustUrl}}"></iframe> </div> </div> \x3c!--<div readonly class="editor-template" ng-model="g.html" ui-ace="{theme:\'twilight\', mode: \'html\'}"></div>--\x3e </div> <div ng-if="!g.custom" class="progress-description full-size-max"> <span>{{\'Color\' | translate}}</span> <span class="inline-color"> <span class="cube-color-{{g.color}}"></span> </span> </div> </div> <div class="card-pf-footer"> <div class="card-pf-time-frame-filter"> <div ng-show="g.onSave" class="spinner spinner-sm adjust-margin spinner-right"></div> </div> <p> <button data-toggle="modal" data-target="#newTemplateModal" ng-click="modifyTemplate(g)" class="btn btn-primary" type="button">{{\'Modify\' | translate}}</button> <button ng-if="g.custom" ng-click="checkTemplateDeps(g)" class="btn btn-danger" type="button">{{\'Delete\' | translate}}</button> <button data-toggle="modal" data-target="#duplicateTemplateModal" ng-if="!g.custom" ng-click="setDuplicate(g)" class="btn btn-warning" type="button">{{\'Duplicate\' | translate}}</button> </p> </div> </div> </div> </div> <button ng-if="!(allTemplates | isEmpty)" ng-click="cancelTemplate()" data-toggle="modal" data-target="#newTemplateModal" class="btn btn-primary btn-lg right-only">{{\'Create new template\' | translate}}</button> <div ng-if="(allTemplates | isEmpty) && !((allSources | isEmpty) && (allTemplates | isEmpty) && (allCards | isEmpty))" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-blueprint"></span> </div> <h1> {{\'No templates found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button ng-click="cancelTemplate()" data-toggle="modal" data-target="#newTemplateModal" class="btn btn-primary btn-lg">{{\'Create new template\' | translate}}</button> </div> </div> \x3c!-- END TEMPLATES --\x3e <div ng-if="!((allSources | isEmpty) && (allTemplates | isEmpty) && (allCards | isEmpty))" class="divider"></div> \x3c!-- CUSTOMER CARDS --\x3e <h3 ng-if="!(allCards | isEmpty)">{{\'Customer cards\' | translate}}</h3> <div class="alert alert-info alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-info"></span> <strong>{{\'Set customer card profile\' | translate}}.</strong> {{\'Don\\\'t forget to set profile for the customer cards\' | translate}}. </div> <div ng-if="onSaveSuccessCard" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Card saved\' | translate}}.</strong> {{\'Card saved with success\' | translate}} </div> <div ng-if="onSaveErrorCard" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Card not saved\' | translate}}.</strong> {{\'Card saving error\' | translate}} </div> <div ng-if="!(allCards | isEmpty)" class="row row-cards-pf adjust-card"> <div ng-repeat="g in allCards track by $index | orderBy:\'name\'" class="col-xs-12 col-sm-6 col-md-4 col-lg-4"> <div class="card-pf"> <h2 class="card-pf-title"> <span class="fa fa-calendar-o"></span> {{g.name}} <span class="right-only small-font right"> <span class="pficon pficon-volume"></span> {{getSourceName(g.dbconn_id)}} <div class="small-margin"> <span class="pficon pficon-blueprint"></span> {{g.template.replace(\'_custom\',\'\')}} </div> </span> </h2> <div class="card-pf-body"> <div class="progress-description full-size-max"> {{\'Query\' | translate}} <div readonly class="editor" ng-model="g.query" ui-ace="{theme:\'twilight\', mode: \'sql\'}"></div> </div> </div> <div class="card-pf-footer"> <div class="card-pf-time-frame-filter"> <div ng-show="g.onSave" class="spinner spinner-sm adjust-margin spinner-right"></div> </div> <p> <button data-toggle="modal" data-target="#newCardModal" ng-click="modifyCard(g)" class="btn btn-primary" type="button">{{\'Modify\' | translate}}</button> <button ng-click="deleteCard(g)" class="btn btn-danger" type="button">{{\'Delete\' | translate}}</button> </p> </div> </div> </div> </div> <button ng-if="!(allCards | isEmpty)" ng-click="cancelCard()" data-toggle="modal" data-target="#newCardModal" class="btn btn-primary btn-lg right-only">{{\'Create new card\' | translate}}</button> <div ng-if="(allCards | isEmpty) && !((allSources | isEmpty) || (allTemplates | isEmpty))" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-calendar-o"></span> </div> <h1> {{\'No cards found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button ng-click="cancelCard()" data-toggle="modal" data-target="#newCardModal" class="btn btn-primary btn-lg">{{\'Create new card\' | translate}}</button> </div> </div> </div> \x3c!-- END CUSTOMER CARDS --\x3e </div>  \x3c!-- MODALS --\x3e <div class="modal fade" id="newSourceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{newSource.onMod ? \'Modify source\' : \'New source\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="newSource.verified ? saveSource(newSource) : undefined"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database type\' | translate}}</label> <div class="col-sm-9"> <select ng-change="updatePort()" required title="-" pf-select="{ width: \'180px\' }" ng-model="newSource.type" ng-options="k as v for (k, v) in  allDBTypes"> </select></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database name\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newSource.name" type="text" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database address\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newSource.host" type="text" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database port\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newSource.port" type="text" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database user\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newSource.user" type="text" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database password\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newSource.pass" type="{{newSource.showPass ? \'text\' : \'password\'}}" class="form-control profile-new-name"> <a ng-click="togglePass(newSource)">{{newSource.showPass ? \'Hide\' : \'Show\' | translate}}</a> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Connection\' | translate}}</label> <div class="col-sm-9"> <button ng-click="checkConnection(newSource)" ng-disabled="!newSource.type || !newSource.name || newSource.name.length < 1 || !newSource.port" class="btn btn-primary" type="button">{{\'Check\' | translate}}</button> <div ng-show="newSource.isChecking" class="spinner spinner-sm inline-display language-name check-connection"></div> <span ng-show="!newSource.isChecking && newSource.checked && newSource.verified" class="pficon pficon-ok check-status"></span> <span ng-show="!newSource.isChecking && newSource.checked && !newSource.verified" class="pficon pficon-error-circle-o check-status"></span> </div> </div> <div ng-show="newSource.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary {{newSource.verified ? \'\' : \'disabled\'}}">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="newTemplateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog modal-lg"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{newTemplate.onMod ? \'Modify template\' : \'New template\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="newTemplate.html.length > 0 ? saveTemplate(newTemplate) : undefined"> <div class="modal-body"> <div ng-if="newTemplate.custom" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Name\' | translate}}</label> <div class="col-sm-9"> <input ng-disabled="newTemplate.onMod" required ng-model="newTemplate.name" type="text" class="form-control profile-new-name"></div> </div> <div ng-if="newTemplate.custom" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Real name\' | translate}}</label> <div class="col-sm-9"> <span class="gray-label">{{newTemplate.name | regexpParse}}</span> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Info\' | translate}} <a class="config-info" target="blank" href="https://github.com/tj/ejs">{{\'Docs\' | translate}}</a> </label> <div class="col-sm-9"> <pre class="editor-code"><code>results ({{\'will contain the output of query\' | translate}}) {{\'in JSON format\' | translate}}</code></pre> </div> </div> <div ng-if="!newTemplate.custom" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Color\' | translate}}</label> <div class="col-sm-9 color-padding"> <span ng-click="setColor(newTemplate, \'red\')" class="cube-color-red {{newTemplate.color==\'red\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'orange\')" class="cube-color-orange {{newTemplate.color==\'orange\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'yellow\')" class="cube-color-yellow {{newTemplate.color==\'yellow\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'olive\')" class="cube-color-light-olive {{newTemplate.color==\'olive\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'green\')" class="cube-color-green {{newTemplate.color==\'green\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'teal\')" class="cube-color-teal {{newTemplate.color==\'teal\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'blue\')" class="cube-color-blue {{newTemplate.color==\'blue\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'violet\')" class="cube-color-light-violet {{newTemplate.color==\'violet\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'purple\')" class="cube-color-purple {{newTemplate.color==\'purple\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'pink\')" class="cube-color-pink {{newTemplate.color==\'pink\' ? \'color-active\' : \'\'}}"></span> <span ng-click="setColor(newTemplate, \'brown\')" class="cube-color-brown {{newTemplate.color==\'brown\' ? \'color-active\' : \'\'}}"></span> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Results\'}}</label> <div class="col-sm-9"> <pre required ng-model="newTemplate.objects" class="editor-form" ui-ace="{theme:\'twilight\',mode: \'json\', onChange: editorOnChange}"></pre> </div> </div> <div ng-if="newTemplate.custom" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Code\' | translate}} (ejs)</label> <div class="col-sm-9"> <pre required ng-model="newTemplate.html" class="editor-form" ui-ace="{theme:\'twilight\',mode: \'ejs\', onChange: editorOnChange}"></pre> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Preview\' | translate}}</label> <div class="col-sm-9"> <iframe class="editor-preview" src="{{\'data:text/html;base64,\' + (newTemplate.html | ejsRender:newTemplate.objects:newTemplate.name | toBase64) | trustUrl}}"></iframe> </div> </div> <div ng-show="newTemplate.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary {{newTemplate.html.length > 0 ? \'\' : \'disabled\'}}">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="newCardModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog modal-lg"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{newCard.onMod ? \'Modify card\' : \'New card\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="newCard.query.length > 0 ? saveCard(newCard) : undefined"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Name\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newCard.name" type="text" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Source\' | translate}}</label> <div class="col-sm-9"> <select required title="-" pf-select="{ width: \'180px\' }" ng-model="newCard.dbconn_id" ng-options="p.id as p.name for p in allSources"> </select></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Template\' | translate}}</label> <div class="col-sm-9"> <select required title="-" pf-select="{ width: \'180px\' }" ng-model="newCard.template" ng-options="(p.custom ? p.name+\'_custom\' : p.name) as p.name for p in allTemplates"> </select></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Profile\' | translate}}</label> <div class="col-sm-9"> <select multiple required title="-" pf-select="{ width: \'180px\' }" ng-model="newCard.profiles" ng-options="p.id as p.name for p in allProfiles"> </select></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Query\' | translate}}</label> <div class="col-sm-9"> <div required ng-model="newCard.query" class="editor-form" ui-ace="{theme:\'twilight\',mode: \'sql\', onChange: editorOnChange}"></div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Render\' | translate}}</label> <div class="col-sm-9"> <button ng-click="updatePreview(newCard)" class="btn btn-primary" type="button">{{\'Refresh\' | translate}}</button> <div ng-show="newCard.isChecking" class="spinner spinner-sm inline-display language-name check-connection"></div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Preview\' | translate}}</label> <div class="col-sm-9"> <iframe class="editor-preview" src="{{\'data:text/html;base64,\' + (newCard.render_html | toBase64) | trustUrl}}"></iframe> </div> </div> <div ng-show="newCard.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary {{newCard.query.length > 0 ? \'\' : \'disabled\'}}">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="cardSourceDepsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Card dependency\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="cardDeps.dependencies.length == 0 ? deleteSource(cardDeps) : undefined"> <div class="modal-body"> <div ng-show="!cardDeps.loading && cardDeps.dependencies.length > 0" class="alert alert-warning alert-dismissable"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Dependency problem\' | translate}}.</strong> {{\'This source is used by following cards\' | translate}}: </div> <div ng-show="!cardDeps.loading && cardDeps.dependencies.length == 0" class="form-group medium-font col-md-4"> {{ "Are you sure" | translate }} ? </div> <div class="form-group"> <div ng-show="cardDeps.loading" class="spinner"></div> <label ng-show="!cardDeps.loading && cardDeps.dependencies.length > 0" class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Cards list\' | translate}}</label> <div ng-show="!cardDeps.loading" class="col-sm-9"> <ul class="list-group"> <li ng-repeat="d in cardDeps.dependencies track by $index" class="list-group-item">{{d.name}}</li> </ul> </div> </div> <div ng-show="cardDeps.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-danger {{cardDeps.dependencies.length == 0 ? \'\' : \'disabled\'}}">{{\'Delete\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="cardTemplateDepsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Card dependency\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="cardDeps.dependencies.length == 0 ? deleteTemplate(cardDeps) : undefined"> <div class="modal-body"> <div ng-show="!cardDeps.loading && cardDeps.dependencies.length > 0" class="alert alert-warning alert-dismissable"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Dependency problem\' | translate}}.</strong> {{\'This template is used by following cards\' | translate}}: </div> <div ng-show="!cardDeps.loading && cardDeps.dependencies.length == 0" class="form-group medium-font col-md-4"> {{ "Are you sure" | translate }} ? </div> <div class="form-group"> <div ng-show="cardDeps.loading" class="spinner"></div> <label ng-show="!cardDeps.loading && cardDeps.dependencies.length > 0" class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Cards list\' | translate}}</label> <div ng-show="!cardDeps.loading" class="col-sm-9"> <ul class="list-group"> <li ng-repeat="d in cardDeps.dependencies track by $index" class="list-group-item">{{d.name}}</li> </ul> </div> </div> <div ng-show="cardDeps.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-danger {{cardDeps.dependencies.length == 0 ? \'\' : \'disabled\'}}">{{\'Delete\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="duplicateTemplateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Duplicate template\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="duplicated.name == duplicated.old_name ? undefined : duplicateTemplate(duplicated)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Name\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="duplicated.name" type="text" class="form-control profile-new-name"></div> </div> <div ng-show="duplicated.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary {{duplicated.name == duplicated.old_name ? \'disabled\' : \'\'}}">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>  \x3c!-- END MODALS --\x3e'),e.put("views/apps/paramurl.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'paramurl\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'apps/paramurl\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Parameterized URLs\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Parameterized URLs configuration\' | translate}}</h1> \x3c!-- WIZARD --\x3e <div ng-if="(allUrls | isEmpty)" class="blank-slate-pf urls-margin-top"> <div class="blank-slate-pf-icon"> <span class="fa fa-link"></span> </div> <h1> {{\'No URL found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button ng-click="openModal()" data-toggle="modal" data-target="#newParamurlModal" class="btn btn-primary btn-lg">{{\'Create new parameterized URL\' | translate}}</button> </div> </div> \x3c!-- END WIZARD --\x3e \x3c!-- SOURCES --\x3e <h3 ng-if="!(allUrls | isEmpty)" class="urls-margin-top">{{\'Parameterized URL\' | translate}}</h3> <div ng-if="onSaveSuccessParamurl" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'URL saved\' | translate}}.</strong> {{\'URL saved with success\' | translate}} </div> <div ng-if="onSaveErrorParamurl" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'URL not saved\' | translate}}.</strong> {{\'URL saving error\' | translate}} </div> <div ng-if="!(allUrls | isEmpty)" class="row row-cards-pf adjust-card"> <div ng-repeat="g in allUrls track by $index | orderBy:\'name\'" class="col-xs-12 col-sm-6"> <div id="accordion-markup-{{$index}}" class="card-pf"> <div data-toggle="collapse" data-parent="#accordion-markup-{{$index}}" href="#collapse-{{$index}}"> <h2 class="card-pf-title pointer"> <span class="fa fa-link vmiddle"></span> <span class="paramurl-url-label vmiddle" title="{{g.url}}">{{g.url}}</span> <span class="right-only small-font">Info <span class="fa fa-sort-desc"></span> </span> </h2> </div> <div class="card-pf-body card-body-small-bottom"> <div id="collapse-{{$index}}" class="panel-collapse collapse"> <div class="progress-description full-size-max"> {{\'Profiles\' | translate}} <span class="right-only paramurl-input-span"> <strong> <span ng-repeat="u in tdata.allProfiles"> <label ng-if="g.profiles.indexOf(u.id) !== -1">{{u.name}}</label> </span> </strong> </span> </div> <div class="progress-description full-size-max"> {{\'Url\' | translate}} <span class="right-only paramurl-input-span"> <strong> <input id="param-url-{{g.id}}" value="{{g.url}}" type="text" class="vmiddle form-control inline-display paramurl-input-readonly" readonly> <button ng-click="clipboardCopied(g.id)" class="btn btn-default copy-clipboard-btn" id="copy-clipboard-btn-{{g.id}}" data-placement="top" data-trigger="manual" data-toggle="popover" data-html="true" data-content="{{\'Copied\' | translate}}" data-clipboard-target="#param-url-{{g.id}}"> <span class="fa fa-clipboard"></span> </button> </strong> </span> </div> <div class="progress-description full-size-max" style="word-wrap: break-word"> {{\'Calls only through queues\' | translate}} <span class="right-only paramurl-input-span"> <label ng-if="g.only_queues">{{\'Enabled\' | translate}}</label> <label ng-if="!g.only_queues">{{\'Disabled\' | translate}}</label> </span> </div> </div> </div> <div class="card-pf-footer"> <div class="card-pf-time-frame-filter"> <div ng-show="g.onSave" class="spinner spinner-sm adjust-margin spinner-right"></div> </div> <p> <button data-toggle="modal" data-target="#newParamurlModal" ng-click="modifyUrl(g)" class="btn btn-primary" type="button">{{\'Modify\' | translate}}</button> <button ng-click="selectUrl(g)" data-toggle="modal" data-target="#deleteModal" class="btn btn-danger" type="button">{{\'Delete\' | translate}}</button> </p> </div> </div> </div> </div> <button ng-click="openModal()" ng-if="!(allUrls | isEmpty)" ng-disabled="!tdata.dataLoaded" data-toggle="modal" data-target="#newParamurlModal" class="btn btn-primary btn-lg right-only">{{\'Create new parameterized URL\' | translate}}</button> \x3c!-- END SOURCES --\x3e </div> </div> <div class="modal fade" id="newParamurlModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'New parameterized URL\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="newUrl.url === \'\' ? undefined : saveParamurl(newUrl)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup"></label> <label class="col-sm-8 control-label paramurl-descr-label" for="textInput-modal-markup"> {{\'URL can contains four parameters identifying the caller\' | translate}}: </label> <label class="col-sm-3 control-label" for="textInput-modal-markup"></label> <label class="col-sm-8 paramurl-descr-label" for="textInput-modal-markup"> <ul> <li>$CALLER_NUMBER</li> <li>$CALLER_NAME</li> <li>$CALLED</li> <li>$UNIQUEID</li> </ul> </label> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'URL\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newUrl.url" type="text" class="form-control paramurl-input" title="https://mycrm.com/webservice.php?cnumber=$CALLER_NUMBER&cname=$CALLER_NAME&dest=$CALLED&callid=$UNIQUEID" placeholder="https://mycrm.com/webservice.php?cnumber=$CALLER_NUMBER&cname=$CALLER_NAME&dest=$CALLED&callid=$UNIQUEID"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Profile\' | translate}}</label> <div class="col-sm-9"> <select multiple title="-" pf-select="{ width: \'180px\' }" ng-model="newUrl.profiles"> <option ng-repeat="p in tdata.allProfiles" value="{{p.id}}" ng-disabled="(tdata.busyProfiles.indexOf(p.id) !== -1 && allUrlProfiles[newUrl.id].profiles.indexOf(p.id) === -1) ||\n                    (tdata.busyProfiles.indexOf(p.id) !== -1 && newUrl.id === undefined)"> {{p.name}} </option> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Calls only through queues\' | translate}}</label> <div class="col-sm-9"> <input bs-switch ng-model="newUrl.only_queues" class="bootstrap-switch bootstrap-switch-webrtc col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> <div class="form-group" ng-if="!newUrl.onMod && tdata.busyProfiles.length === tdata.allProfiles.length"> <label class="col-sm-3 control-label" for="textInput-modal-markup"></label> <label class="col-sm-8 control-label paramurl-descr-label" for="textInput-modal-markup"> <div class="col-sm-12 alert alert-warning paramurl-warning paramurl-descr-label"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'No profile available\' | translate}}.</strong> {{\'To have one, free it from an existing URL\' | translate}}. </div> </label> </div> <div ng-show="newUrl.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button ng-click="cancelParamurl(newUrl)" type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary {{newUrl.url === \'\' || newUrl.profiles.length === 0 ? \'disabled\' : \'\'}}">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Delete" | translate}} {{currentUrl.url}} </h4> </div> <div class="modal-body"> <div class="form-group medium-font no-margin-bottom"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit adjust-header"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteUrl(currentUrl)"> {{ "Delete" | translate }} </button> </div> </div> </div> </div>'),e.put("views/apps/phonebook.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'cards\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'apps/cards\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Phonebook sources\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Phonebook sources configuration\' | translate}}</h1> \x3c!-- WIZARD --\x3e <div ng-if="(allSources | isEmpty)" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-book"></span> </div> <h1> {{\'No custom phonebook source found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button ng-click="newSourceEvent()" data-toggle="modal" data-target="#creationsourceModal" class="btn btn-primary btn-lg ng-binding ng-scope">{{"Create new source" | translate}}</button> </div> </div> \x3c!-- END WIZARD --\x3e \x3c!-- SOURCES --\x3e <h3 ng-if="!(allSources | isEmpty)" class="costumer-cards-margin-top" ng-if="true">{{\'Sources\' | translate}}</h3> <div ng-if="onSaveSuccessSource" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Source saved\' | translate}}.</strong> {{\'Source saved with success\' | translate}} </div> <div ng-if="onSaveErrorSource" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Source not saved\' | translate}}.</strong> {{\'Source saving error\' | translate}} </div> <div ng-if="!(allSources | isEmpty)" class="row row-cards-pf adjust-card"> <div ng-repeat="(kg, g) in allSources track by $index | orderBy:\'dbname\'" class="col-xs-12 col-sm-6 col-md-4 col-lg-4"> <div id="accordion-markup-{{$index}}" class="card-pf"> <div data-toggle="collapse" data-parent="#accordion-markup-{{$index}}" href="#collapse-{{$index}}"> <h2 class="card-pf-title phonebook-sources-title-size pointer"> <span class="pficon pficon-volume right-margin-fine"></span> {{ getSourceName(g, \'-\') }} <span class="right-only small-font"> {{ getSourceType(g, \'-\') }} <span class="fa fa-sort-desc"></span></span> </h2> </div> <div id="collapse-{{$index}}" class="panel-collapse collapse"> \x3c!-- mysql --\x3e <div ng-if="g.dbtype == \'mysql\'" class="progress-description full-size-max"> {{\'Database address\' | translate}} <span class="right-only"><strong>{{g.host}}</strong></span> </div> <div ng-if="g.dbtype == \'mysql\'" class="progress-description full-size-max"> {{\'Database port\' | translate}} <span class="right-only"><strong>{{g.port}}</strong></span> </div> <div ng-if="g.dbtype == \'mysql\'" class="progress-description full-size-max"> {{\'Database user\' | translate}} <span class="right-only"><strong>{{g.user}}</strong></span> </div> <div ng-if="g.dbtype == \'mysql\'" class="progress-description full-size-max"> {{\'Database password\' | translate}} <span class="right-only"><strong>{{g.showPass ? g.password : \'*****\'}}</strong> <a ng-click="togglePass(g)">{{g.showPass ? \'Hide\' : \'Show\' | translate}}</a></span> </div> \x3c!-- csv --\x3e <div ng-if="g.dbtype == \'csv\'" class="progress-description full-size-max"> {{\'URL\' | translate}} <span class="right-only"><strong>{{ g.url }}</strong></span> </div> </div> <div class="map-view-in-card"> <h2 class="card-pf-title pointer source-card-bottomside-title phonebook-sources-title-size"> \x3c!-- {{"Status" | translate}} --\x3e </h2> </div> <div class="panel-group list-map-container-phonebook"> <div class="col-xs-12 col-sm-12 col-lg-6"> <p class="view-settings-string-phonebook"> {{"Synchronization status" | translate}} </p> <div class="form-group onof-button-phonebook"> <input bs-switch ng-model="g.enabled" ng-change="onOfSource(kg, g)" id="bootstrap-switch-enable-source" class="bootstrap-switch" type="checkbox"> <span class="onof-string"> {{g.enabled ? "Disable" : "Enable" | translate}} </span> </div> </div> <div class="col-xs-12 col-md-12 col-lg-6"> <p class="view-settings-string-phonebook"> {{"Database synchronization interval" | translate}} </p> <span class="badge phonebook-badge">{{syncIntervals[g.interval] | translate}}</span> </div> </div> <div class="card-pf-footer phonebook-card-footer"> <div class="row"> <div class="col-xs-12 col-md-12 col-lg-6"> <button data-toggle="modal" data-target="#creationsourceModal" ng-click="modifySource(kg, g)" class="btn btn-primary phonebook-footer-card-buttons" type="button">{{\'Modify\' | translate}}</button> <button ng-click="openDeleteModal(kg)" class="btn btn-danger phonebook-footer-card-buttons" type="button">{{\'Delete\' | translate}}</button> </div> <div class="col-xs-12 col-md-12 col-lg-6"> <button ng-disabled="!g.enabled" ng-click="runSyncNow(kg)" class="btn btn-default right-only phonebook-footer-card-buttons" type="button"> <i class="fa fa-refresh sync-phonebook-icon" aria-hidden="true"></i> {{\'Sync\' | translate}} </button> <div id="phonebookSyncSpinner" ng-if="allSources[kg].syncing" class="spinner spinner-sm right-only"></div> <span ng-show="!allSources[kg].syncing && allSources[kg].startSync && allSources[kg].synced" class="pficon pficon-ok sync-source-res right-only"></span> <span ng-show="!allSources[kg].syncing && allSources[kg].startSync && !allSources[kg].synced" class="pficon pficon-error-circle-o sync-source-res right-only"></span> </div> </div> </div> </div> </div> </div> <button ng-if="!(allSources | isEmpty)" ng-click="newSourceEvent()" data-toggle="modal" data-target="#creationsourceModal" class="btn btn-primary btn-lg right-only ng-binding ng-scope">{{"Create new source" | translate}} </button> \x3c!-- END SOURCES --\x3e </div> \x3c!-- START DELETE MODAL --\x3e <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="createUserLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="createUserLabel">{{\'Delete source\' | translate}}</h4> </div> <div class="modal-body"> <div class="form-group sm-font no-margin-bottom"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit adjust-header"> <button ng-click="getAllSources()" type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deletePhonebookSource()"> {{ "Delete" | translate }} </button> </div> </div> </div> </div> \x3c!-- START MODAL --\x3e <div class="modal fade overflowSources" id="creationsourceModal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="wizard-modal"> <div class="modal-dialog wizard-pf"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title">{{ (ui.onModify ? "pb_modal_title_modify" : "pb_modal_title_create") | translate}}</h4> </div> <div class="modal-body wizard-pf-body clearfix"> <div id="sidebarColl" class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="wizard-pf-sidebar"> <ul class="list-group"> <li class="list-group-item {{sourceModal.tab === \'datasource\' ? \'active\' : \'disabled\'}}"> <a ng-click="ui.onModify ? switchsourceModalTab(\'datasource\') : \'\'"> <span class="wizard-pf-substep-number">1.</span> <span class="wizard-pf-substep-title">{{"Source" | translate}}</span> </a> </li> <li class="list-group-item {{sourceModal.tab === \'datamap\' ? \'active\' : \'disabled\'}}"> <a ng-click="ui.onModify ? switchsourceModalTab(\'datamap\') : \'\'"> <span class="wizard-pf-substep-number">2.</span> <span class="wizard-pf-substep-title">{{"Map" | translate}}</span> </a> </li> <li class="list-group-item {{sourceModal.tab === \'sync\' ? \'active\' : \'disabled\'}}"> <a ng-click="ui.onModify ? switchsourceModalTab(\'sync\') : \'\'"> <span class="wizard-pf-substep-number">3.</span> <span class="wizard-pf-substep-title">{{"Settings" | translate}}</span> </a> </li> </ul> </div> \x3c!-- /.wizard-pf-sidebar --\x3e </div> <div id="bodyCall" class="col-xs-12 col-sm-9 col-md-9 col-lg-9"> <div class="wizard-pf-main"> \x3c!-- START SYNC VIEW --\x3e <div ng-show="sourceModal.tab === \'sync\'" class="wizard-pf-contents"> \x3c!-- SQL SOURCE --\x3e <div class="list-group list-view-pf adjust-margin-extensions no-border no-margin-top"> <div class="adjust-profile-margin"> <div> <div class="settings-row"> <h3 class="settings-title">{{"Synchronization" | translate}}</h3> <div class="phonebook-settings-rows col-xs-12 col-sm-6 col-lg-6"> <p class="sync-settings-string"> {{"Set the database synchronization interval" | translate}}. </p> <div class="dropdown"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"> {{syncIntervals[newSource.interval] | translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="(ki, i) in syncIntervals" role="presentation"> <a ng-click="newSource.interval = ki" class="{{ki == newSource.interval ? \'active-a-interval\' : \'\'}}"> {{i | translate}} </a> </li> </ul> </div> </div> <div class="phonebook-settings-rows col-xs-12 col-sm-6 col-lg-6"> </div> </div> </div> </div> </div> </div> \x3c!-- START MAP VIEW --\x3e <div ng-show="sourceModal.tab === \'datamap\'" class="wizard-pf-contents"> <div class="alert alert-info alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> </button> <span class="pficon pficon-info"></span> {{"Associate the source columns with the destination columns" | translate}}. </div> <div ng-if="sourceModal.querySelectProgress" class="spinner phonebook-sources-map"></div> <div ng-if="!sourceModal.querySelectionDone" class="list-group-item list-item-header list-item-header-phonebook"> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-usera list-view-pf-icon-sm adjust-line phonebook-table-left-border"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description adjust-list"> <div class="list-group-item-heading"> {{"Source columns" | translate}} </div> </div> <div class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> <label>{{"Destination columns" | translate}}</label> </div> <span type="button" id="informationSource" class="pficon-info" data-toggle="modal" data-target="#informationPopup"> </span> <div class="modal fade" id="informationPopup" tabindex="-1" role="dialog" aria-labelledby="informationPopup" aria-hidden="true"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-body"> <table id="tableModal" class="table"> <thead class="thead-dark"> <tr id="columnModal"> <th scope="col">{{"Column"| translate}}</th> <th scope="col">{{"Description"| translate}}</th> </tr> </thead> <tbody> <tr> <td>owner_id</td> <td>{{"Contact owner"| translate}}</td> </tr> <tr id="columnModalColored"> <td>type</td> <td>{{"Source of origin"| translate}}</td> </tr> <tr> <td>homeemail</td> <td>{{"Home email address"| translate}}</td> </tr> <tr id="columnModalColored"> <td>workemail</td> <td>{{"Business email address"| translate}}</td> </tr> <tr> <td>homephone</td> <td>{{"Home telephone number"| translate}}</td> </tr> <tr id="columnModalColored"> <td>workphone</td> <td>{{"Business telephone number"| translate}}</td> </tr> <tr> <td>cellphone</td> <td>{{"Mobile number"| translate}}</td> </tr> <tr id="columnModalColored"> <td>fax</td> <td>{{"Fax number"| translate}}</td> </tr> <tr> <td>title</td> <td>{{"Task"| translate}}</td> </tr> <tr id="columnModalColored"> <td>company</td> <td>{{"Company"| translate}}</td> </tr> <tr> <td>notes</td> <td>{{"Notes"| translate}}</td> </tr> <tr id="columnModalColored"> <td>name</td> <td>{{"Name and surname"| translate}}</td> </tr> <tr> <td>homestreet</td> <td>{{"Home address"| translate}}</td> </tr> <tr id="columnModalColored"> <td>homepob</td> <td>{{"Home post box"| translate}}</td> </tr> <tr> <td>homecity</td> <td>{{"City of domicile"| translate}}</td> </tr> <tr id="columnModalColored"> <td>homeprovince </td> <td>{{"Province of domicile"| translate}}</td> </tr> <tr> <td>homepostalcode</td> <td>{{"Postal code domicile"| translate}}</td> </tr> <tr id="columnModalColored"> <td>homecountry</td> <td>{{"State / region of domicile"| translate}}</td> </tr> <tr> <td>workstreet</td> <td>{{"Business address"| translate}}</td> </tr> <tr id="columnModalColored"> <td>workpob</td> <td>{{"Post box work"| translate}}</td> </tr> <tr> <td>workcity</td> <td>{{"Working city"| translate}}</td> </tr> <tr id="columnModalColored"> <td>workprovince</td> <td>{{"Work province"| translate}}</td> </tr> <tr> <td>workpostalcode</td> <td>{{"Business postal code"| translate}}</td> </tr> <tr id="columnModalColored"> <td>workcountry</td> <td>{{"State / region of employment"| translate}}</td> </tr> </tbody> </table> </div> </div> </div> </div> </div> </div> </div> </div> \x3c!-- on new source creation --\x3e <div class="list-group list-view-pf list-view-pf-view no-margin-top"> <div ng-repeat="(kc, c) in colsSources" class="list-group-item"> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-columns list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading">{{kc}} </div> </div> <div class="list-view-pf-additional-info"> <div class="dropdown"> <button ng-disabled="newSource.readonly" class="form-control width-160 float-left select-text-inputs {{newSource.mapping[kc] ? \'\' : \'cursive disabled-color\'}}" type="button" id="dropdownMenu1-{{kc}}" data-toggle="dropdown"> {{newSource.mapping[kc] || \'Select column\' | translate}} </button> <span ng-disabled="newSource.readonly" id="btnDropdown-{{kc}}" data-toggle="{{newSource.readonly ? false : \'dropdown\'}}" class="width-26 float-left adjust-button dropdown-toggle btn btn-default"> <span class="fa fa-angle-down"></span> </span> <ul class="dropdown-menu middle-margin-bottom" role="menu" aria-labelledby="dropdownMenu1-{{kc}}"> <li ng-if="newSource.mapping[kc]" ng-click="disassociatesColumn(kc, newSource.mapping[kc])" class="not-selectable"> <a>{{"Empty field" | translate}}</a> </li> <li ng-if="newSource.mapping.lenght < 1" class="not-selectable cursive"> <a>{{"No columns available" | translate}}</a> </li> <li ng-if="!d.inuse" ng-repeat="(kd, d) in colsDestinations" role="presentation" class="not-selectable"> <a ng-click="enableSourceSave(kc, kd)" role="menuitem"> {{kd}} </a> </li> </ul> </div> </div> </div> </div> </div> </div> <h1 ng-click="toggleMig(\'collapse-syncpreview\')" class="adjust-header adjust-profile-header phonebook-source-title-container margin-top-lg"> <span class="fa fa-eye card-pf-icon-circle config-title-icon"></span> <span class="phonebook-source-title">{{\'Phonebook preview\' | translate}}</span> <span ng-if="!migration.profiles.loading" class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> </h1> <div id="collapse-syncpreview" class="panel-collapse phonebook-source-border adjust-profile-body"> <div class="panel-body profile-panel"> <form class="form-horizontal"> <div class="col-sm-12 selection-query-prev"> <div ng-if="querySelect | isEmpty" class="blank-slate-pf empty-preview-phonebook"> <div class="blank-slate-pf-icon preview-bigicon-container"> <span class="fa fa-eye"></span> </div> <h1 class="empty-preview-text"> {{"Preview" | translate}} </h1> </div> <div ng-if="!(querySelect | isEmpty)" ng-repeat="item in querySelect" class="oriziontal-segment-phonebook"> <div class="orizontal-segment-phonebook-content"> <div ng-if="(v !== \'\') && (phonebookIcons[newSource.mapping[k]])" ng-repeat="(k, v) in item" class="orizontal-segment-phonebook-row"> <i class="fa fa-{{phonebookIcons[newSource.mapping[k]].icon}} orizontal-segment-phonebook-icon"></i> <span class="orizontal-segment-phonebook-label">{{phonebookIcons[newSource.mapping[k]].label | translate}}</span> <span class="orizontal-segment-phonebook-values">{{v}}</span> </div> <div class="align-center"> <div class="source-icon-container"> <i class="fa fa-cloud float-left"></i> </div> </div> </div> </div> </div> </form> </div> </div> </div> \x3c!-- START SOURCE VIEW --\x3e <div ng-show="sourceModal.tab === \'datasource\'" class="wizard-pf-contents"> \x3c!-- Query selection --\x3e <div class="list-group list-view-pf adjust-margin-extensions no-border no-margin-top"> <div> <div> <h1 class="adjust-header adjust-profile-header phonebook-source-title-container"> <span class="fa fa-database card-pf-icon-circle config-title-icon"></span> <span class="phonebook-source-title">{{\'pb_source_dialog_title\' | translate}}</span> </h1> <div id="collapse-queryselection" class="panel-collapse phonebook-source-border adjust-profile-body"> <div class="panel-body profile-panel"> <form id="dbInfoSqlSource" class="form-horizontal source-form" ng-submit="checkConnection(newSource)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Phonebook name\' | translate}}</label> <div class="col-sm-9 input-container"> <input required ng-disabled="newSource.readonly" ng-model="newSource.type" type="text" class="form-control"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'pb_source_type_label\' | translate}}</label> <div class="col-sm-9 input-container"> <select ng-change="updateDbType()" ng-disabled="newSource.readonly || ui.onModify" required title="-" pf-select="" ng-model="newSource.dbtype" ng-options="k as v for (k, v) in  allDBTypes"> </select></div> </div> \x3c!-- type mysql --\x3e <div ng-if="newSource.dbtype == \'mysql\'" ng-if="newSource.dbtype == \'mysql\'" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database name\' | translate}}</label> <div class="col-sm-9 input-container"> <input required ng-disabled="newSource.readonly" ng-model="newSource.dbname" type="text" class="form-control"></div> </div> <div ng-if="newSource.dbtype == \'mysql\'" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database address\' | translate}}</label> <div class="col-sm-9 input-container"> <input required ng-disabled="newSource.readonly" ng-model="newSource.host" type="text" class="form-control"></div> </div> <div ng-if="newSource.dbtype == \'mysql\'" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database port\' | translate}}</label> <div class="col-sm-9 input-container"> <input required ng-disabled="newSource.readonly" ng-model="newSource.port" type="text" class="form-control"></div> </div> <div ng-if="newSource.dbtype == \'mysql\'" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database user\' | translate}}</label> <div class="col-sm-9 input-container"> <input required ng-disabled="newSource.readonly" ng-model="newSource.user" type="text" class="form-control"></div> </div> <div ng-if="newSource.dbtype == \'mysql\'" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Database password\' | translate}}</label> <div class="col-sm-9 input-container"> <input ng-disabled="newSource.readonly" ng-model="newSource.password" type="{{newSource.showPass ? \'text\' : \'password\'}}" class="form-control"> <a ng-click="togglePass(newSource)">{{newSource.showPass ? \'Hide\' : \'Show\' | translate}}</a> </div> </div> <div ng-if="newSource.dbtype == \'mysql\'" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Select query\' | translate}}</label> <div class="col-sm-9 input-container"> <div required ng-model="newSource.query" class="editor-form editor-form-phonebook" ui-ace="{theme:\'twilight\',mode: \'sql\', onChange: editorOnChange}"></div> </div> </div> \x3c!-- type CSV --\x3e <div ng-if="newSource.dbtype == \'csv\'" class="form-group"> <label class="col-sm-3 control-label" for="input-csv-url">{{\'pb_csv_url_label\' | translate}}</label> <div class="col-sm-8 input-container" style="padding-right: 0 !important"> <input id="input-csv-url" required ng-disabled="newSource.readonly" ng-model="newSource.url" type="url" pattern="(https?://|file:///).+" type="text" class="form-control"> </div> <div class="col-sm-1 input-container" style="padding-left: 0 !important"> <input type="file" class="hide" id="csvUploadFile"> <button tabindex="-1" type="button" class="btn btn-default mln-1 zindex-2" ng-disabled="newSource.readonly" ng-click="csvUploadClick($event)"> <span class="fa fa-upload"></span> </button> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup"></label> <div class="col-sm-9"> <button class="btn btn-primary" type="submit" id="pbSourceCheckButton">{{\'pb_check_button_label\' | translate}}</button> <div ng-show="newSource.isChecking" class="spinner spinner-sm inline-display language-name check-connection"></div> <span ng-show="!newSource.isChecking && newSource.checked && newSource.verified" class="pficon pficon-ok check-status"></span> <span ng-show="!newSource.isChecking && newSource.checked && !newSource.verified" class="pficon pficon-error-circle-o check-status"></span> </div> </div> <div class="form-group"> <div class="col-sm-12 margin-top-md"> <h1 ng-click="toggleMig(\'collapse-mappreview\')" class="adjust-header pointer adjust-profile-header phonebook-source-title-container"> <span class="fa fa-eye card-pf-icon-circle config-title-icon"></span> <span class="phonebook-source-title">{{\'Query preview\' | translate}}</span> <span ng-if="!migration.profiles.loading" class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> </h1> <div id="collapse-mappreview" class="panel-collapse phonebook-source-border adjust-profile-body simple-hidden"> <div class="panel-body profile-panel"> <div ng-if="migration.profiles.status === \'success\'" class="alert alert-success"> <span class="pficon pficon-ok"></span> {{"Migration has been completed" | translate}}. </div> <form class="form-horizontal"> <div class="col-sm-12 selection-query-prev"> <div ng-if="querySelect | isEmpty" class="blank-slate-pf empty-preview-phonebook"> <div class="blank-slate-pf-icon preview-bigicon-container"> <span class="fa fa-eye"></span> </div> <h1 class="empty-preview-text"> {{"Preview" | translate}} </h1> </div> <div ng-if="!(querySelect | isEmpty)" ng-repeat="item in querySelect" class="oriziontal-segment-phonebook"> <div class="orizontal-segment-phonebook-content"> <div ng-if="v != \'\' && v != null" ng-repeat="(k, v) in item" class="orizontal-segment-phonebook-row"> <span class="orizontal-segment-phonebook-label">{{k}}</span> <span class="orizontal-segment-phonebook-values">{{v}}</span> </div> <div class="align-center"> <div class="source-icon-container"> <i class="fa fa-cloud float-left"></i> </div> </div> </div> </div> </div> </form> </div> </div> </div> </div> </div> </form> <div ng-if="migration.profiles.status === \'success\'" class="alert alert-success"> <span class="pficon pficon-ok"></span> {{"Migration has been completed" | translate}}. </div> </div> </div> </div> </div> </div> </div> </div>\x3c!-- /.wizard-pf-main --\x3e </div> </div>\x3c!-- /.wizard-pf-body --\x3e <div class="modal-footer wizard-pf-footer"> <button type="button" data-dismiss="modal" aria-hidden="true" aria-label="Close" class="btn btn-default btn-cancel wizard-pf-cancel wizard-pf-dismiss">{{"Cancel" | translate}}</button> <button ng-if="sourceModal.tab === \'datamap\'" ng-click="switchsourceModalTab(\'datasource\')" type="button" class="btn btn-default wizard-pf-back" ng-disabled="sourceModal.tab === \'datasource\' ? true : false"> <span class="i fa fa-angle-left"></span> <span class="wizard-pf-button-text"> {{"Back" | translate}} </span> </button> <button ng-if="sourceModal.tab === \'sync\'" ng-click="switchsourceModalTab(\'datamap\')" type="button" class="btn btn-default wizard-pf-back" ng-disabled="sourceModal.tab === \'datasource\' ? true : false"> <span class="i fa fa-angle-left"></span> <span class="wizard-pf-button-text"> {{"Back" | translate}} </span> </button> <button ng-if="sourceModal.tab === \'datasource\'" ng-click="switchsourceModalTab(\'datamap\')" class="btn btn-primary wizard-pf-next" ng-disabled="!newSource.verified"> <span class="wizard-pf-button-text"> {{"Next" | translate}} </span> <span class="i fa fa-angle-right"></span> </button> <button ng-if="sourceModal.tab === \'datamap\'" ng-click="switchsourceModalTab(\'sync\')" class="btn btn-primary wizard-pf-next" ng-disabled="!newSource.verified"> <span class="wizard-pf-button-text"> {{"Next" | translate}} </span> <span class="i fa fa-angle-right"></span> </button> <button ng-if="sourceModal.tab === \'sync\'" ng-click="ui.onModify ? updateSource() : saveSource()" class="btn btn-primary wizard-pf-next"> <span class="wizard-pf-button-text"> {{"Save" | translate}} </span> <span class="i fa fa-angle-right"></span> </button> <button type="button" class="btn btn-primary hidden wizard-pf-close wizard-pf-dismiss">Close</button> </div>\x3c!-- /.wizard-pf-footer --\x3e </div>\x3c!-- /.modal-content --\x3e </div>\x3c!-- /.modal-dialog --\x3e </div> </div>\x3c!-- /.modal --\x3e</div>'),e.put("views/apps/streaming.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'streaming\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'apps/streaming\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Video sources\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Video sources configuration\' | translate}}</h1> \x3c!-- WIZARD --\x3e <div ng-if="(allSources | isEmpty)" class="blank-slate-pf video-sources-margin-top"> <div class="blank-slate-pf-icon"> <span class="fa fa-video-camera"></span> </div> <h1> {{\'No video sources found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#newSourceModal" class="btn btn-primary btn-lg">{{\'Create new source\' | translate}}</button> </div> </div> \x3c!-- END WIZARD --\x3e \x3c!-- SOURCES --\x3e <h3 ng-if="!(allSources | isEmpty)" class="video-sources-margin-top">{{\'Sources\' | translate}}</h3> <div ng-if="onSaveSuccessSource" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Source saved\' | translate}}.</strong> {{\'Source saved with success\' | translate}} </div> <div ng-if="onSaveErrorSource" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Source not saved\' | translate}}.</strong> {{\'Source saving error\' | translate}} </div> <div ng-if="!(allSources | isEmpty)" class="row row-cards-pf adjust-card"> <div ng-repeat="g in allSources track by $index | orderBy:\'name\'" class="col-xs-12 col-sm-6 col-md-4 col-lg-4"> <div id="accordion-markup-{{$index}}" class="card-pf"> <div data-toggle="collapse" data-parent="#accordion-markup-{{$index}}" href="#collapse-{{$index}}"> <h2 class="card-pf-title pointer"> <span class="fa fa-video-camera"></span> {{g.descr}} <span class="right-only small-font">Info <span class="fa fa-sort-desc"></span> </span> </h2> </div> <div class="card-pf-body card-body-small-bottom"> <div id="collapse-{{$index}}" class="panel-collapse collapse"> <div ng-if="g.exten && g.exten.length > 0" class="progress-description full-size-max"> {{\'Extension\' | translate}} <span class="right-only"><strong>{{g.exten}}</strong></span> </div> <div class="progress-description full-size-max"> {{\'URL\' | translate}} <span class="right-only"><strong>{{g.url}}</strong></span> </div> <div class="progress-description full-size-max"> {{\'Opening code\' | translate}} <span class="right-only"><strong>{{g.open}}</strong></span> </div> <div class="progress-description full-size-max"> {{\'Preview\' | translate}} <span class="right-only border-gray"><img class="img-max-width-pre" ng-src="{{g.preview}}"></span> </div> </div> <div class="progress progress-xs progress-label-top-right"> <div class="progress-bar progress-bar-{{g.verified ? \'success\' : \'danger\'}}" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%" data-toggle="tooltip" title="100% Used"> </div> <span>{{g.verified ? \'Connected\' : \'Connection error\' | translate}}</span> </div> </div> <div class="card-pf-footer"> <div class="card-pf-time-frame-filter"> <div ng-show="g.onSave" class="spinner spinner-sm adjust-margin spinner-right"></div> </div> <p> <button data-toggle="modal" data-target="#newSourceModal" ng-click="modifySource(g)" class="btn btn-primary" type="button">{{\'Modify\' | translate}}</button> <button ng-click="selectSource(g)" data-toggle="modal" data-target="#deleteModal" class="btn btn-danger" type="button">{{\'Delete\' | translate}}</button> </p> </div> </div> </div> </div> <button ng-if="!(allSources | isEmpty)" data-toggle="modal" data-target="#newSourceModal" class="btn btn-primary btn-lg right-only">{{\'Create new source\' | translate}}</button> \x3c!-- END SOURCES --\x3e </div> </div> <div class="modal fade" id="newSourceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'New source\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="newSource.verified ? saveSource(newSource) : undefined"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Name\' | translate}}</label> <div class="col-sm-9"> <input type="hidden" value="{{newSource.currentDescr}}"> <input required ng-model="newSource.descr" type="text" class="form-control profile-new-name"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Extension\' | translate}}</label> <div class="col-sm-9"> <select data-live-search="true" title="-" pf-select="{ width: \'180px\' }" ng-model="newSource.exten" ng-options="u.id as (u.name + \' - \' + u.id) for u in users"> </select></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'URL\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newSource.url" type="url" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Opening code\' | translate}}</label> <div class="col-sm-9"> <input ng-model="newSource.open" pattern="^[*+#]*[0-9]+([*#]+)?" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Profile\' | translate}}</label> <div class="col-sm-9"> <select multiple required title="-" pf-select="{ width: \'180px\' }" ng-model="newSource.profiles" ng-options="p.id as p.name for p in allProfiles"> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Connection\' | translate}}</label> <div class="col-sm-9"> <button ng-click="checkConnection(newSource)" ng-disabled="!newSource.url && !newSource.open" class="btn btn-primary" type="button">{{\'Check\' | translate}}</button> <div ng-show="newSource.isChecking" class="spinner spinner-sm inline-display language-name check-connection"></div> <span ng-show="!newSource.isChecking && newSource.checked && newSource.verified" class="pficon pficon-ok check-status"></span> <span ng-show="!newSource.isChecking && newSource.checked && !newSource.verified" class="pficon pficon-error-circle-o check-status"></span> </div> </div> <div ng-if="newSource.verified" class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Preview\' | translate}}</label> <div class="col-sm-9"> <img class="img-max-width" ng-src="{{newSource.preview}}"> </div> </div> <div ng-show="newSource.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button ng-click="cancelSource(newSource)" type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary {{newSource.verified ? \'\' : \'disabled\'}}">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Delete" | translate}} {{currentSource.descr}} </h4> </div> <div class="modal-body"> <div class="form-group medium-font no-margin-bottom"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit adjust-header"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteSource(currentSource)"> {{ "Delete" | translate }} </button> </div> </div> </div> </div>'),e.put("views/configurations/devices.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'groups\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'configurations/groups\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'Groups\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'profiles\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'configurations/profiles\')"> <span class="wizard-pf-step-number">2</span> <span class="wizard-pf-step-title">{{\'Profiles\' | translate}}</span></a> </li> <li ng-if="wizard.provisioning != \'tancredi\'" class="wizard-pf-step {{resolveActiveTab(\'devices\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/devices\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Devices\' | translate}}</span></a> </li> <li ng-if="wizard.provisioning != \'tancredi\'" class="wizard-pf-step {{resolveActiveTab(\'configurations\',2) ? \'active\' : \'\'}}" data-tabgroup="4"> <a ng-click="goTo(\'configurations/preferences\')"> <span class="wizard-pf-step-number">4</span> <span class="wizard-pf-step-title">{{\'Users\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Devices configuration\' | translate}}</h1> <div ng-if="!(networks | isEmpty)" class="container-fluid"> <div class="col-xs-12 col-sm-6 col-md-{{12/networkLength}} col-lg-{{12/networkLength}} devices-margin-top" ng-repeat="(key, network) in networks"> <div class="card-pf card-pf-view adjust-card"> <div class="card-pf-body"> <div class="card-pf-top-element"> <span class="pficon pficon-network card-pf-icon-circle"></span> </div> <h2 class="card-pf-title text-center"> {{key}} | <span class="weight">{{network.network}}</span> </h2> <div class="card-pf-items text-center"> <div class="card-pf-item"> <span class="pficon pficon-screen"></span> <span class="card-pf-item-text"><b>{{network.ip}}</b> / </span> <span class="inline-display" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Netmask\' | translate}}: {{network.netmask}}"><input ng-model="network.netmask" type="text" class="form-control config-form"></span> </div> </div> <p class="card-pf-info text-center"> <div class="blank-slate-pf-main-action centered adjust-bottom"> <button ng-click="startScan(key, network)" class="btn btn-primary btn-lg {{tasks[key].currentProgress > 0 && tasks[key].currentProgress < 100 ? \'disabled\' : \'\'}}">{{\'Scan\' | translate}}</button> <div ng-if="tasks[key].currentProgress < 100 && tasks[key].currentProgress != -1" class="spinner spinner-sm spinner-inline spinner-right absolute-icon-right"></div> <div ng-if="tasks[key].currentProgress == 100 || tasks[key].currentProgress == -1" class="pficon pficon-{{tasks[key].currentProgress == 100 ? \'ok\' : \'error-circle-o\'}} icon-right absolute-icon-right"></div> </div> <div ng-if="tasks[key].startScan" class="progress"> <div class="progress-bar {{tasks[key].currentProgress == -1 ? \'progress-bar-danger\' : \'progress-bar-success\'}}" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{tasks[key].currentProgress == -1 ? \'100\' : tasks[key].currentProgress}}%"> <span>{{tasks[key].currentProgress == -1 ? \'100\' : tasks[key].currentProgress}}%</span> </div> </div> </p> </div> </div> </div> </div> <div ng-if="!(allDevices | isEmpty: true)" class="container-fluid scanned-lists"> <div id="#{{networkName}}" class="list-group list-view-pf list-view-pf-view" ng-repeat="(networkName, devices) in allDevices" ng-if="!(devices | isEmpty)"> <div class="row"> <h1 class="col-lg-6 col-md-6 col-sm-12 col-xs-12 adjust-header"> <span class="pficon pficon-network card-pf-icon-circle config-title-icon"></span>{{networkName}} <span class="weight">{{networks[networkName].network}}</span> </h1> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 adjust-search"> <form role="form" class="search-pf has-button" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchDeviceString" type="text" class="form-control input-lg" placeholder="{{\'Search\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> </div> </div> <div class="list-group-item" ng-repeat="device in devices | filter:searchDeviceString | orderBy: \'manufacturer\'"> <div class="list-view-pf-actions"> <div ng-show="device.isInAction" class="spinner spinner-sm adjust-margin"></div> <span ng-show="!device.isInAction" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{device.model ? \'Configured\' : \'Not configured\' | translate}}" class="pficon {{device.model ? \'pficon-ok\' : \'pficon-info\'}} icon-med"></span> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm {{device.model ? \'\' : \'disabled\'}}"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading {{device.model ? \'\' : \'disabled\'}}"> {{device.manufacturer}} </div> <div class="list-group-item-text"> <div class="form-group"> <select pf-select="{ noneSelectedText: \'-\' }" ng-change="setPhoneModel(device)" ng-model="device.model" ng-options="m for m in allModels[device.manufacturer] | orderBy:orderByValue"> <option value="">-</option> </select> </div> </div> </div> <div class="list-view-pf-additional-info config-info {{device.model ? \'\' : \'disabled\'}}"> <div>IP: <b>{{device.ipv4}}</b></div> <div>MAC: <b>{{device.mac}}</b></div> </div> </div> </div> </div> </div> </div> <div ng-if="networks | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-network"></span> </div> <h1> {{\'No networks found\' | translate}} </h1> <p> {{\'There are problems to get networks configurations\' | translate}} </p> </div> <div ng-if="!(networks | isEmpty) && (allDevices | isEmpty: true) && scanned == true" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-phone"></span> </div> <h1> {{ \'No devices found\' | translate }} </h1> <p> {{\'Check if the devices are connected in your network\' | translate}} </p> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div>'),e.put("views/configurations/groups.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'groups\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'configurations/groups\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'Groups\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'profiles\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'configurations/profiles\')"> <span class="wizard-pf-step-number">2</span> <span class="wizard-pf-step-title">{{\'Profiles\' | translate}}</span></a> </li> <li ng-if="wizard.provisioning != \'tancredi\'" class="wizard-pf-step {{resolveActiveTab(\'devices\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/devices\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Devices\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'preferences\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/preferences\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Users\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'CTI Groups Configuration\' | translate}}</h1> <div ng-if="onSaveSuccess" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Group saved\' | translate}}.</strong> {{\'Group saved with success\' | translate}} </div> <div ng-if="onSaveError" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Group not saved\' | translate}}.</strong> {{\'Group saving error\' | translate}} </div> <div ng-if="!(allGroups | isEmpty)" class="row row-cards-pf adjust-card groups-margin-top"> <div ng-repeat="g in allGroups | orderBy:\'name\'" class="col-xs-12 col-sm-6 col-md-4 col-lg-3"> <div class="card-pf"> <h2 class="card-pf-title"> <span class="fa fa-users"></span> {{g.name}} </h2> <div class="card-pf-footer"> <div class="card-pf-time-frame-filter"> <div ng-show="g.onSave" class="spinner spinner-sm adjust-margin spinner-right"></div> </div> <p> <button ng-click="deleteGroup(g)" class="btn btn-danger" type="button">{{\'Delete\' | translate}}</button> </p> </div> </div> </div> </div> <button ng-if="!(allGroups | isEmpty)" data-toggle="modal" data-target="#newGroupModal" class="btn btn-primary btn-lg right-only">{{\'Create new group\' | translate}}</button> </div> <div ng-if="allGroups | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-object-group"></span> </div> <h1> {{\'No groups found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#newGroupModal" class="btn btn-primary btn-lg">{{\'Create new group\' | translate}}</button> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step>  <div class="modal fade" id="newGroupModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'New CTI group\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="saveGroup(newGroup)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Name\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newGroup.name" type="text" class="form-control profile-new-name"></div> </div> <div ng-show="newGroup.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>'),e.put("views/configurations/preferences.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'groups\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'configurations/groups\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'Groups\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'profiles\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'configurations/profiles\')"> <span class="wizard-pf-step-number">2</span> <span class="wizard-pf-step-title">{{\'Profiles\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'preferences\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/preferences\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Users\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size no-margin-bottom"> <h1 class="control-label centered" for="textInput-markup">{{\'Users Configuration\' | translate}}</h1> <div class="container-fluid mt-10"> <div class="form-group"> <div class="filter-label-user adjust-filter-user">{{\'Filter\' | translate}}:</div> <select class="adjust-filter-user" title="-" pf-select="{ width: \'180px\' }" ng-model="usersFilter" ng-options="uf as uf | translate for uf in availableUserFilters"> </select> <div class="filter-label-user-order"> <select title="-" pf-select="{ width: \'180px\' }" ng-model="usersFilterNumbers" ng-options="uf as uf | translate for uf in availableUserFiltersNumbers"></select> <i class="fa fa-sort-alpha-asc"></i> </div> </div> <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details"> <div class="form-group"> <div class="search-pf-input-group"> <input ng-model="searchUser" type="text" class="form-control input-lg ng-binding" placeholder="{{\'Search users\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> </div> <div class="list-group list-view-pf list-view-pf-view mt-20"> \x3c!-- repeat --\x3e <div ng-repeat="user in allUsers | customFilterMultiple:\'displayname,username,default_extension,configurationsUsersSearch\':searchUser | withExtension | limitTo: usersLimit | orderBy:usersFilterNumbers" ng-show="usersFilter == \'configured\' ? user.devices.length > 0 : (usersFilter == \'unconfigured\' ? user.devices.length == 0 : true)" class="list-group-item {{user.username == currentUser.username ? \'list-view-pf-expand-active\' : \'\'}}"> <div class="list-group-item-header"> <div class="list-view-pf-actions"> <div> <button ng-click="openDevices(user)" data-toggle="modal" data-target="#devicesAssociation" type="button" class="btn btn-primary"> {{"Link device" | translate}} </button> </div> </div> <div ng-click="!loadingUser[currentUser.username] ? setCurrentUser(user) : \'\'" class="list-view-pf-main-info"> <div class="list-view-pf-left"><span aria-hidden="true" class="fa fa-user list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading {{user.username == currentUser.username ? \'fz-13-6-16\' : \'\'}}">{{user.username}} - {{user.default_extension}}</div> <div class="list-group-item-text">{{user.displayname}}</div> </div> <div class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"><span class="fa fa-cubes"></span><strong>{{user.devices.length}}</strong> {{ (user.devices.length !== 1 ? "Devices" : "Device") | translate }}</div> </div> </div> </div> </div> <div ng-show="!hiddenUser[user.username]" ng-if="currentUser.username == user.username" class="list-group-item-container container-fluid cursor-default"> <div ng-show="loadingUser[user.username]" class="spinner mt-14 mb-14"></div> <div ng-show="!loadingUser[user.username]" class="col-lg-12 plateral-10"> <div id="configSettings" class="settings-container"> <div class="list-group-item back-whitesmoke cursor-default border-color-whitesmoke mt-15"> <div class="list-group-item-header back-whitesmoke cursor-default"> <div class="list-view-pf-main-info pb-12 pt-12"> <div class="list-view-pf-left"> <span aria-hidden="true" class="fa fa-cogs list-view-pf-icon-sm no-border-left no-border-right no-border-top no-border-radius border-bottom-color-grey"> </span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading">{{ \'User settings\' | translate }}</div> </div> </div> </div> </div> </div> <div class="list-group-item"> <div class="list-group-item-header background-white"> <div class="list-view-pf-main-info cursor-default background-white mt-5"> <div class="col-lg-12"> <div class="col-lg-6 pr-50 divider-border"> <form class="form-horizontal"> <div class="form-group"> <label class="control-label" for="textInputDisabled-markup"> {{"Profile" | translate}}</label> <select class="mt-3" ng-change="setProfile()" title="-" pf-select="{ width: \'100%\' }" ng-model="currentUser.profile" ng-options="p.id as p.name | translate for p in allProfiles"> </select> </div> <div class="form-group"> <label class="control-label" for="textInput-markup"> {{"Group" | translate}} </label> <select class="mt-3" multiple ng-change="setGroup()" title="-" pf-select="{ width: \'100%\' }" ng-model="currentUser.groups" ng-options="p.id as p.name for p in allGroups"> </select> </div> </form> </div> <div class="col-lg-6 pl-50"> <form class="form-horizontal" ng-submit="setMobileNumber(currentUser)"> <div class="form-group"> <label class="control-label" for="textInput-markup"> {{"Mobile" | translate}} </label> <div class="input-group display-flex mt-3 no-margin-bottom"> <input ng-model="currentUser.mobile" type="tel" class="form-control" placeholder="{{\'Mobile\' | translate}}"> <button type="submit" class="btn btn-default adjust-button" aria-haspopup="true" aria-expanded="false"> {{"Set" | translate}} </button> <span ng-if="currentUser.setMobileInAction == \'ok\'" class="pficon pficon-ok fz-18 absolute-position mt-3 right-25"></span> <span ng-if="currentUser.setMobileInAction == \'err\'" class="pficon pficon-error-circle-o fz-18 absolute-position mt-3 right-25"></span> <div ng-if="currentUser.setMobileInAction == true" class="spinner spinner-sm language-name absolute-position mt-3 right-25"></div> </div> </div> <div class="form-group"> <label class="control-label" for="textInputDisabled-markup"> {{"Voicemail" | translate}} </label> <div class="mt-3"> <input bs-switch ng-model="currentUser.voiceMailState" ng-change="setVoiceMail()" id="bootstrap-switch-voicemail-{{currentUser.id}}" class="bootstrap-switch bootstrap-switch-voicemail col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </form> </div> </div> </div> </div> </div> </div> <div id="configDevices" class="devices-container mb-15"> <div class="list-group-item back-whitesmoke cursor-default border-color-whitesmoke mt-25"> <div class="list-group-item-header back-whitesmoke cursor-default"> <div class="list-view-pf-main-info pb-12 pt-12"> <div class="list-view-pf-left"> <span aria-hidden="true" class="fa fa-cubes list-view-pf-icon-sm no-border-left no-border-right no-border-top no-border-radius border-bottom-color-grey"> </span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading">{{"Linked devices" | translate}}</div> </div> </div> </div> </div> </div> <div ng-repeat="device in user.devices | orderBy: device.extension track by device.id"> \x3c!-- physical, temporary physical and custom --\x3e <div ng-if="device.type == \'physical\' || device.type == \'temporaryphysical\'" class="list-group-item cursor-default {{!device.mac && (device.type === \'temporaryphysical\') ? \'device-warning-bg\' : \'\'}}"> <div class="list-view-pf-actions"> <div class="display-flex"> \x3c!-- provisioning info --\x3e <button type="button" class="btn btn-default" ng-click="openProvisioningInfo(device.mac, device.extension)"> {{ \'Info\' | translate }} </button> <button ng-click="deletePhysicalExtension(device, device.extension)" class="btn btn-default mr-2"> {{"Unlink" | translate}} </button> <span ng-if="device.setPhysicalInAction == \'ok\'" class="pficon pficon-ok fz-18 ml-5 mt-3"></span> <span ng-if="device.setPhysicalInAction == \'err\'" class="pficon pficon-error-circle-o fz-18 ml-5 mt-3"></span> <div ng-if="device.setPhysicalInAction == true" class="spinner spinner-sm ml-5 mt-3"></div> <div class="tooltip-wrapper" ng-if="device.mac" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" popover-class="popover-small-width" uib-popover="{{!device.registered ? \'cant_reboot_not_registered\' : \'\' | translate}}"> <button class="btn btn-default" ng-click="rebootDevice(device)" ng-disabled="!device.registered"> {{ \'Reboot\' | translate }} </button> </div> <span ng-if="device.rebootInAction == \'ok\'" class="pficon vertical-sub pficon-ok fz-18 ml-5 mt-3"></span> <span ng-if="device.rebootInAction == \'err\'" class="pficon vertical-sub pficon-error-circle-o fz-18 ml-5 mt-3" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Error rebooting phone\' | translate}}"></span> <div ng-if="device.rebootInAction == true" class="spinner vertical-sub inline-display spinner-sm ml-5 mt-3"></div> </div> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body config-list-devices"> <div class="list-view-pf-description"> <div title="{{!device.mac && device.type === \'physical\' ? \'Custom\' : !device.mac && device.type === \'temporaryphysical\' ? \'Temporary\' : device.manufacturer | translate}} - {{device.extension}}" class="list-group-item-heading configDevices-item-heading display-flex"> <span ng-if="device.manufacturer">{{device.manufacturer}}</span> \x3c!-- when custom --\x3e <span ng-if="!device.mac && (device.type === \'physical\')"> {{"Custom" | translate}} </span> \x3c!-- when temporary --\x3e <span ng-if="!device.mac && (device.type === \'temporaryphysical\')"> {{"Temporary" | translate}} </span> \x3c!-- extension --\x3e <span class="ml-3"> {{device.extension ? " - " + device.extension : ""}} </span> \x3c!-- temporary description --\x3e <span ng-if="!device.mac && (device.type === \'temporaryphysical\')" class="pficon pficon-warning-triangle-o ml-10 fs-15 mt-3" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" popover-class="popover-small-width" uib-popover="{{\'Unlink the device and link it again with the new provisioning\' | translate}}!"> </span> </div> <span class="weight-plus mr-20"> </span> <div class="list-group-item-text"> <div class="col-lg-6 mxw-211"> \x3c!-- model select for physical devices not custom or temporary --\x3e <div class="form-group no-margin-bottom" ng-if="!(!device.mac && (device.type === \'physical\' || device.type === \'temporaryphysical\'))"> <div class="display-flex miw-135"> <select class="mxw-150 mnw-55 pf-select" pf-select="{ noneSelectedText: \'-\' }" data-live-search="true" ng-change="setDeviceModel(device)" ng-model="device.model" ng-options="model.display_name for model in device.availableModels | orderBy:\'display_name\'"> <option ng-hide="device.model != null" value="">-</option> </select> <button ng-if="true" ng-disabled="!device.model" ng-click="setCurrentModelConfig(device.model.name, device.mac)" class="btn btn-default adjust-button zindex-2"> <i class="fa fa-pencil"></i> </button> </div> </div> \x3c!-- show secret for custom devices and temporary --\x3e <button ng-if="!device.mac && device.encryption && (device.type === \'physical\' || device.type === \'temporaryphysical\')" ng-click="setModalPhysical(device)" class="btn btn-default encryptedButtonModal" data-toggle="modal" data-target="#encryptedModal">{{"Basic configuration" | translate}}</button> <div class="modal fade" id="encryptedModal" tabindex="-1" role="dialog" aria-labelledby="modalEncrypted" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <div class="modal-title" id="modalEncrypted"><span id="warningModal" class="pficon-warning-triangle-o"></span></div> <div class="labelTitleEncrypted"><b>{{"Fundamental steps" | translate}}</b></div> </div> <div class="modal-body"> <ul class="modalListConfiguration"> <li class="listConfiguration"><b>{{"Indirizzo Centralino" | translate}}:</b> {{hostname}}</li> <li class="listConfiguration"><b>{{"Configurare porta 5061" | translate}}</b> </li> <li class="listConfiguration"><b>{{"Abilitare trasporto TLS" | translate}}</b></li> <li class="listConfiguration"><b>{{"Configurare audio sicuro SRTP" | translate}}</b></li> <li class="listConfiguration"><b>{{"default_extension" | translate}}:</b> {{deviceExtension}}</li> <li class="listConfiguration" id="showPassword" data-content="{{passwordExtension}}"><b>{{"Password" | translate}}:</b> {{passwordExtension}} <clipboard-copy class="pficon-blueprint" value="{{passwordExtension}}" ng-click="copyPassword()" data-toggle="tooltip" data-placement="top" title="{{\'Copy password\' | translate}}"> </clipboard-copy> <i ng-show="copiedPassword" class="fa fa-check copyedPassword text-color-green absolute-position mt-5 ml-7 fz-15"> </i> </li> </ul> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{"Close"| translate}}</button> </div> </div> </div> </div> <button ng-if="!device.mac && !device.encryption && (device.type === \'physical\' || device.type === \'temporaryphysical\')" ng-click="setModalPhysical(device)" class="btn btn-default encryptedButtonModal" data-toggle="modal" data-target="#myModal">{{"Basic configuration" | translate}}</button> <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="modalEncrypted" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <div class="modal-title" id="myModalLabel"><span id="warningModal" class="pficon-warning-triangle-o"></span></div> <div class="labelTitleEncrypted"><b>{{"Fundamental steps" | translate}}</b></div> </div> <div class="modal-body"> <ul class="modalListConfiguration"> <li class="listConfiguration"><b>{{"Indirizzo Centralino" | translate}}: </b>{{hostname}}</li> <li class="listConfiguration"><b>{{"Configurare porta 5060" | translate}} </b></li> <li class="listConfiguration"><b>{{"Abilitare trasporto UDP" | translate}} </b></li> <li class="listConfiguration"><b>{{"Configurare audio non criptato" | translate}}</b></li> <li class="listConfiguration"><b>{{"default_extension" | translate}}:</b> {{deviceExtension}}</li> <li class="listConfiguration" id="showPassword" data-content="{{passwordExtension}}"><b>{{"Password" | translate}}: </b>{{passwordExtension}} <clipboard-copy class="pficon-blueprint" value="{{passwordExtension}}" ng-click="copyPassword()" data-toggle="tooltip" data-placement="top" title="{{\'Copy password\' | translate}}"> </clipboard-copy> <i ng-show="copiedPassword" class="fa fa-check copyedPassword text-color-green absolute-position mt-5 ml-7 fz-15"> </i> </li> </ul> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{"Close"| translate}}</button> </div> </div> </div> </div> </div> <div class="col-lg-5 mnw-180 {{!device.mac ? \'eswitch-mt2\' : \'eswitch-mt\'}}" ng-if="device.type != \'temporaryphysical\'"> <div class="list-view-pf-additional-info config-info"> <input bs-switch class="encryption-switch" ng-model="device.encryption" switch-on-text="{{\'ENCRYPTED\' | translate}}" switch-off-text="{{\'UNENCRYPTED\' | translate}}" switch-handle-width="88" switch-label-width="21" ng-change="switchEncryption(device)" id="bootstrap-switch-encrypt-{{currentUser.id}}" class="bootstrap-switch col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </div> </div> <div class="list-view-pf-additional-info config-info"> \x3c!-- mac for non-custom devices --\x3e <div class="pl-20" ng-if="!(!device.mac && (device.type === \'physical\' || device.type === \'temporaryphysical\'))"> MAC: <b class="ng-binding">{{ device.mac }}</b> </div> \x3c!-- web credentials for custom devices --\x3e <div ng-if="!device.mac && (device.type === \'physical\' || device.type === \'temporaryphysical\')"> \x3c!-- <div>{{\'Web user\' | translate}}:\n                            <b>{{device.web_user}}</b>\n                          </div>\n                          <div>{{\'Web password\' | translate}}:\n                            <b>{{device.web_password}}</b>\n                          </div> --\x3e </div> </div> </div> </div> </div> </div> \x3c!-- webrtc --\x3e <div class="list-group-item abstract-item cursor-default ng-scope"> <div class="list-view-pf-actions"> <div class="display-flex"> </div> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-headphones list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading configDevices-item-heading"> {{"Web Phone" | translate}} <span ng-repeat="device in user.devices" ng-if="device.type == \'webrtc\'"> <span>-</span> <span>{{device.extension}}</span> </span> </div> <span class="weight-plus"> </span> <div class="list-group-item-text"> <div class="col-lg-6"> <div class="form-group no-margin-bottom"> <div class="display-flex"> <input bs-switch ng-model="currentUser.webRtcState" ng-change="setWebRTC()" id="bootstrap-switch-webrtc-{{currentUser.id}}" class="bootstrap-switch bootstrap-switch-webrtc col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </div> </div> </div> <div class="list-view-pf-additional-info config-info"> </div> </div> </div> </div> \x3c!-- mobile app --\x3e <div class="list-group-item abstract-item cursor-default ng-scope"> <div class="list-view-pf-actions"> <div class="display-flex"> </div> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-mobile list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading configDevices-item-heading"> {{"Mobile App" | translate}} <span ng-repeat="device in user.devices" ng-if="device.type == \'mobile\'"> <span>-</span> <span>{{device.extension}}</span> </span> </div> <span class="weight-plus"> </span> <div class="list-group-item-text"> <div class="col-lg-6"> <div class="form-group no-margin-bottom"> <div class="display-flex"> <input bs-switch ng-model="currentUser.mobileAppState" ng-change="toggleMobileApp()" id="bootstrap-switch-mobile-{{currentUser.id}}" class="bootstrap-switch bootstrap-switch-webrtc col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </div> </div> </div> <div class="list-view-pf-additional-info config-info"> </div> </div> </div> </div> </div> </div> </div> </div> <scrolling-sentinel event="configScroll"></scrolling-sentinel> \x3c!-- end repeat --\x3e </div> <div class="{{wizard.isWizard ? \'h-60\' : \'h-12\'}}"> </div> <div ng-if="false" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'No users found\' | translate}} </h1> <p ng-if="!mode.isLdap"> {{\'Check your LDAP or Active Directory settings\' | translate}} </p> <div ng-if="providerLocal" class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#createUser" class="btn btn-primary btn-lg">{{\'Create user\' | translate}}</button> <button ng-click="fileSelectImport()" class="btn btn-primary btn-lg no-margin">{{\'Import\' | translate}}</button> <input ng-model="temp.importFile" type="file" accept=".csv" id="importInput"> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> <div class="modal fade" id="devicesAssociation" tabindex="-1" role="dialog" aria-hidden="true"> <div class="wizard-modal"> <div class="modal-dialog wizard-pf margin-10"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="dfSettingsMLabel">{{\'Link device\' | translate}}</h4> </div> <form class="form-horizontal"> <div class="modal-body"> <div class="col-lg-12 mb-5 mt-15"> \x3c!-- loader --\x3e <div ng-show="linkToUserInProgress" class="centered"> <div class="spinner mt-14 mb-10"></div> </div> <div ng-show="!linkToUserInProgress"> \x3c!-- choose device to link --\x3e <div ng-show="!showResultLinkToUser"> <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details"> <div class="form-group has-clear mt-10 no-lateral-margins display-flex"> <div class="search-pf-input-group full-width" id="filter-domains-details"> <input ng-model="searchDeviceString" type="text" class="form-control input-lg ng-pristine ng-valid ng-touched" placeholder=" {{\'Search devices\' | translate}}..."> </div> <button class="btn btn-default btn-lg mln-1" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <h1 class="control-label config-title-user no-margin-top" for="textInput-markup"> <div class="fz-15 mb-10"> <span class="weight-plus ng-binding">{{devicesNotLinked.length}} {{ (devicesNotLinked.length !== 1 ? "Devices" : "Device") | translate }}</span> </div> </h1> <div id="devices-not-linked-list" ng-style="{\'max-height\': devicesNotLinkedHeight}"> \x3c!-- custom device --\x3e <div class="list-group-item cursor-default back-whitesmoke {{deviceToLink.device == newDevice ? \'selected\' : \'\'}}"> <label for="radio-custom-device" class="width-100p pointer no-margin-bottom"> <div class="list-view-pf-actions"> </div> <div class="list-view-pf-checkbox display-flex"> <input type="radio" id="radio-custom-device" class="mt-2" name="deviceToLinkGroup" ng-model="deviceToLink.device" ng-value="newDevice"> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading configDevices-item-heading mxw-200"> {{\'New custom device\' | translate}} </div> <span class="weight-plus mr-20"> </span> <div class="list-group-item-text"> <div class="col-lg-7"> </div> </div> </div> <div class="list-view-pf-additional-info config-info"> \x3c!-- <div>{{\'Web user\' | translate}}:\n                                  <input class="form-control" placeholder="admin" ng-model="newDevice.web_user">\n                                </div>\n                                <div>{{\'Web password\' | translate}}:\n                                  <input class="form-control" placeholder="admin" ng-model="newDevice.web_password">\n                                </div> --\x3e </div> </div> </div> </label> </div> \x3c!-- devices --\x3e <div ng-show="!devicesLoading" ng-repeat="device in devicesNotLinked | customFilterMultiple:\'mac,manufacturer,model\':searchDeviceString | limitTo: devicesNotLinkedLimit" class="list-group-item cursor-default {{deviceToLink.device == device ? \'selected\' : \'\'}} {{$last ? \'no-margin-bottom\' : \'\'}}"> <label for="radio-device-{{$index}}" class="width-100p pointer no-margin-bottom"> <div class="list-view-pf-actions"> </div> \x3c!-- radio button --\x3e <div class="list-view-pf-checkbox display-flex"> <input type="radio" id="radio-device-{{$index}}" class="mt-2" name="deviceToLinkGroup" ng-model="deviceToLink.device" ng-value="device"> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading configDevices-item-heading no-margin-bottom"> {{ device.manufacturer && device.model !== \'custom\' ? device.manufacturer : \'-\' }} </div> <span class="weight-plus mr-20 width-33p"> {{ device.model.display_name ? device.model.display_name : \'-\' }} </span> <div class="list-group-item-text"> <div class="col-lg-7"> </div> </div> </div> <div class="list-view-pf-additional-info config-info"> <div ng-if="device.mac">MAC: <b>{{device.mac}}</b></div> </div> </div> </div> </label> </div> <scrolling-sentinel event="configDevicesScroll"></scrolling-sentinel> </div> </div> \x3c!-- link to user result --\x3e <div ng-show="showResultLinkToUser"> <form class="form-horizontal"> \x3c!-- success --\x3e <div ng-show="linkToUserSuccess" class="alert alert-success mb-40"> <span class="pficon pficon-ok"></span> <span> {{ \'Device linked to user successfully\' | translate }} </span> </div> \x3c!-- error --\x3e <div ng-show="!linkToUserSuccess" class="alert alert-danger alert-dismissable mb-40"> <span class="pficon pficon-error-circle-o"></span> <p> <strong>{{ \'Error\' | translate }}:</strong> {{ \'Could not link device to user\' | translate }} </p> </div> </form> </div> </div> </div> </div> <div class="modal-footer submit"> <div ng-show="!showResultLinkToUser && !linkToUserInProgress"> <button type="button" class="btn btn-default mt-12" data-dismiss="modal">{{ \'Cancel\' | translate }} </button> <button class="btn btn-primary mt-12" ng-disabled="deviceToLink.device == null" ng-click="setPhysicalExtension(deviceToLink.device)"> {{"Link to" | translate}} {{linkTo || ("user" | translate)}} </button> </div> <div ng-show="showResultLinkToUser"> <button type="button" class="btn btn-default mt-12" data-dismiss="modal">{{ \'Close\' | translate }}</button> </div> </div> </form> </div> </div> </div> </div> <div class="modal fade" id="singleModelModal" tabindex="-1" role="dialog" aria-hidden="true"> <div class="wizard-modal"> <div class="modal-dialog wizard-pf margin-10"> <div class="modal-content mb-40"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="dfSettingsMLabel">{{\'Edit the phone settings\' | translate}}</h4> </div> <div class="modal-body" ng-style="{\'padding\':\'0px\'}"> \x3c!-- start model ui--\x3e <div id="modelsUIUrl" ng-include="modelsUIUrl"></div> </div> </div> </div> </div> </div> <div class="modal fade" id="uploadFileModal" ng-controller="FileUploadCtrl" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" ng-include="fileUploadUIUrl"></div> <div class="modal fade" id="provisioningInfoModal" tabindex="-1" role="dialog" aria-labelledby="extenDetailsModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Phone provisioning info\' | translate}} {{data.selExten.exten}}</h4> </div> <div class="modal-body"> <div ng-if="emptyDeviceInfo" class="alert alert-warning"> <span class="pficon pficon-warning-triangle-o"></span> <strong> {{"Phone not registered" | translate}}. </strong> <p> {{"Register a phone to see the informations" | translate}}! </p> </div> <form ng-if="!emptyDeviceInfo" class="form-horizontal"> <div class="form-group"> <label class="col-sm-4 control-label">{{\'MAC address\' | translate}}</label> <div class="col-sm-8"> <label class="control-label">{{currentPhoneInfo.mac}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'IP address\' | translate}}</label> <div class="col-sm-8"> <label class="control-label">{{currentPhoneInfo.ip || "-"}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'Provisioning URL\' | translate}}</label> <div class="col-sm-8"> <div class="w-75"> <label class="control-label full-width left-align"> <button class="btn btn-default ml-10" id="showurlbtn" data-container="body" data-toggle="popover" data-placement="top" data-content="{{currentPhoneInfo.provisioning_url1 ? currentPhoneInfo.provisioning_url1 : currentPhoneInfo.provisioning_url2}}"> {{"Show url" | translate}} </button> </label><br> <label class="control-label mt-10 full-width left-align"> \x3c!-- <button\n                    class="btn btn-primary full-width"\n                    ng-click="copyToClipboard(urlToCopy)">\n                    {{"Copy url" | translate}}\n                  </button> --\x3e <clipboard-copy class="btn btn-primary full-width ml-10" value="{{urlToCopy}}" ng-click="copyUrl()"> {{"Copy url" | translate}} </clipboard-copy> <i ng-show="copiedUrl" class="fa fa-check text-color-green absolute-position mt-5 ml-7 fz-15"> </i> </label> </div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'Provisioning status\' | translate}}</label> <div class="col-sm-8"> <label class="control-label {{currentPhoneInfo.provisioning_url1 ? \'\' : \'text-color-green\'}}"> {{currentPhoneInfo.provisioning_url1 ? "Pending" : "Completed" | translate}} </label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'User agent\' | translate}}</label> <div class="col-sm-8"> <label class="control-label"> {{currentPhoneInfo.model ? currentPhoneInfo.model : "-"}} </label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'Codecs\' | translate}}</label> <div class="col-sm-8"> <label class="control-label"> {{currentPhoneInfo.codecs}} </label> </div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{"Cancel" | translate}}</button> </div> </div> </div> </div>'),e.put("views/configurations/preferencesFreepbx.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'groups\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'configurations/groups\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'Groups\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'profiles\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'configurations/profiles\')"> <span class="wizard-pf-step-number">2</span> <span class="wizard-pf-step-title">{{\'Profiles\' | translate}}</span></a> </li> <li ng-if="wizard.provisioning != \'tancredi\'" class="wizard-pf-step {{resolveActiveTab(\'devices\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/devices\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Devices\' | translate}}</span></a> </li> <li ng-if="wizard.provisioning != \'tancredi\'" class="wizard-pf-step {{resolveActiveTab(\'configurations\',2) ? \'active\' : \'\'}}" data-tabgroup="4"> <a ng-click="goTo(\'configurations/preferencesFreepbx\')"> <span class="wizard-pf-step-number">4</span> <span class="wizard-pf-step-title">{{\'Users\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size row no-margin-bottom"> <h1 class="control-label centered configuration-title-margin-top" for="textInput-markup">{{\'Users Configuration\' | translate}}</h1> <div ng-if="!(users | isEmpty)" class="container-fluid col-lg-5 col-md-6 col-sm-6 col-xs-12 stop-less-config-col"> <div> <div class="filter-label-user adjust-filter-user">{{\'Filter\' | translate}}:</div> <select class="adjust-filter-user" title="-" pf-select="{ width: \'180px\' }" ng-model="selectedUserFilter" ng-options="uf as uf | translate for uf in availableUserFilters"> </select> <div class="filter-label-user-order"> <select title="-" pf-select="{ width: \'100px\' }" ng-model="selectedUserFilterNumbers" ng-options="uf as uf | translate for uf in availableUserFiltersNumbers"></select> <i class="fa fa-sort-alpha-asc"></i> </div> </div> <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchUserUserString" type="text" class="form-control input-lg" placeholder="{{\'Search users\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <span> <div class="user-config-detail"> <span class="selectedUser"> <span class="weight-plus">{{selectedUser.displayname}}</span> | {{selectedUser.devices.length}} {{selectedUser.devices.length == 1 ? \'device\' : \'devices\' | translate}}</span> <span ng-if="!selectedUser"> <span class="weight-plus">{{\'No users configured\' | translate}}</span> </span> </div> </span> <div class="list-group list-view-pf list-view-pf-view adjust-body-user" when-scrolled="scrollingUserContainer()"> <div ng-repeat="user in users | customFilterMultiple:\'displayname,username,default_extension\':searchUserUserString | orderBy:selectedUserFilterNumbers | limitTo: usersLimit"> <div ng-if="user.default_extension !== \'none\'" ng-show="selectedUserFilter == \'configured\' ? user.devices.length > 0 : (selectedUserFilter == \'unconfigured\' ? user.devices.length == 0 : true)" class="list-group-item {{selectedUser.id == user.id ? \'selected\' : \'\'}}" ng-click="selectUser(user)"> <div class="list-view-pf-actions"> <span ng-if="user.default_extension == \'none\'" popover-placement="left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Main extension not created\' | translate}}" class="pficon pficon-warning-triangle-o icon-med"></span> <span ng-if="user.default_extension != \'none\'" popover-placement="left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{user.profile ? \'Configured\' : \'No profile associated\' | translate}}" class="pficon {{user.profile ? \'pficon-ok\' : \'pficon-warning-triangle-o\'}} icon-med"></span> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-user list-view-pf-icon-sm {{user.default_extension === \'none\' ? \'disabled\' : \'\'}}"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading {{user.default_extension === \'none\' ? \'disabled\' : \'\'}}"> {{user.username}} </div> <div class="list-group-item-text"> <span class="{{user.default_extension === \'none\' ? \'disabled\' : \'\'}}">{{user.displayname}}</span> </div> </div> <div class="list-view-pf-additional-info"> {{user.default_extension !== \'none\' ? user.default_extension : \'\'}} </div> </div> </div> </div> <div class="configurationSettingsContainers" ng-if="selectedUser.id == user.id"> <div class="row no-lateral-margins"> <div class="col-lg-6 col-xs-12 config-bottom less-margin-left-conf min-width-conf-cols"> <div class="list-view-pf-additional-info-item list-view-configuration-settings settings-inputs-configuration"> <span class="col-lg-6 col-md-6 col-sm-12 col-xs-12 align-left-important"> <span class="fa fa-phone"></span> <span class="config-span">{{\'Mobile\' | translate}}</span> </span> <span class="col-lg-6 col-md-6 col-sm-12 col-xs-12 config-span-container"> <input ng-model="selectedUser.mobile" type="text" class="form-control config-form" placeholder="{{\'Mobile\' | translate}}"> <button ng-click="setMobileNumber(selectedUser)" type="button" class="btn btn-default adjust-button" aria-haspopup="true" aria-expanded="false">{{\'Set\' | translate}}</button> </span> <div ng-if="selectedUser.setMobileInAction" class="spinner spinner-sm language-name"></div> </div> <div class="list-view-pf-additional-info-item list-view-configuration-settings settings-inputs-configuration"> <span class="col-lg-6 col-md-6 col-sm-12 col-xs-12 align-left-important"> <span class="fa fa-user"></span> <span class="config-span">{{\'Profile\' | translate}}</span> </span> <span class="col-lg-6 col-md-6 col-sm-12 col-xs-12 config-span-container"> <select ng-change="setProfile()" title="-" pf-select="{ width: \'100%\' }" ng-model="selectedUser.profile" ng-options="p.id as p.name | translate for p in allProfiles"> </select> </span> <div ng-if="selectedUser.setMobileInAction" class="spinner spinner-sm language-name"></div> </div> <div class="list-view-pf-additional-info-item list-view-configuration-settings settings-inputs-configuration"> <span class="col-lg-6 col-md-6 col-sm-12 col-xs-12 align-left-important"> <span class="fa fa-users"></span> <span class="config-span">{{\'Group\' | translate}}</span> </span> <span class="col-lg-6 col-md-6 col-sm-12 col-xs-12 config-span-container"> <select multiple ng-change="setGroup()" title="-" pf-select="{ width: \'100%\' }" ng-model="selectedUser.groups" ng-options="p.id as p.name for p in allGroups"> </select> </span> <div ng-if="selectedUser.setMobileInAction" class="spinner spinner-sm language-name"></div> </div> </div> <div class="col-lg-6 col-xs-12 config-bottom min-width-conf-cols"> <div class="list-view-pf-additional-info-item list-view-configuration-settings"> <span class="col-lg-8 col-md-8 col-sm-8 col-xs-8 text-left padding-left-conf-col"> <span class="fa fa-envelope-o"></span> <span class="config-span">{{\'Voicemail\' | translate}}</span> </span> <input bs-switch ng-model="selectedUser.voiceMailState" ng-change="setVoiceMail()" id="bootstrap-switch-voicemail-{{selectedUser.id}}" class="bootstrap-switch bootstrap-switch-voicemail col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> <div ng-if="selectedUser.setVoiceMailInAction" class="spinner spinner-sm language-name"></div> </div> </div> <div class="col-lg-6 col-xs-12 config-bottom min-width-conf-cols"> <div class="list-view-pf-additional-info-item list-view-configuration-settings"> <span class="col-lg-8 col-md-8 col-sm-8 col-xs-8 text-left padding-left-conf-col"> <span class="fa fa-headphones"></span> <span class="config-span">{{\'WebRTC\' | translate}}</span> </span> <input bs-switch ng-model="selectedUser.webRtcState" ng-change="setWebRTC()" id="bootstrap-switch-webrtc-{{selectedUser.id}}" class="bootstrap-switch bootstrap-switch-webrtc col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> <div ng-if="selectedUser.setWebRTCInAction" class="spinner spinner-sm language-name"></div> </div> </div> <div class="col-lg-6 col-xs-12 config-bottom min-width-conf-cols"> <div class="list-view-pf-additional-info-item list-view-configuration-settings margin-bottom-medium"> <span class="col-lg-8 col-md-8 col-sm-8 col-xs-8 text-left padding-left-conf-col"> <span class="fa fa-mobile"></span> <span class="config-span">{{"Mobile App" | translate}}</span> </span> <input bs-switch ng-model="selectedUser.mobileAppState" ng-change="toggleMobileApp()" id="bootstrap-switch-mobileapp-{{selectedUser.id}}" class="bootstrap-switch bootstrap-switch-webrtc col-lg-6 col-md-6 col-sm-12 col-xs-12" type="checkbox"> </div> </div> </div> </div> </div> </div> </div> <div ng-if="users | isEmpty" class="blank-slate-pf container-fluid col-lg-5 col-md-6 col-sm-6 col-xs-12"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'Configure your users\' | translate}} </h1> <p> {{\'Add main extensions\' | translate}} <a ng-click="goTo(\'extensions\', true)">{{\'here\' | translate}}</a>. </p> </div> <div class="col-lg-7 col-md-6 col-sm-6 col-xs-12 config-adjust-size"> <h1 class="control-label config-title-user" for="textInput-markup"> <div> <div class="filter-label">{{\'Filter\' | translate}}:</div> <select class="adjust-filter" title="-" pf-select="{ width: \'180px\' }" ng-model="selectedDeviceFilter" ng-options="df as df | translate for df in availableDeviceFilters"> </select> </div> <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchDeviceUserString" type="text" class="form-control input-lg adjust-weight" placeholder="{{\'Search devices\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <div class="device-config-detail"> <a class="float-left" ng-if="searchDeviceUserString" ng-click="resetDeviceSearch()"> {{\'Empty search\' | translate}} </a> <span class="weight-plus">{{devices.length}} {{devices.length == 1 ? \'device\' : \'devices\' | translate}}</span> </div> </h1> <div ng-if="maxExtensionReached" class="alert alert-warning alert-dismissable"> <button ng-click="cancelError()" type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Devices limit reached\' | translate}}.</strong> {{\'An user can have up to 7 devices associated\' | translate}}. </div> <div class="container-fluid"> <div class="list-group list-view-pf list-view-pf-view config-view-container" when-scrolled="scrollingDeviceContainer()"> <div class="list-group-item"> <div class="list-view-pf-actions adjust-link"> <button ng-click="setPhysicalExtension(selectedUser, newDevice)" type="button" class="btn btn-primary" aria-haspopup="true" aria-expanded="false"> <span>{{\'Link to\' | translate}} {{selectedUser.displayname}}</span> </button> <div ng-show="newDevice.setPhysicalInAction" class="spinner spinner-sm config-spinner"></div> </div> <div class="list-view-pf-main-info config-list-item-right"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading"> {{\'Custom device\' | translate}} </div> </div> <div class="list-view-pf-additional-info config-info"> <div>{{\'Web user\' | translate}}: <input class="form-control" placeholder="admin" ng-model="newDevice.web_user"> </div> <div>{{\'Web password\' | translate}}: <input class="form-control" placeholder="admin" ng-model="newDevice.web_password"> </div> </div> </div> </div> </div> <div ng-if="!(devices | isEmpty)" id="accordion-markup-{{$index}}" ng-show="checkConfiguredExtensions(device, selectedDeviceFilter)" class="list-group-item {{device.lines[0].mainextension == selectedUser.default_extension ? \'selected\' : \'\'}} {{device.extension ? \'disabled\' : \'\'}} {{device.lines[0].mainextension != null && selectedUser.default_extension !=null && device.lines[0].mainextension != selectedUser.default_extension ? \'associated\' : \'\'}}" ng-repeat="device in devices | filter:searchDeviceUserString | orderBy: [\'manufacturer\',\'model\'] | limitTo: devicesLimit"> <div class="list-view-pf-actions adjust-link"> <button ng-if="device.lines && device.lines.length == 1" ng-click="device.lines[0].extension ? deletePhysicalExtension(device, device.lines[0].extension) : setPhysicalExtension(selectedUser, device)" type="button" class="btn btn-{{device.lines[0].extension ? \'default\' : \'primary\'}}" aria-haspopup="true" aria-expanded="false"> <span>{{device.lines[0].extension ? \'Unlink from\' : \'Link to\' | translate}} {{device.lines[0].extension ? getNameFromExtension(device.lines[0].mainextension) : selectedUser.displayname}}</span> </button> <span ng-if="isConfigured(device) && device.model !== \'custom\'" ng-click="configureAndRebootPhone(device)" popover-placement="left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{device.inError ? \'Provision error, try again\' : \'Provision and reboot phone\' | translate}}" class="{{device.inError ? \'fa fa-times btn btn-danger\' : \'fa fa-magic btn btn-warning\'}} icon-med-reload {{device.lines.length == 1 ? \'\' : \'absolute-provision\'}}"></span> <span ng-if="device.lines && device.lines.length > 1" class="fa fa-angle-down icon-med-reload absolute-expand" data-toggle="collapse" data-parent="#accordion-markup-{{$index}}" href="#collapseOne-{{$index}}"></span> <div ng-show="device.setPhysicalInAction" class="spinner spinner-sm config-spinner"></div> <div ng-if="device.lines && device.lines.length > 1" id="collapseOne-{{$index}}" class="panel-collapse collapse"> <div class="panel-body resized-list"> <div ng-repeat="line in device.lines"> <div class="line-margin-top">{{\'Line\' | translate}} <b>{{line.line}}</b> </div> <div class="space-bottom"> <button ng-click="line.extension ? deletePhysicalExtension(device, line.extension) : setPhysicalExtension(selectedUser, device, line.line)" type="button" class="btn btn-{{line.extension ? \'default\' : \'primary\'}}" aria-haspopup="true" aria-expanded="false"> <span>{{line.extension ? \'Unlink from\' : \'Link to\' | translate}} {{line.extension ? getNameFromExtension(line.mainextension) : selectedUser.displayname}}</span> </button> </div> </div> </div> </div> </div> <div class="list-view-pf-main-info config-list-item-right" data-toggle="collapse" data-parent="#accordion-markup-{{$index}}" href="#collapseOne-{{$index}}"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading"> {{device.manufacturer == \' _\' ? device.lines[0].extension : device.manufacturer}} </div> <div class="list-group-item-text"> <button ng-if="device.model == \'custom\'" popover-animation="true" uib-popover="{{device.lines[0].secret}}" type="button" class="btn btn-default">{{\'Show secret\' | translate}}</button> {{device.model == \'custom\' ? \'\' : device.model}} <span ng-if="device.lines.length > 1"> - {{\'Lines\' | translate}}: <b>{{device.lines.length}}</b> </span> </div> </div> <div class="list-view-pf-additional-info config-info"> <div>{{device.model == \'custom\' ? (\'Web user\' | translate) : \'IP\'}}: <b>{{device.model == \'custom\' ? device.lines[0].web_user : device.ipv4}}</b> </div> <div>{{device.model == \'custom\' ? (\'Web password\' | translate) : \'MAC\'}}: <b>{{device.model == \'custom\' ? device.lines[0].web_password : device.mac}}</b> </div> </div> </div> </div> </div> </div> <div ng-if="!(devices | isEmpty)" class="right config-all-devices"> <a data-toggle="modal" data-target="#bulkModal" popover-placement="left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Configure and reboot the listed phones\' | translate}}" class="btn btn-warning bulk-container"> <span class="fa fa-magic"></span> {{\'Bulk configuration\' | translate}}</a> </div> </div> <div ng-if="devices | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-phone"></span> </div> <h1> {{\'Configure your devices\' | translate}} </h1> <p> {{\'Scan your networks\' | translate}} <a ng-click="goTo(\'users/devices\', true)">{{\'here\' | translate}}</a>. </p> </div> </div> </div> <div id="bulkModal" class="modal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{\'Warning\' | translate}}!</h4> </div> <form class="form-horizontal" ng-submit="bulkPhonesConfiguration(searchDeviceUserString)"> <div class="modal-body"> <div class="alert alert-warning alert-dismissable" style="margin-bottom: 0px"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Are you sure that you want to provision and restart the linked phones\' | translate}}?</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button class="btn btn-warning" type="submit"> <span class="fa fa-magic"></span> {{\'Configure\' | translate}}</button> </div> </form> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div>'),e.put("views/configurations/profiles.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'groups\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'configurations/groups\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'Groups\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'profiles\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'configurations/profiles\')"> <span class="wizard-pf-step-number">2</span> <span class="wizard-pf-step-title">{{\'Profiles\' | translate}}</span></a> </li> <li ng-if="wizard.provisioning != \'tancredi\'" class="wizard-pf-step {{resolveActiveTab(\'devices\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/devices\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Devices\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'preferences\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a ng-click="goTo(\'configurations/preferences\')"> <span class="wizard-pf-step-number">3</span> <span class="wizard-pf-step-title">{{\'Users\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Profiles Configuration\' | translate}}</h1> <div ng-if="!(allProfiles | isEmpty)" class="container-fluid profiles-margin-top"> <div ng-if="gruopsDisabled" class="alert alert-warning alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Some groups have not been enabled\' | translate}}.</strong> {{\'Check your groups permissions\' | translate}} </div> <div ng-if="onSaveSuccess" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Configuration saved\' | translate}}.</strong> {{\'Profiles configuration saved with success\' | translate}} </div> <div class="list-group list-view-pf adjust-margin-extensions no-border"> <div ng-repeat="profile in allProfiles" class="adjust-profile-margin"> <div id="accordion-markup-{{$index}}"> <h1 data-toggle="collapse" data-parent="#accordion-markup-{{$index}}" href="#collapse-{{$index}}" class="adjust-header adjust-profile-header"> <span class="pficon pficon-users card-pf-icon-circle config-title-icon"></span>{{\'Profile\' | translate}} <span class="weight">{{profile.name | translate}}</span> <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> <div ng-show="profile.onSave" class="spinner spinner-sm profile-save-spinner"></div> </h1> <div id="collapse-{{$index}}" class="panel-collapse collapse adjust-profile-body"> <div class="panel-body profile-panel"> \x3c!-- FOR THE SETTINGS MACRO PERMISSION --\x3e <div class="col-lg-12 profile-list-container" ng-repeat="(macro, obj_permissions) in profile.macro_permissions" ng-if="macro === \'settings\'"> <div ng-if="macro !== \'remote_sites\'" class="row profile-macro-title {{!obj_permissions.value ? \'disabled\' : \'\'}}"> <div popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{obj_permissions.description | translate}}" class="col-lg-2 col-md-3 col-sm-4 col-xs-12"> {{obj_permissions.displayname | translate}} </div> <div class="col-lg-1"> <input bs-switch ng-change="saveProfile(profile)" ng-model="obj_permissions.value" class="bootstrap-switch bootstrap-switch-permission" type="checkbox"> </div> <div class="col-lg-10"></div> </div> <div class="row {{obj_permissions.permissions.length > 0 ? \'profile-permission-container\' : \'\'}}" ng-if="obj_permissions.value"> <div ng-hide="permission.name == \'phone_buttons\' && wizard.provisioning != \'tancredi\'" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 profile-permission" ng-repeat="permission in obj_permissions.permissions"> <span class="col-lg-3 col-md-4 col-sm-6 col-xs-6"> <span popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{permission.description | translate}}" class="config-span"> {{permission.displayname | translate}} </span> </span> <span class="col-lg-6 col-md-4 col-sm-6 col-xs-6"> <input bs-switch ng-change="saveProfile(profile, obj_permissions, permission, macro)" ng-model="permission.value" class="bootstrap-switch bootstrap-switch-permission" type="checkbox"> <div ng-if="permissionsStatus[permission.id] === \'error\'" class="cutSpace errorConfiguration alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="cutSpace hideItem pficon pficon-close"></span> </button> <span class="cutSpace pficon pficon-error-circle-o"></span> <span class="hideItem"><strong>{{\'Configuration not saved\' | translate}}. </strong>{{\'Try again\' | translate}}.</span> </div> </span> </div> </div> </div> \x3c!-- OUTBOUND ROUTES SECTION --\x3e <div class="col-lg-12 profile-list-container"> <div class="row profile-macro-title"> <div class="col-lg-2 col-md-3 col-sm-4 col-xs-12"> {{"Outbound routes" | translate }} </div> <div class="col-lg-10"></div> </div> <div class="row profile-permission-container"> <div ng-repeat="permissions in profile.outbound_routes_permissions" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 profile-permission"> <span class="col-lg-3 col-md-4 col-sm-6 col-xs-6"> <span class="config-span">{{permissions.name | translate}}</span> </span> <span class="col-lg-6 col-md-4 col-sm-6 col-xs-6"> \x3c!-- <input bs-switch ng-change="saveProfile(profile, permissions)" ng-model="permissions.permission" class="bootstrap-switch bootstrap-switch-permission" type="checkbox"> --\x3e <input bs-switch ng-change="saveProfile(profile, \'\', permissions, \'outbound_routes\')" ng-model="permissions.permission" class="bootstrap-switch bootstrap-switch-permission" type="checkbox"> <div ng-if="outboundStatus[permissions.route_id] === \'error\'" class="cutSpace errorConfiguration alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="cutSpace hideItem pficon pficon-close"></span> </button> <span class="cutSpace pficon pficon-error-circle-o"></span> <span class="hideItem"><strong>{{\'Configuration not saved\' | translate}}. </strong>{{\'Try again\' | translate}}.</span> </div> </span> </div> </div> </div> \x3c!-- FOR THE OTHER MACRO PERMISSIONS --\x3e <div class="col-lg-12 profile-list-container" ng-repeat="(macro, obj_permissions) in profile.macro_permissions" ng-if="macro !== \'settings\'"> <div ng-if="macro !== \'remote_sites\'" class="row profile-macro-title {{!obj_permissions.value ? \'disabled\' : \'\'}}"> <div popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{obj_permissions.description | translate}}" class="col-lg-2 col-md-3 col-sm-4 col-xs-12"> {{obj_permissions.displayname | translate}} </div> <div class="col-lg-1"> <input bs-switch ng-change="saveProfile(profile)" ng-model="obj_permissions.value" class="bootstrap-switch bootstrap-switch-permission" type="checkbox"> </div> <div class="col-lg-10"></div> </div> <div class="row {{obj_permissions.permissions.length > 0 ? \'profile-permission-container\' : \'\'}}" ng-if="obj_permissions.value"> <div ng-hide="permission.name == \'phone_buttons\' && wizard.provisioning != \'tancredi\'" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 profile-permission" ng-repeat="permission in obj_permissions.permissions"> <span class="col-lg-3 col-md-4 col-sm-6 col-xs-6"> <span ng-if="!isGroupPermission(permission.name) && permission.description.indexOf(\'Manage Queue\') !== 0 && permission.description.indexOf(\'Use this queue for Operator Panel incoming calls\') !== 0" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{permission.description | translate}}" class="config-span"> {{permission.displayname | translate}} </span> <span ng-if="!isGroupPermission(permission.name) && permission.description.indexOf(\'Manage Queue\') === 0" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Manage Queue\' | translate}} {{permission.description.substring(\'Manage Queue\'.length, permission.description.length)}}" class="config-span"> {{permission.displayname | translate}} </span> <span ng-if="!isGroupPermission(permission.name) && permission.description.indexOf(\'Use this queue for Operator Panel incoming calls\') === 0" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Use this queue for Operator Panel incoming calls\' | translate}}" class="config-span"> {{permission.displayname.substring(\'Queue \'.length, permission.displayname.length)}} </span> <span ng-if="isGroupPermission(permission.name)" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{splitGroupName(permission.description)[0] | translate}} {{splitGroupName(permission.description)[1]}} {{splitGroupName(permission.description)[2] | translate}}" class="config-span"> {{splitGroupName(permission.displayname)[0] | translate}} {{splitGroupName(permission.displayname)[1]}} </span> </span> <span class="col-lg-6 col-md-4 col-sm-6 col-xs-6"> <input bs-switch ng-change="saveProfile(profile, obj_permissions, permission, macro)" ng-model="permission.value" class="bootstrap-switch bootstrap-switch-permission" type="checkbox"> <div ng-if="permissionsStatus[permission.id] === \'error\'" class="cutSpace errorConfiguration alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="cutSpace hideItem pficon pficon-close"></span> </button> <span class="cutSpace pficon pficon-error-circle-o"></span> <span class="hideItem"><strong>{{\'Configuration not saved\' | translate}}. </strong>{{\'Try again\' | translate}}.</span> </div> </span> </div> </div> </div> <button ng-click="deleteProfile(profile)" class="btn btn-danger btn-lg profile-button-save" type="submit"> {{\'Delete\' | translate}} </button> </div> </div> </div> </div> <button data-toggle="modal" data-target="#newProfileModal" class="btn btn-primary btn-lg right-only">{{\'Create new profile\' | translate}}</button> </div> </div> <div ng-if="allProfiles | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'No profiles found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#newProfileModal" class="btn btn-primary btn-lg">{{\'Create new profile\' | translate}}</button> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> <div class="modal fade" id="newProfileModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'New profile\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="createNewProfile(newProfile)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Name\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newProfile.name" type="text" class="form-control profile-new-name"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput2-modal-markup">{{\'Duplicate from\' | translate}}</label> <div class="col-sm-9"> <select title="-" pf-select="{ width: \'180px\' }" ng-model="newProfile.duplicateProfile" ng-options="p as p.name for p in allProfiles | profileList"> </select> </div> </div> <div ng-show="newProfile.onSave" class="spinner spinner-sm adjust-margin loader-modal-profile"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div>'),e.put("views/dashboard.html",'<div class="wizard-pf"> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Dashboard\' | translate}}</h1> <div class="container-fluid dashboard-margin-top"> <div class="list-group list-view-pf adjust-margin-extensions no-border"> <div class="adjust-profile-margin"> \x3c!-- USERS --\x3e <div id="accordion-markup-0"> <h1 data-toggle="collapse" data-parent="#accordion-markup-0" href="#collapse-0" class="adjust-header adjust-profile-header ng-binding" aria-expanded="true"> <span class="pficon pficon-users card-pf-icon-circle config-title-icon"></span>{{\'Users\' | translate}} <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> <div ng-show="profile.onSave" class="spinner spinner-sm profile-save-spinner ng-hide"></div> </h1> <div id="collapse-0" class="panel-collapse adjust-profile-body collapse in" aria-expanded="true"> <div class="panel-body profile-panel max-containers-height pannel-body-color"> \x3c!-- SEARCH --\x3e <form role="form" class="search-pf has-button adjust-form ng-pristine ng-valid" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchUsersString" type="text" class="form-control input-lg ng-pristine ng-valid ng-touched" placeholder="{{\'Search users\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <div class="col-xs-12 dashboard-cards-margin-top resizeDashboard" when-scrolled="scrollingUsersContainer()"> \x3c!-- EMPTY USERS --\x3e <div ng-if="data.users | isEmpty" class="blank-slate-pf empty-dashboard ng-scope"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1 class="ng-binding"> {{\'No users found\' | translate}} </h1> </div> \x3c!-- CARD --\x3e <div ng-repeat="u in usersNumber | customFilterMultiple:\'name,dashboardUsersSearch\':searchUsersString | orderBy:\'u.name\' | limitTo: usersLimit" class="card-pf user-dashboard-card"> <h2 class="card-pf-title ng-binding dashboard-cards-h2"> <span class="pficon pficon-user dashboard-cards-icon"></span>{{u.name}} </h2> <div ng-if="u.presence === \'dnd\'" class="u-presence-row"> <span class="pficon-resources-full dnd-color valign-middle"></span> <span class="valign-middle label-presence-user">{{"Do Not Disturb" | translate}}</span> <span class="fa fa-eraser valign-middle presence-reset-icon" ng-click="showSetPresenceConfirmation(u)" popover-placement="left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Reset\' | translate}}"></span> </div> <div ng-if="u.presence === \'callforward\' || u.presence === \'cellphone\' || u.presence === \'voicemail\'" class="u-presence-row"> <span class="pficon-resources-full callforward-color valign-middle"></span> <span class="valign-middle label-presence-user">{{"Call Forward" | translate}}</span> <span class="fa fa-eraser valign-middle presence-reset-icon" ng-click="showSetPresenceConfirmation(u)" popover-placement="left" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Reset\' | translate}}"></span> </div> <div class="card-pf-body"> <div id="pf-list-standard" class="list-group list-view-pf list-view-pf-view dashboard-list-margin-top"> \x3c!-- EXTENSIONS --\x3e <div ng-repeat="exten in u.endpoints.extension track by $index | orderBy:\'exten.id\'" class="list-group-item cursor-default dashboard-list-item"> <div class="list-view-pf-actions exten-dashboard-action"> <button class="btn btn-default dashboard-info-fontsize" ng-click="showExtenDetails(exten.id, u.username)">Info</button> </div> <div class="list-view-pf-main-info exten-dashboard-label"> <div class="list-view-pf-left"> <span class="fa {{exten.type.indexOf(\'webrtc\') === 0 ? \'fa-headphones\' : \'fa-phone\'}} {{data.extensions[exten.id].status === \'online\' ? \'online-green\' : data.extensions[exten.id].status === \'offline\' ? \'offline-gray\' : \'online-red\'}} list-view-pf-icon-sm user-dashboard-icon"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> <strong class="dashboard-extenid-fontsize">{{exten.id}}</strong></div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> \x3c!-- TRUNKS --\x3e <div id="accordion-markup-1 box-dimension"> <h1 data-toggle="collapse" data-parent="#accordion-markup-1" href="#collapse-1" class="adjust-header adjust-profile-header dashboard-trunks-margin" aria-expanded="true"> <span class="pficon pficon-topology card-pf-icon-circle config-title-icon"></span>{{"Trunks" | translate}} <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> <div ng-show="profile.onSave" class="spinner spinner-sm profile-save-spinner ng-hide"></div> </h1> <div id="collapse-1" class="panel-collapse adjust-profile-body collapse in" aria-expanded="true"> <div class="panel-body profile-panel max-containers-height pannel-body-color"> <form role="form" class="search-pf has-button adjust-form ng-pristine ng-valid" id="form-lg-domains-details2"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchTrunkString" type="text" class="form-control input-lg ng-pristine ng-valid ng-touched" placeholder="{{\'Search trunks\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <div class="col-xs-12 dashboard-cards-margin-top resizeDashboard" when-scrolled="scrollingTrunksContainer()"> \x3c!-- EMPTY TRUNKS --\x3e <div ng-if="data.trunks | isEmpty" class="blank-slate-pf empty-dashboard ng-scope"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-topology"></span> </div> <h1 class="ng-binding"> {{\'No trunks found\' | translate}} </h1> </div> \x3c!-- CARD --\x3e <div ng-repeat="t in data.trunks | customFilterMultiple:\'name,ip\':searchTrunkString | orderBy:\'t.name\' | limitTo: trunksLimit" class="card-pf col-sm-12 col-md-6 col-lg-5 trunks-lg-cards trunks-lg-cards"> <h2 class="card-pf-title dashboard-cards-h2"> <span class="pficon pficon-container-node dashboard-cards-icon"></span> <span title="{{t.name}}" class="trunk-name">{{t.name}}</span> <span ng-if="!g.custom" class="right-only small-font right ng-scope"> <span class="pficon pficon-service icon-trunk-type"></span>{{t.chanType}} </span> </h2> <div class="card-pf-body"> <div id="pf-list-standard" class="list-group list-view-pf list-view-pf-view dashboard-list-margin-top"> <div class="list-group-item cursor-default dashboard-list-item"> <div class="list-view-pf-main-info"> <div class="list-view-pf-body"> <div class="list-view-pf-additional-info config-info"> <div>IP: <b class="right-only">{{t.ip !== \'\' ? t.ip : \'-\'}}</b></div> </div> </div> </div> </div> <div class="list-group-item cursor-default dashboard-list-item"> <div class="list-view-pf-main-info"> <div class="list-view-pf-body"> <div class="list-view-pf-additional-info config-info"> <div>{{\'Port\' | translate}}: <b class="right-only">{{t.port !== \'\' ? t.port : \'-\'}}</b></div> </div> </div> </div> </div> <div class="list-group-item cursor-default dashboard-list-item"> <div class="list-view-pf-main-info"> <div class="list-view-pf-body"> <div class="list-view-pf-additional-info config-info"> <div>{{\'Provider status\' | translate}}: <b class="right-only {{t.status === \'online\' ? \'text-online-green\' : \'\'}}">{{t.status !== \'\' ? t.status : \'-\'}}</b></div> </div> </div> </div> </div> <div class="list-group-item cursor-default dashboard-list-item"> <div class="list-view-pf-main-info"> <div class="list-view-pf-body"> <div class="list-view-pf-additional-info config-info"> <div>{{\'Registration\' | translate}}: <b class="right-only {{t.registration === \'registered\' ? \'text-online-green\' : t.registration === \'unmonitored\' ? \'text-orange\' : \'text-red\'}}"> {{t.registration !== \'\' ? t.registration : \'-\' | translate}} </b></div> </div> </div> </div> </div> <div ng-if="t.codecs.length > 0" class="list-group-item cursor-default dashboard-list-item trunk-row-width"> <div class="list-view-pf-main-info"> <div class="list-view-pf-body"> <div class="list-view-pf-additional-info config-info"> <div>{{\'Codecs\' | translate}}: <b title="{{t.codecs.toString()}}" class="right-only">{{t.codecs.toString()}}</b></div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> \x3c!-- MODAL FOR PRESENCE SETUP CONFIRMATION --\x3e <div class="modal fade" id="presenceSetupConfirmation" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Warning\' | translate}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group col-sm-12"> <label class="control-label">{{\'You are going to change the presence of user\' | translate}}</label> <label class="control-label text-bold">{{data.userChangingPresenceName}}</label> <label class="control-label">{{\'to_m\' | translate}}</label> <label class="control-label text-online-green">{{\'online\' | translate}}</label> <label class="control-label">{{\'status: are you sure ?\' | translate}}</label> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="button" ng-click="setPresenceOnline(data.userChangingPresenceUsername)" class="btn btn-primary">{{\'Continue\' | translate}}</button> </div> </div> </div> </div> \x3c!-- MODALS 4 EXTENSION DETAILS --\x3e <div class="modal fade" id="extenDetailsModal" tabindex="-1" role="dialog" aria-labelledby="extenDetailsModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Extension\' | translate}} {{data.selExten.exten}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-4 control-label">{{\'Name\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label">{{data.selExten.name !== \'\' ? data.selExten.name : \'-\'}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'User agent\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label">{{data.selExten.sipuseragent !== \'\' ? data.selExten.sipuseragent : \'-\'}}</label> </div> </div> <div ng-show="data.selExten.type.indexOf(\'webrtc\') === -1" class="form-group"> <label class="col-sm-4 control-label">{{\'Type\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label">{{data.selExten.chanType !== \'\' ? data.selExten.chanType : \'-\'}}</label> </div> </div> <div ng-if="data.selExten.type.indexOf(\'webrtc\') === -1" class="form-group"> <label class="col-sm-4 control-label">{{\'IP Address\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label"> <a target="_blank" ng-href="http://{{data.selExten.ip}}">{{data.selExten.ip !== \'\' ? data.selExten.ip : \'-\'}}</a> </label> </div> </div> <div ng-if="data.selExten.type.indexOf(\'webrtc\') === -1" class="form-group"> <label class="col-sm-4 control-label" for="textInput2-modal-markup">{{\'Port\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label">{{data.selExten.port !== \'\' ? data.selExten.port : \'-\'}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="textInput2-modal-markup">{{\'Codecs\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label">{{data.selExten.codecs !== \'\' ? data.selExten.codecs.toString() : \'-\'}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="textInput3-modal-markup">{{\'DND\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label {{data.selExten.dnd === true ? \'text-red\': \'\'}}">{{data.selExten.dnd === true ? \'ON\' : \'OFF\'}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="textInput3-modal-markup">{{\'Call Forward\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label {{data.selExten.cf !== \'\' ? \'text-red\': \'\'}}">{{data.selExten.cf !== \'\' ? \'ON - \' + data.selExten.cf : \'OFF\'}}</label> </div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{"Cancel" | translate}}</button> </div> </div> </div> </div>'),e.put("views/devices.html",'<div class="blank-slate-pf no-border"> <div class="blank-slate-pf-icon"> <span class="fa fa-cogs"></span> </div> <div class="blank-slate-pf-title mt-10"> <h1> {{\'Edit the default settings before continuing\' | translate}} </h1> </div> <div class="blank-slate-pf-content mt-20 mb-30"> <p> {{\'If all phones connect from private networks\' | translate}} <br> {{\'disable the encryption, PBX address can be an IP.\' | translate}} </p> <p> {{\'If at least one phone connects from the public network\' | translate}} <br> {{\'enable the encryption, PBX address must be a FQDN host name registered in the DNS, the system must have a valid TLS certificate.\' | translate}} </p> </div> <div class="blank-slate-pf-main-action"> <button ng-if="defaultSettings.ui_first_config === \'1\'" ng-click="openDefaultSettings()" class="btn btn-lgg btn-warning" type="button"><i class="fa fa-pencil-square-o"></i> {{"Edit the default settings" | translate}}</button> <button ng-if="defaultSettings.ui_first_config === \'\'" ng-click="openDefaultSettings()" class="btn btn-lgg btn-primary" type="button"><i class="fa fa-check"></i> {{"Edit the default settings" | translate}}</button> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> <div class="modal fade" id="defaultSettingsModal" ng-controller="DefaultModalUICtrl" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" ng-include="defaultsModalUrl"></div>'),e.put("views/devices/inventory.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'inventory\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'devices/inventory\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Inventory\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'models\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'devices/models\')"><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Models\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size no-margin-bottom"> <h1 class="control-label centered" for="textInput-markup"> {{ \'Phones\' | translate }} </h1> <div class="container-fluid mt-40"> \x3c!-- toast messages --\x3e <div class="toast-notifications-list-pf mt-50"> <div ng-class="[\'toast-pf\', \'alert\', {\'alert-danger\': !error.warning }, { \'alert-warning\': error.warning }, \'alert-dismissable\', \'mg-bottom-5\']" id="error-{{error.id}}" ng-repeat="error in errors track by $index"> <button type="button" class="close" data-dismiss="error-{{error.id}}" ng-click="deleteError(error.id)" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span ng-class="[\'pficon\', { \'pficon-error-circle-o\': !error.warning }, { \'pficon-warning-triangle-o\': error.warning }]"></span> <strong ng-show="error.i18nMessage">{{ error.i18nMessage | translate }}.</strong> <span ng-show="error.message">{{ error.message }}.</span> <span ng-show="error.error">{{ error.error }}.</span> <span ng-show="error.title"><i>{{ error.title }}</i>.</span> </div> </div> <div> \x3c!-- inventory help notification --\x3e \x3c!-- <div class="alert alert-info alert-dismissable bg-color-white"\n          ng-show="phones.length !== 0 && !hideInventoryHelp">\n          <button type="button" class="close" data-dismiss="alert" ng-click="setHideInventoryHelp()" aria-label="Close">\n            <span class="pficon pficon-close"></span>\n          </button>\n          <span class="pficon pficon-info"></span>\n          <p>{{ \'this_is_the_list_of_phones_configured\' | translate }}. {{ \'you_can_add_phones_by\' | translate }}:</p>\n          <ul>\n            <li>{{ \'scanning_a_network\' | translate }}</li>\n            <li>{{ \'copying_and_pasting_from_spreadsheet\' | translate }}</li>\n            <li>{{ \'entering_phone_data_manually\' | translate }}</li>\n          </ul>\n        </div> --\x3e \x3c!-- empty state --\x3e <div ng-show="phones.length == 0" class="blank-slate-pf"> <div class="blank-slate-pf-icon mtn-30"> <span class="pficon pficon pficon-add-circle-o"></span> </div> <h1 class="mb-25 mt-25"> {{\'No phone found\' | translate}} </h1> <div class="mb-25"> <p> {{"Adding phones is possible through one of the next methods" | translate}}: </p> <p> {{"Copying a list of MAC address from a spreadsheet or a text file" | translate}} </p> <p> {{"Scanning a local network" | translate}} </p> <p> {{"Entering MAC and model manually for a phone at a time" | translate}} </p> <p class="mt-20"> {{"Select the method you prefer" | translate}}: </p> </div> <div class="blank-slate-pf-main-action mb-30 mt-15"> <button class="btn btn-lgg btn-primary" ng-click="showPasteModal()">{{\'Paste from file\' | translate}}</button> </div> <div class="blank-slate-pf-secondary-action"> <button class="btn btn-lg btn-default" ng-click="showScanModal()">{{\'Scan a network\' | translate}}</button> <button class="btn btn-lg btn-default" ng-click="showManualModal()">{{\'Add manually\' | translate}}</button> </div> </div> <div ng-show="phones.length !== 0" class="mg-bottom-10 pos-relative"> <div class="dropdown"> <button class="btn btn-lg btn-primary dropdown-toggle" type="button" id="invDropdownMenu1" data-toggle="dropdown"> {{\'Add phones\' | translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="invDropdownMenu1"> <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="showPasteModal()">{{\'Paste from file\' | translate}}</a></li> <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="showScanModal()">{{\'Scan a network\' | translate}}</a></li> <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="showManualModal()">{{\'Add manually\' | translate}}</a></li> </ul> \x3c!-- only for dev purposes, do not remove the following comment --\x3e \x3c!-- <button type="button" class="btn btn-danger" ng-click="deleteAllPhonesDev()">\n              {{ \'Delete all phones\' | translate }}\n            </button> --\x3e </div> </div> <div ng-show="phones.length !== 0"> \x3c!-- filter phone list --\x3e <form role="form" class="search-pf has-button mg-bottom-8"> <div class="form-group"> <div class="search-pf-input-group"> <input ng-model="searchPhoneString" type="text" class="form-control input-lg" placeholder="{{ \'Filter phones\' | translate }}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> \x3c!-- number of phones in inventory --\x3e <span class="fz-15 weight-plus right-only mb-5 mr-2"> {{ phones.length }} {{ (phones.length > 1 ? \'phones\' : \'phone\') | translate }} </span> \x3c!-- phone list --\x3e <div class="list-group list-view-pf clear {{wizard.isWizard ? \'mb-75\' : \'\'}}" id="phone-list"> <div class="list-group-item cursor-default" ng-repeat="phone in phones | filter:searchPhoneString | limitTo: phonesLimit | orderBy: \'display_name\'"> <div class="list-view-pf-actions"> \x3c!-- provisioning info --\x3e <button type="button" class="btn btn-default" ng-click="openProvisioningInfo(phone.mac)"> {{ \'Info\' | translate }} </button> \x3c!-- delete phone --\x3e <button type="button" class="btn btn-danger" ng-click="showDeletePhoneModal(phone)" data-toggle="modal" data-target="#deletePhoneModal"> {{ \'Delete\' | translate }} </button> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading adjust-weight"> <div> {{ phone.vendor ? phone.vendor : \'-\'}} </div> <div> <b>{{ phone.mac }}</b> </div> </div> <div class="list-group-item-text width-55p"> <select pf-select="{ noneSelectedText: \'-\' }" data-live-search="true" data-size="5" ng-change="setPhoneModel(phone)" ng-model="phone.model" ng-options="model.display_name for model in phone.filteredModels | orderBy:orderByValue"> <option value="" ng-disabled="true" ng-hide="true">-</option> </select> <span ng-show="modelLoaders[phone.mac] === \'success\'" class="pficon pficon-ok set-model-feedback"></span> <span ng-show="modelLoaders[phone.mac] === \'fail\'" class="pficon pficon-error-circle-o set-model-feedback"></span> <span ng-show="modelLoaders[phone.mac] === \'loading\'" class="spinner spinner-inline set-model-feedback"></span> </div> </div> </div> </div> </div> <scrolling-sentinel event="inventoryScroll"></scrolling-sentinel> </div> </div> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> \x3c!-- generic modal used by scan, copy/paste and manual add --\x3e <div class="modal fade" id="adding-modal" tabindex="-1" role="dialog" aria-labelledby="addPhonesLabel" aria-hidden="true" data-backdrop="static"> <div class="modal-dialog width-700"> <div class="modal-content" id="inv-new-phone-dialog"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="addPhonesLabel">{{\'Add phones\' | translate}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> \x3c!-- add phones loader --\x3e <div ng-show="addPhonesInProgress" class="centered"> <div class="spinner"></div> </div> <div ng-show="!addPhonesInProgress"> \x3c!-- section shown on copy/paste method --\x3e <div ng-show="!showResultsAddPhones && addModalType === \'copypaste\'" class="form-group no-margin-bottom"> <div class="alert alert-info alert-dismissable mg-left-20 mg-right-20" ng-show="tooManyPastedMacs"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-info"></span> <span>{{ \'Maximum number of pasted MAC addresses reached. You can paste the remaining MAC addresses at the end of this process\' | translate }}</span> </div> <label class="col-sm-5 control-label" for="paste-textarea"> {{ \'Paste a list of MAC addresses here\' | translate }}: \x3c!-- inline help for mac address format --\x3e <div class="reset-padding"> <a href="#" class="info-general" data-toggle="popover" data-html="true" data-placement="bottom" data-close="false" data-trigger="hover" data-container="body" title="{{ &quot;MAC addresses format&quot; | translate }}" data-content="<div class=&quot;inv-style-info-mac&quot;>\n                  {{ &quot;inv_help_mac_1&quot; | translate }}.\n                  {{ &quot;inv_help_mac_3&quot; | translate }}.\n                <p>&nbsp;</p><p>{{ &quot;Example&quot; | translate }}:</p>\n                <p><pre>\n00:04:13:11:22:31\n0C:38:3E:99:88:72\n00:15:65:55:55:53\n\x3c!-- comment for line break --\x3e\n00-04-13-11-22-31\n0C-38-3E-99-88-72\n00-15-65-55-55-53\n\x3c!-- comment for line break --\x3e\n000413112231\n0C383E998872\n001565555553</pre></p>\n                </div>"> <span class="pficon pficon-info"></span> </a> </div> </label> <div class="col-sm-7"> \x3c!-- paste textarea --\x3e \x3c!-- maxlength -> copy/paste max 200 mac at time --\x3e <textarea maxlength="3600" id="paste-textarea" class="form-control pasted-mac-area mt-5" ng-model="pastedMacsText" ng-change="checkTooManyPastedMacs()"></textarea> </div> </div> <div class="form-group no-margin-bottom" ng-show="!showResultsAddPhones && addModalType === \'copypaste\'"> <label class="col-sm-5 control-label"></label> <div class="col-sm-7"> <button type="submit" class="btn btn-primary" ng-disabled="!pastedMacsText" ng-click="parsePastedMacs()"> {{ \'Apply\' | translate }} </button> </div> </div> \x3c!-- section shown on manual method --\x3e <div ng-show="!showResultsAddPhones && addModalType === \'manual\'"> <div class="form-group" ng-class="{ \'has-error\': manualMacSyntaxError || manualMacUnknownVendor || manualMacDuplicated || manualMacInInventory }"> <label class="col-sm-4 control-label" for="manual-mac">{{ \'MAC address\' | translate }}</label> <div class="col-sm-8"> <input type="text" id="manual-mac" name="manualMac" class="form-control" ng-model="manualMac" ng-change="inputMacManualChanged()"> <span ng-show="manualMacSyntaxError" class="help-block left">{{ \'Invalid MAC address\' | translate }}</span> <span ng-show="manualMacUnknownVendor" class="help-block left">{{ "Unknown vendor. Please configure this phone later as a \'custom device\' in Configurations page" | translate }}</span> <span ng-show="manualMacDuplicated" class="help-block left">{{ \'Duplicated MAC address\' | translate }}</span> <span ng-show="manualMacInInventory" class="help-block left">{{ \'Phone already added\' | translate }}</span> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="manual-model">{{ \'Model\' | translate }}</label> <div class="col-sm-8"> <select class="form-control" pf-select="{ noneSelectedText: \'-\' }" data-live-search="true" data-size="5" ng-model="manualModel" ng-options="model.display_name for model in manualFilteredModels | orderBy:orderByValue | limitTo: phonesLimit" ng-disabled="getManualFilteredModelsCount()" id="manual-model"> <option value="" ng-disabled="true" ng-hide="true">-</option> </select> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label"></label> <div class="col-sm-8"> <button type="submit" class="btn btn-primary" ng-disabled="!manualMac" ng-click="addPhoneManual()"> {{ \'Add\' | translate }} </button> </div> </div> </div> \x3c!-- section shown on scanning method --\x3e <div ng-show="!showResultsAddPhones && addModalType === \'scanning\'"> <div class="form-group"> <label class="col-sm-4 control-label">{{ \'Network to scan\' | translate }}</label> <div class="col-sm-5"> <select class="form-control" pf-select="{ noneSelectedText: \'-\' }" ng-model="networkToScan" ng-options="network as (network.name + \' | \' + network.network) for network in networks |   orderBy:orderByValue"> <option value="" ng-disabled="true" ng-hide="true">-</option> </select> </div> </div> <div class="form-group" ng-class="{ \'has-error\': showNetmaskToScanError }"> <label class="col-sm-4 control-label">{{ \'Netmask\' | translate }}</label> <div class="col-sm-5"> <input ng-model="networkToScan.netmask" type="text" class="form-control" ng-change="netmaskToScanChanged()"> <span ng-show="showNetmaskToScanError" class="help-block left">{{ \'Enter a valid netmask\' | translate }}</span> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label"></label> <div class="col-sm-8"> <button type="submit" class="btn btn-primary" ng-show="!networkScanInProgress" ng-disabled="!networkToScan" ng-click="startNetworkScan()"> {{ \'Scan\' | translate }} </button> <button type="submit" class="btn btn-primary" ng-show="networkScanInProgress" ng-disabled="!networkToScan" ng-click="cancelAllNetworkScans()"> {{ \'Stop scan\' | translate }} </button> </div> </div> <div class="centered"> <div class="spinner" ng-show="networkScanInProgress"></div> </div> \x3c!-- no phone to add notification --\x3e <div class="alert alert-info" ng-show="showNoPhoneToAddFromNetwork"> <span class="pficon pficon-info"></span> {{ \'No phone to add from this network\' | translate }} </div> </div> \x3c!-- results of add phones operation --\x3e <div ng-show="showResultsAddPhones"> \x3c!-- phones successfully added --\x3e <div class="alert alert-success mg-bottom-10" ng-show="successfulAddPhones.length > 0"> <span class="pficon pficon-ok"></span> <span> {{ successfulAddPhones.length }} {{ successfulAddPhones.length > 1 ? (\'phones successfully added\' | translate) : (\'phone successfully added\' | translate) }} </span> <legend class="fields-section-header-pf col-sm-1 toggle-legend" aria-expanded="true"> <span ng-class="[\'fa\', \'fa-angle-right\', \'field-section-toggle-pf\', { \'fa-angle-down\': showSuccessfullyAddedPhones }]" ng-click="toggleShowSuccessfullyAddedPhones()"> </span> <a class="field-section-toggle-pf" ng-click="toggleShowSuccessfullyAddedPhones()">{{ \'Show\' | translate }}</a> </legend> <div ng-show="showSuccessfullyAddedPhones" class="toggle-legend-list"> <ul> <li ng-repeat="phone in successfulAddPhones"> <span class="mg-right-5"><b>{{ phone.mac }}</b></span> <span ng-show="phone.model">{{ phone.model.display_name }}</span> <span ng-show="!phone.model && phone.vendor">{{ phone.vendor }}</span> </li> </ul> </div> </div> \x3c!-- warning notification for rps failure --\x3e <div class="alert alert-warning" ng-show="failedRpsAddPhones.length > 0"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{ \'Warning\' | translate }}:</strong> {{ \'Some registrations of MAC addresses into the vendor cloud services failed. To make the phones work correctly, manually enter the following URLs directly into the phone web interface\' | translate }}: <span class="form-group"> <ul> <li ng-repeat="phone in failedRpsAddPhones" class="mg-bottom-10 mg-top-10"> <span class="mg-right-5"><b>{{ phone.mac }}</b></span> <span class="mg-right-5">{{ phone.model && phone.model !== \'\' ? phone.model : \'\' }}</span> <div> <clipboard-copy value="{{phone.manualProvisioningUrlForFailure}}" ng-click="copyUrl()" tabindex="0" role="button"><i title="{{ \'Copy URL\' | translate }}" class="pointer fa fa-clipboard mg-right-5"></i></clipboard-copy> <span title="{{phone.manualProvisioningUrlForFailure}}" class="rpsUrlFailure text-warning mg-right-5" type="text" disabled>{{phone.manualProvisioningUrlForFailure}}</span> </div> </li> </ul> </span> </div> \x3c!-- warning notification --\x3e <div class="alert alert-warning" ng-show="failedAddPhones.length > 0"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{ \'Warning\' | translate }}:</strong> {{ failedAddPhones.length }} {{ failedAddPhones.length > 1 ? (\'phones could not be added\' | translate) : (\'phone could not be added\' | translate) }} </div> </div> \x3c!-- toolbar to apply model to all --\x3e <div ng-show="phonesToAdd.length > 1"> <div class="mt-40"><label>{{ \'inv_help_mac_4\' | translate }}:</label></div> <div class="filter"> <div>{{ \'Vendor\' | translate }}</div> <select pf-select="{ noneSelectedText: \'-\' }" class="width-240" ng-model="vendorApplyToAll" ng-change="vendorApplyToAllChanged()" ng-disabled="vendorApplyToAllList.size === 0" ng-options="v as v for v in vendorApplyToAllList"> </select> </div> <div class="filter"> <div>{{ \'Model\' | translate }}</div> <select pf-select="{ noneSelectedText: \'-\' }" class="width-240" data-live-search="true" data-size="5" ng-model="modelApplyToAll" ng-disabled="modelApplyToAllList.size === 0" ng-options="m as m.display_name for m in modelApplyToAllList"> </select> </div> <button type="button" class="btn btn-default" ng-click="applyModelToAll()" ng-disabled="!modelApplyToAll"> {{ \'Apply to all\' | translate }} </button> </div> <div ng-show="phonesToAdd.length > 0"> \x3c!-- number of phones to add --\x3e <div class="mg-top-20"> <label class="mg-bottom-6">{{ phonesToAdd.length }} {{ phonesToAdd.length > 1 ? (\'phones to add\' | translate) : (\'phone to add\' | translate) }} </label> </div> \x3c!-- filter for phones to add --\x3e <div class="search-pf has-button mg-bottom-8"> <div class="form-group"> <div class="search-pf-input-group"> <input ng-model="searchPhoneToAddString" type="text" class="form-control input-lg" placeholder="{{ \'Filter phones\' | translate }}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </div> \x3c!-- phones to add --\x3e <div class="phones-to-add"> <div class="list-group list-view-pf clear mg-bottom-0"> <div class="list-group-item cursor-default form-group no-margin-left-right align-items-stretch" ng-class="{ \'has-error\': (phone.invalidMac || phone.serverError || phone.alreadyInInventory || phone.unknownVendor || macDuplicates.includes(phone.mac)), \'border-top-list\': $index == 0 }" ng-repeat="phone in phonesToAdd | filter:searchPhoneToAddString track by $index"> <div class="list-view-pf-actions"> \x3c!-- delete phone to add --\x3e <button type="button" class="btn btn-danger" ng-click="deletePhoneToAddIndex($index)"> {{ \'Delete\' | translate }} </button> </div> <div class="list-view-pf-main-info align-items-stretch"> <div class="list-view-pf-left"> <span class="fa fa-phone list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body align-items-flex-start"> <div class="flex-column-w100p"> <div class="list-view-pf-description flex-row-stretch-w100p"> <div class="list-group-item-heading flex-1-0-auto"> \x3c!-- MAC --\x3e <input type="text" id="mac-phone-to-add-{{$index}}" name="mac{{$index}}" class="form-control" ng-model="phone.mac" ng-disabled="addModalType === \'scanning\'" ng-change="macPhoneToAddChanged(phone)"> </div> <div class="list-group-item-text width-12p"> {{ phone.vendor ? phone.vendor : \'-\' }} </div> <div class="list-view-pf-additional-info config-info width-33p mg-right-20"> \x3c!-- model --\x3e <select class="form-control border-color-bbb" pf-select="{ noneSelectedText: \'-\' }" data-live-search="true" data-size="5" ng-model="phone.model" data-container="body" ng-options="model.display_name for model in phone.filteredModels | orderBy:orderByValue" id="model-phone-to-add-{{$index}}"> <option value="" ng-disabled="true" ng-hide="true">-</option> </select> </div> </div> <span ng-show="phone.ipv4" class="help-block left">{{ \'IP Address\' | translate }}: {{ phone.ipv4 }}</span> <span ng-show="phone.invalidMac" class="help-block left">{{ \'Invalid MAC address\' | translate }}</span> <span ng-show="phone.alreadyInInventory" class="help-block left">{{ \'Phone already added\' | translate }}</span> <span ng-show="macDuplicates.includes(phone.mac)" class="help-block left">{{ \'Duplicated MAC address\' | translate }}</span> <span ng-show="phone.serverError" class="help-block left"> {{ phone.serverError | translate }} </span> <span ng-show="phone.unknownVendor" class="help-block left"> {{ "Unknown vendor. Please configure this phone later as a \'custom device\' in Configurations page" | translate }}</span> </div> </div> </div> </div> </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-default mg-top-20" ng-show="!(showResultsAddPhones && phonesToAdd.length == 0)" data-dismiss="modal">{{ \'Cancel\' | translate }}</button> \x3c!-- add phones button --\x3e <button type="button" class="btn btn-primary mg-top-20" ng-show="!(showResultsAddPhones && phonesToAdd.length == 0)" ng-disabled="phonesToAdd.length === 0 || addPhonesInProgress" ng-click="addPhones()">{{ \'Add phones\' | translate }}</button> \x3c!-- continue button --\x3e <button type="button" class="btn btn-primary mg-top-20" ng-show="showResultsAddPhones && phonesToAdd.length == 0" data-dismiss="modal">{{ \'Continue\' | translate }}</button> </div> </div> </div> </div> \x3c!-- delete phone modal --\x3e <div class="modal fade" id="deletePhoneModal" tabindex="-1" role="dialog" aria-labelledby="deletePhoneModal" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title"> {{ \'Delete phone\' | translate }} </h4> </div> <form class="form-horizontal"> <div class="modal-body"> <div class="alert alert-warning alert-dismissable"> <span class="pficon pficon-warning-triangle-o"></span> <p> <strong> {{ \'You are about to delete phone\' | translate }} {{ phoneToDelete.vendor ? phoneToDelete.vendor : \'\'}} {{ phoneToDelete.mac }} </strong>. </p> <p> {{ \'Are you sure\' | translate }}? </p> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ \'Cancel\' | translate }}</button> <button type="submit" class="btn btn-danger" ng-click="deletePhone()"> {{ \'Delete\' | translate }} </button> </div> </form> </div> </div> </div> <div class="modal fade" id="provisioningInfoModal" tabindex="-1" role="dialog" aria-labelledby="extenDetailsModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Phone provisioning info\' | translate}} {{data.selExten.exten}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-4 control-label">{{\'MAC\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label">{{currentPhoneInfo.mac}}</label> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'Provisioning URL\' | translate}}:</label> <div class="col-sm-8"> <div class="w-75"> <label class="control-label full-width left-align"> <button class="btn btn-default ml-10" id="showurlbtn" data-container="body" data-toggle="popover" data-placement="top" data-content="{{currentPhoneInfo.provisioning_url1 ? currentPhoneInfo.provisioning_url1 : currentPhoneInfo.provisioning_url2}}"> {{"Show url" | translate}} </button> </label><br> <label class="control-label mt-10 full-width left-align"> \x3c!-- <button\n                    class="btn btn-primary full-width"\n                    ng-click="copyToClipboard(urlToCopy)">\n                    {{"Copy url" | translate}}\n                  </button> --\x3e <clipboard-copy class="btn btn-primary full-width ml-10" value="{{urlToCopy}}" ng-click="copyUrl()"> {{"Copy url" | translate}} </clipboard-copy> <i ng-show="copiedUrl" class="fa fa-check text-color-green absolute-position mt-5 ml-7 fz-15"> </i> </label> </div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label">{{\'Provisioning status\' | translate}}:</label> <div class="col-sm-8"> <label class="control-label {{currentPhoneInfo.provisioning_url1 ? \'\' : \'text-color-green\'}}"> {{currentPhoneInfo.provisioning_url1 ? "Pending" : "Completed" | translate}} </label> </div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">{{"Cancel" | translate}}</button> </div> </div> </div> </div>'),e.put("views/devices/models.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'inventory\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'devices/inventory\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Phones\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'models\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'devices/models\')"><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Models\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Models\' | translate}}</h1> <div ng-if="!(inventoryModels | isEmpty)" class="mt-40 mb-10"> <button data-toggle="modal" data-target="#newModelModal" class="btn btn-primary btn-lg">{{\'Create new model\' | translate}} </button> <button ng-click="openDefaultSettings()" class="btn btn-default btn-lg right-align no-margin ng-binding ng-scope"> {{"Default settings" | translate}} </button> </div> <div ng-if="!(inventoryModels | isEmpty)" class="container-fluid"> <div id="modelsContainer" class="list-group list-view-pf adjust-margin-extensions no-border"> <div ng-repeat="model in inventoryModels track by model.name" class="adjust-profile-margin"> <div id="accordion-models-{{$index}}"> <h1 ng-click="checkCurrentModelChanged(model.name)" class="adjust-header adjust-profile-header pointer"> <span class="fa fa-cube card-pf-icon-circle config-title-icon"></span> <span class="weight">{{::model.display_name | translate}}</span> <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> </h1> <div id="collapse-model-{{$index}}" ng-hide="currentModel.hidden" ng-if="currentModel.name == model.name" class="panel-collapse adjust-profile-body model-container"> \x3c!-- start models templates --\x3e <div id="modelsUIUrl" ng-include="modelsUIUrl"></div> </div> </div> </div> </div> </div> \x3c!-- end --\x3e <div ng-if="inventoryModels | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-add-circle-o"></span> </div> <h1 class="mb-25 mt-25"> {{\'No model\' | translate}} </h1> <div class="mb-25"> <p> {{"Assign the models to the phones in the Phones section before editing the variables" | translate}}. </p>  </div> <div class="blank-slate-pf-main-action"> <button ng-click="openDefaultSettings()" class="btn btn-default btn-lg ng-binding ng-scope"> {{"Default settings" | translate}} </button> <button ng-click="goTo(\'/devices/inventory\')" class="btn btn-primary btn-lg"> {{\'Set models\' | translate}} </button> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> <div class="modal fade" id="newModelModal" tabindex="-1" role="dialog" aria-labelledby="nModelMLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="nModelMLabel">{{\'New model\' | translate}}</h4> </div> <form class="form-horizontal"> <div class="modal-body"> <div ng-if="newModelsErrors.apiError" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{newModelsErrors.apiError | translate}}</strong>. </div> <div class="form-group {{newModelsErrors.newModelSourceEmpty ? \'has-error\' : \'\'}}"> <label class="col-sm-3 control-label" for="textInput2-modal-markup">{{\'Duplicate from\' | translate}}</label> <div class="col-sm-9"> <select ng-model="newModelSourceName" id="modelFromSelect" class="combobox form-control" autocomplete="off"> <option value=""> - </option> <option value="{{model.name}}" ng-repeat="model in inventoryModels track by model.name" on-finish-render="selectpickerRepeatEnd">{{model.display_name}}</option> </select> <div ng-show="newModelsErrors.newModelSourceEmpty" class="help-block mt-0"> {{"Select a source model" | translate}} </div> </div> </div> <div ng-show="newModelSourceName" class="form-group"> <label class="col-sm-3 control-label">{{\'Name\' | translate}} *</label> <div class="col-sm-9"> <div class="input-group {{newModelsErrors.newModelCustomNameEmpty ? \'has-error\' : \'\'}}"> <span class="input-group-addon"> <span ng-if="model.name == newModelSourceName" ng-repeat="model in inventoryModels">{{model.display_name}} - </span> </span> <input type="text" id="inputCustomName" ng-model="newModelCustomName" class="form-control"> <div ng-show="newModelsErrors.newModelCustomNameEmpty" class="help-block table-caption-bottom mt-0"> {{"Enter the custom part of the name" | translate}} </div> </div> </div> </div> </div> <div ng-if="loadingActions == true" class="spinner spinner-sm adjust-margin loader-modal fz-18"></div> <span ng-if="loadingActions == \'ok\'" class="pficon pficon-ok adjust-margin loader-modal fz-18"></span> <span ng-if="loadingActions == \'err\'" class="pficon pficon-error-circle-o adjust-margin loader-modal fz-18"></span> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button ng-click="createNewModel()" type="button" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </form> </div> </div> </div> <div class="modal fade" id="modelChangeConfirm" tabindex="-1" role="dialog" aria-labelledby="modelChangeConfirm" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="nModelMLabel">{{"Settings not saved" | translate}}!</h4> </div> <form class="form-horizontal mt-10" ng-submit="onModelSetContinue()"> <div class="modal-body"> <div class="alert alert-warning"> <span class="pficon pficon-warning-triangle-o"></span> <strong> {{"The changes are not saved yet" | translate}}. </strong> <p> {{"Cancel and save the changes or continue without saving" | translate}}! </p> </div> </div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Continue\' | translate}}</button> </div> </form> </div> </div> </div> <div class="modal fade" id="defaultSettingsModal" ng-controller="DefaultModalUICtrl" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" ng-include="defaultsModalUrl"></div> <div class="modal fade" id="uploadFileModal" ng-controller="FileUploadCtrl" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" ng-include="fileUploadUIUrl"></div>'),e.put("views/extensions.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'extensions\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'/extension\')"> <span class="wizard-pf-step-number">1</span> <span class="wizard-pf-step-title">{{\'extensions\' | translate}}</span></a> </li> </ul> </div> <div class="wizard-pf-contents adjust-size no-margin-bottom"> <h1 class="control-label centered" for="textInput-markup">{{\'Extensions Configuration\' | translate}}</h1> <div ng-if="!(users | isEmpty)" class="container-fluid margin-top-lg"> <div ng-if="error.file.status" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{error.file.title | translate}}.</strong> {{error.file.content | translate}} </div> <div> <div class="filter-label-user">{{\'Filter\' | translate}}:</div> <select title="-" pf-select="{ width: \'180px\' }" ng-model="selectedUsersFilter" ng-options="uf as uf | translate for uf in availableUsersFilters"> </select> </div> <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchUsersString" type="text" class="form-control input-lg" placeholder="{{\'Search users\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <div class="form-group config-row-button"> <button ng-if="providerLocal" data-toggle="modal" data-target="#createUser" class="btn btn-primary btn-lg no-margin">{{\'Add user\' | translate}}</button> <button ng-if="providerLocal" ng-click="fileSelectImport()" class="btn btn-primary btn-lg no-margin">{{\'Import\' | translate}}</button> <button ng-click="csvExport()" class="btn btn-primary btn-lg no-margin">{{\'Export\' | translate}}</button> <input ng-model="temp.importFile" type="file" accept=".csv" id="importInput"> <a id="dlLink" download="users.csv" href="" class="hidden"></a> </div> <div class="list-group list-view-pf list-view-pf-view adjust-margin-extensions margin-bottom-lg"> <div ng-show="selectedUsersFilter == \'configured\' ? user.default_extension !== \'none\' : (selectedUsersFilter == \'unconfigured\' ? user.default_extension == \'none\' : true)" class="list-group-item" ng-repeat="user in users | customFilterMultiple:\'displayname,username,default_extension\':searchUsersString | orderBy:\'user.username\' | limitTo: usersLimit"> <div class="list-view-pf-actions {{user.alreadyExists ? \'has-error\' : \'\'}}"> <div ng-show="user.isInAction" class="spinner spinner-sm adjust-margin"></div> <span ng-show="!user.isInAction" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{user.default_extension === \'none\' ? \'Not configured\' : \'Configured\' | translate}}" class="pficon {{user.default_extension === \'none\' ? \'pficon-info\' : \'pficon-ok\'}} icon-med"></span> <span ng-if="user.alreadyExists" class="help-block">{{\'Extension already in use\' | translate}}</span> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-user list-view-pf-icon-sm {{user.default_extension === \'none\' ? \'disabled\' : \'\'}}"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading {{user.default_extension === \'none\' ? \'disabled\' : \'\'}}">{{user.username}}</div> <div class="list-group-item-text"> <span class="{{user.default_extension === \'none\' ? \'disabled\' : \'\'}}">{{user.displayname}}</span> </div> </div> <div class="list-view-pf-additional-info"> <div ng-if="user.default_extension === \'none\'" class="list-view-pf-additional-info-item {{user.alreadyExists ? \'has-error\' : \'\'}}"> <form class="full-size" ng-submit="setMainExtension(user)"> <input ng-model="user.temp_ext" type="text" class="form-control" id="{{user.username}}_ExtInput_add" placeholder="{{\'Insert extension\' | translate}}"> </form> <div class="input-group-btn"> <button ng-click="setMainExtension(user)" type="button" class="btn btn-default" aria-haspopup="true" aria-expanded="false">{{\'Add\' | translate}}</button> </div> </div> <div ng-if="user.default_extension !== \'none\'" class="list-view-pf-additional-info-item"> <form class="full-size" ng-submit="setMainExtension(user)"> <input type="text" ng-model="user.default_extension" class="form-control" id="{{user.username}}_ExtInput_edit" placeholder="{{\'Insert extension\' | translate}}"> </form> <div class="input-group-btn"> <button ng-click="setMainExtension(user)" type="button" class="btn btn-default" aria-haspopup="true" aria-expanded="false">{{\'Modify\' | translate}}</button> </div> </div> </div> </div> </div> </div> </div> </div> <div ng-if="users | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'No users found\' | translate}} </h1> <p ng-if="!mode.isLdap"> {{\'Check your LDAP or Active Directory settings\' | translate}} </p> <div ng-if="providerLocal" class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#createUser" class="btn btn-primary btn-lg">{{\'Create user\' | translate}}</button> <button ng-click="fileSelectImport()" class="btn btn-primary btn-lg no-margin">{{\'Import\' | translate}}</button> <input ng-model="temp.importFile" type="file" accept=".csv" id="importInput"> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> <div class="modal fade" id="createUser" tabindex="-1" role="dialog" aria-labelledby="createUserLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="createUserLabel">{{\'Add user\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="createUser(newUser)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Username\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newUser.username" type="text" class="form-control"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput2-modal-markup">{{\'Fullname\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newUser.fullname" type="text" id="textInput2-modal-markup" class="form-control"></div> </div> </div> <div ng-show="onSave" class="spinner spinner-sm adjust-margin loader-modal"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </form> </div> </div> </div> <div id="importModal" class="modal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{\'Import users from CSV\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="importConfirm(temp.file64)"> <div class="modal-body"> <div ng-if="!temp.loading" class="alert alert-warning alert-dismissable" style="margin-bottom: 0px"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Start import users from\' | translate}} {{temp.csvFileName}}?</strong> </div> <div ng-if="temp.loading"> <div class="progress-description"> <div ng-if="temp.currentProgress < 100 && temp.currentProgress != -1" class="spinner spinner-xs spinner-inline"></div> <span ng-if="temp.currentProgress == 100" class="pficon pficon-ok"></span> <span ng-if="temp.currentProgress == -1" class="pficon pficon-error-circle-o"></span> <span ng-if="temp.currentProgress != -1"><strong>{{\'Creating\' | translate}}:</strong> {{\'users\' | translate}}</span> <span ng-if="temp.currentProgress == -1"><strong>{{\'Error\' | translate}}:</strong> {{\'some users creation failed\' | translate}}</span> </div> <div class="progress progress-label-top-right"> <div class="progress-bar {{temp.currentProgress == -1 ? \'progress-bar-danger\' : \'progress-bar-success\'}}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: {{temp.currentProgress == -1 ? \'100\' : temp.currentProgress}}%"> <span>{{temp.currentProgress == -1 ? \'100\' : temp.currentProgress}}%</span> </div> </div> </div> </div> <div class="modal-footer submit"> <button class="btn btn-default" ng-disabled="temp.loadingCancel" ng-click="clearImport()" type="button" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button class="btn btn-primary" ng-disabled="temp.loading" type="submit">{{\'Import\' | translate}}</button> </div> </form> </div> </div> </div></div>'),e.put("views/final.html",'<div class="blank-slate-pf" id=""> <div class="blank-slate-pf-icon"> <span class="pficon pficon pficon-ok"></span> </div> <h1> {{\'Wizard completed\' | translate}}! </h1> <p> {{\'You have successfully completed the wizard\' | translate}}. </p> <p> {{\'Go to Home or Print final report for your created users\' | translate}}. </p> <div class="blank-slate-pf-main-action"> <button ng-click="goTo(\'/\')" class="btn btn-default btn-lg"> {{\'Go to Home\' | translate}} </button> <button ng-click="generatePDF()" class="btn btn-primary btn-lg"> {{\'Print final report\' | translate}} </button> </div> </div>'),e.put("views/login.html",'<div id="loginTpl"> <span id="badge"> <img src="images/brand.png" alt="{{customConfig.BRAND_NAME}}"> </span> <div class="container" ng-controller="LoginCtrl"> <div class="row"> <div class="col-sm-12 col-brand"> <div id="brand"> <h1>{{customConfig.BRAND_NAME}}</h1> </div> </div> <div class="col-sm-7 col-md-6 col-lg-5 login"> <form class="form-horizontal" role="form" ng-submit="doLogin()"> <div class="form-group error-credentials" ng-show="login.showError"> <label for="inputUsername" class="col-sm-2 col-md-2 control-label login-red">{{\'Error\' | translate}}</label> <div class="col-sm-10 col-md-10"> <label for="inputUsername" class="col-sm-6 col-md-6 control-label no-padding login-red-label login-red">{{\'Invalid credentials\' | translate}}</label> </div> </div> <div class="form-group"> <label for="inputUsername" class="col-sm-2 col-md-2 control-label">Username</label> <div class="col-sm-10 col-md-10"> <input required ng-class="login.showError ? \'login-error\': \'\'" type="text" class="form-control" id="inputUsername" placeholder="" tabindex="1" ng-model="username"> </div> </div> <div class="form-group"> <label for="inputPassword" class="col-sm-2 col-md-2 control-label">Password</label> <div class="col-sm-10 col-md-10"> <input required ng-class="login.showError ? \'login-error\': \'\'" type="password" class="form-control" id="inputPassword" placeholder="" tabindex="2" ng-model="password"> </div> </div> <div class="form-group"> <div class="col-xs-8 col-sm-offset-2 col-sm-6 col-md-offset-2 col-md-6"> \x3c!-- <span class="help-block"> {{\'Forgot\' | translate}} <a href="#" tabindex="5">username</a> {{\'or\' | translate}} <a href="#" tabindex="6">password</a>?</span> --\x3e </div> <div class="col-xs-4 col-sm-4 col-md-4 submit"> <button type="submit" class="btn btn-primary btn-lg" tabindex="4">Log In</button> </div> </div> </form> </div> <div class="col-sm-5 col-md-6 col-lg-7 details"> <p> <strong>Welcome to {{customConfig.BRAND_NAME}}</strong> </p></div> </div> <div ng-show="photoUser" class="login-copy">Photo by {{photoUser}}</div> <div>Copyright &copy; {{currentYear()}} {{customConfig.BRAND_NAME}}</div> </div> </div>'),e.put("views/migration.html",'<div class="wizard-pf"> <div class="blank-slate-pf no-border"> <div class="blank-slate-pf-icon"> <span class="fa fa-rocket"></span> </div> <h1> {{\'Migration from NethVoice 11 to Nethvoice 14\' | translate}} ({{"BETA"| translate}}) </h1> <p> {{\'NethVoice 14 packages are ready to begin the migration\' | translate}}. </p> <p> {{\'Users, configurations and CDR will be configured step by step\' | translate}}. </p> <p> {{\'Starting the migration, users profiles will be automatically migrated\' | translate}}. </p> <p> {{\'Learn more about this\' | translate}} <a target="_blank" href="{{customConfig.BRAND_DOCS}}">{{\'on the documentation\' | translate}}</a>. </p> <div class="blank-slate-pf-main-action"> <button id="legacy-button" ng-click="startMigration()" class="btn btn-primary btn-lgg handle-margin"> {{\'Start migration\' | translate}} </button> <button id="legacy-button" ng-click="skipMigration()" class="btn btn-primary btn-lgg handle-margin"> {{\'Skip migration\' | translate}} </button> </div> </div> </div>'),e.put("views/migration/cdr.html",'<div id="wizard-container" class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'users\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Utenti\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'config\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Configurazioni\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'cdr\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a><span class="wizard-pf-step-number">3</span><span class="wizard-pf-step-title">{{\'CDR\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'report\',2) ? \'active\' : \'\'}}" data-tabgroup="4"> <a><span class="wizard-pf-step-number">4</span><span class="wizard-pf-step-title">{{\'Report\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents migration-config-container adjust-size no-margin-bottom"> <h1 class="control-label centered" id="conf-migration-title" for="textInput-markup">{{\'CDR migration\' | translate}}</h1> <div class="list-group list-view-pf adjust-margin-extensions no-border margin-migration-users"> <div class="adjust-profile-margin"> <div> <h1 ng-click="toggleMig(\'collapse-cdr\')" class="adjust-header adjust-profile-header"> <span class="fa fa-file-text-o card-pf-icon-circle config-title-icon"></span>{{\'Migration\' | translate}}: <span class="weight">{{"CDR" | translate}}</span> <span ng-if="migration.cdr.loading" class="inprogress-text">{{"in progress" | translate}} <div class="lds-ellipsis"> <div></div><div></div><div></div><div></div> </div> </span> <span ng-if="!migration.cdr.loading" class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> <span ng-if="migration.cdr.status === \'success\' && !migration.cdr.completed" class="pficon pficon-ok success-mig-icon icon-med-reload profile-open-icon"></span> <span ng-if="migration.cdr.status === \'fail\' && !migration.cdr.completed" class="pficon pficon-error-circle-o success-mig-icon icon-med-reload profile-open-icon"></span> <div ng-if="migration.cdr.loading" class="spinner spinner-sm profile-save-spinner migration-spinners"></div> </h1> <div id="collapse-cdr" class="panel-collapse adjust-profile-body"> <div class="panel-body profile-panel"> <div ng-if="!migration.cdr.started && (migration.cdr.count != 0)" class="alert alert-warning overflow-auto"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"CDR is composed by" | translate}} <span class="pf-red cdr-entries-num">{{migration.cdr.count}}</span> {{"entries" | translate}}.</strong> {{"Migration will take a few minutes" | translate}}. </div> <div ng-if="migration.cdr.status === \'success\'" class="alert alert-success"> <span class="pficon pficon-ok"></span> <strong>{{"Migration has been started in background" | translate}}.</strong> {{"You can check CDR migration status on file /var/run/nethvoice/cdrmigration" | translate}} </div> <div ng-if="migration.cdr.status === \'fail\' " class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> {{"Migration has not been started" | translate}}. </div> <div ng-repeat="error in migration.cdr.data.errors track by $index" class="alert alert-danger overflow-auto"> <span class="pficon pficon-error-circle-o"></span> {{error | translate}} </div> <div ng-repeat="warning in migration.cdr.data.warnings track by $index" class="alert alert-warning overflow-auto"> <span class="pficon pficon-warning-triangle-o"></span> {{warning | translate}} </div> <div ng-repeat="info in migration.cdr.data.infos track by $index" class="alert alert-info overflow-auto"> <span class="pficon pficon-info"></span> {{info | translate}} </div> <button ng-hide="migration.cdr.status === \'success\' || migration.cdr.status === \'fail\'" ng-click="wizard.isMigrationSkip ? exitMigration() : goToReport(\'cdr\')" class="btn btn-primary btn-lg profile-button-save"> {{\'Skip migration\' | translate}} CDR </button> <button ng-hide="migration.cdr.status === \'success\' || migration.cdr.status === \'fail\'" data-toggle="modal" data-target="#importModalMig" class="btn btn-primary btn-lg profile-button-save" type="submit"> {{\'Start migration\' | translate}} </button> </div> </div> </div> </div> </div> </div> <div id="wizardStepBase"> <div id="wizard-step-footer" class="modal-footer wizard-pf-footer"> <div class="row"> <div class="col-lg-8 col-md-6 col-sm-6 col-xs-12 no-padding"> </div> <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12 no-padding"> <button type="button" class="btn btn-default wizard-pf-back disabled"> {{\'Back\' | translate}} </button> <button ng-click="wizard.isMigrationSkip ? exitMigration() : (migration.cdr.status === \'success\' || migration.cdr.status === \'fail\') ? goToReport() : \'\'" type="button" class="btn btn-primary wizard-pf-next {{migration.cdr.status === \'success\' || migration.cdr.status === \'fail\' ? \'\' : \'disabled\'}}"> {{\'Next\' | translate}} </button> </div> </div> </div> </div> </div> <div id="importModalMig" class="modal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{\'CDR migration\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="startCdrMig()"> <div class="modal-body"> <div ng-if="!temp.loading" class="alert alert-warning alert-dismissable" style="margin-bottom: 0px"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'The CDR will be migrated in background\' | translate}}.</strong> {{\'Are you sure you want to start the migration\' | translate}}? </div> </div> <div class="modal-footer submit"> <button class="btn btn-default" type="button" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button class="btn btn-primary" type="submit">{{\'Start\' | translate}}</button> </div> </form> </div> </div> </div>'),e.put("views/migration/config.html",'<div id="wizard-container" class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'users\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Utenti\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'config\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Configurazioni\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'cdr\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a><span class="wizard-pf-step-number">3</span><span class="wizard-pf-step-title">{{\'CDR\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'report\',2) ? \'active\' : \'\'}}" data-tabgroup="4"> <a><span class="wizard-pf-step-number">4</span><span class="wizard-pf-step-title">{{\'Report\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents migration-config-container adjust-size no-margin-bottom"> <h1 class="control-label centered" id="conf-migration-title" for="textInput-markup">{{\'Configurations migration\' | translate}}</h1> <div ng-repeat="(elemKey, elem) in migration" class="list-group list-view-pf adjust-margin-extensions no-border margin-migration-users"> <div class="adjust-profile-margin"> <div> <h1 ng-click="migration[elemKey].started ? toggleMig(\'collapse-\' + elemKey) : \'\'" class="adjust-header adjust-profile-header {{migration[elemKey].statusDone ? \'disabled\' : \'\'}}"> <span ng-if="elemKey === \'vtrunks\'" class="fa fa-cloud card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'gateptrunks\'" class="pficon pficon-topology card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'iax\'" class="pficon pficon-cloud-tenant card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'outroutes\'" class="pficon pficon-trend-up card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'groups\'" class="fa fa-object-group card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'queues\'" class="fa fa-users card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'ivr\'" class="fa fa-th card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'cqr\'" class="fa fa-database card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'recordings\'" class="fa fa-microphone card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'announcements\'" class="fa fa-bullhorn card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'daynight\'" class="pficon pficon-service card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'tgroupstcond\'" class="fa fa-clock-o card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'iroutes\'" class="pficon pficon-trend-down card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'postmig\'" class="fa fa-cog card-pf-icon-circle config-title-icon"></span> {{\'Migration\' | translate}}: <span ng-if="elemKey === \'vtrunks\'" class="weight">{{"VOIP Trunks" | translate}}</span> <span ng-if="elemKey === \'gateptrunks\'" class="weight">{{"gateway and physical trunks" | translate}}</span> <span ng-if="elemKey === \'iax\'" class="weight">{{"iax" | translate}}</span> <span ng-if="elemKey === \'outroutes\'" class="weight">{{"outbound routes" | translate}}</span> <span ng-if="elemKey === \'groups\'" class="weight">{{"groups" | translate}}</span> <span ng-if="elemKey === \'queues\'" class="weight">{{"queues" | translate}}</span> <span ng-if="elemKey === \'ivr\'" class="weight">{{"ivr" | translate}}</span> <span ng-if="elemKey === \'cqr\'" class="weight">{{"cqr" | translate}}</span> <span ng-if="elemKey === \'recordings\'" class="weight">{{"recordings" | translate}}</span> <span ng-if="elemKey === \'announcements\'" class="weight">{{"announcements" | translate}}</span> <span ng-if="elemKey === \'daynight\'" class="weight">{{"daynight" | translate}}</span> <span ng-if="elemKey === \'tgroupstcond\'" class="weight">{{"temporal groups and temporal conditions" | translate}}</span> <span ng-if="elemKey === \'iroutes\'" class="weight">{{"inbound routes" | translate}}</span> <span ng-if="elemKey === \'postmig\'" class="weight">{{"postmig" | translate}}</span> <span ng-if="migration[elemKey].loading" class="inprogress-text">{{"in progress" | translate}} <div class="lds-ellipsis"> <div></div> <div></div> <div></div> <div></div> </div> </span> <span ng-if="migration[elemKey].started && !migration[elemKey].loading" class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> <span ng-if="migration[elemKey].status === \'success\' && !migration[elemKey].completed" class="pficon pficon-ok success-mig-icon icon-med-reload profile-open-icon"></span> <span ng-if="migration[elemKey].status === \'fail\' && !migration[elemKey].completed" class="pficon pficon-error-circle-o success-mig-icon icon-med-reload profile-open-icon"></span> <div ng-if="migration[elemKey].loading" class="spinner spinner-sm profile-save-spinner migration-spinners"></div> </h1> <div id="collapse-{{elemKey}}" class="panel-collapse collapse adjust-profile-body"> <div class="panel-body profile-panel"> <div ng-if="migration[elemKey].status === \'success\'" class="alert alert-success"> <span class="pficon pficon-ok"></span> {{"Migration has been completed" | translate}}. </div> <div ng-if="migration[elemKey].status === \'fail\' " class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> {{"Migration has not been completed" | translate}}. </div> <div ng-repeat="error in migration[elemKey].data.errors track by $index" class="alert alert-danger overflow-auto"> <span class="pficon pficon-error-circle-o"></span> {{error | translate}} </div> <div ng-repeat="warning in migration[elemKey].data.warnings track by $index" class="alert alert-warning overflow-auto"> <span class="pficon pficon-warning-triangle-o"></span> {{warning | translate}} </div> <div ng-repeat="info in migration[elemKey].data.infos track by $index" class="alert alert-info overflow-auto"> <span class="pficon pficon-info"></span> {{info | translate}} </div> </div> </div> </div> </div> </div> </div> <div id="wizardStepBase"> <div id="wizard-step-footer" class="modal-footer wizard-pf-footer"> <div class="row"> <div class="col-lg-8 col-md-6 col-sm-6 col-xs-12 no-padding"> </div> <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12 no-padding"> <button type="button" class="btn btn-default wizard-pf-back disabled"> {{\'Back\' | translate}} </button> <button ng-click="migration.iroutes.status === \'success\' || migration.iroutes.status === \'fail\' ? goToCdr() : \'\'" type="button" class="btn btn-primary wizard-pf-next {{wizard.confMigrationDone ? \'\' : \'disabled\'}}"> {{\'Next\' | translate}} </button> </div> </div> </div> </div> </div>'),e.put("views/migration/report.html",'<div id="wizard-container" class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'users\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Utenti\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'config\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Configurazioni\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'cdr\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a><span class="wizard-pf-step-number">3</span><span class="wizard-pf-step-title">{{\'CDR\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'report\',2) ? \'active\' : \'\'}}" data-tabgroup="4"> <a><span class="wizard-pf-step-number">4</span><span class="wizard-pf-step-title">{{\'Report\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents migration-config-container adjust-size no-margin-bottom"> <h1 class="control-label centered" id="conf-migration-title" for="textInput-markup">{{\'Migration report\' | translate}}</h1> <div class="container-fluid"> <button ng-click="generatePDF()" class="btn btn-primary btn-lg"> {{\'Save PDF report\' | translate}}</button> </div> <div ng-repeat="(elemKey, elem) in migration" class="list-group list-view-pf adjust-margin-extensions no-border margin-migration-users"> <div class="adjust-profile-margin"> <div> <h1 ng-click="toggleMig(\'collapse-\' + elemKey)" class="adjust-header adjust-profile-header"> <span ng-if="elemKey === \'profiles\'" class="fa fa-user card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'users\'" class="pficon pficon-users card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'vtrunks\'" class="fa fa-cloud card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'gateptrunks\'" class="pficon pficon-topology card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'iax\'" class="pficon pficon-cloud-tenant card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'outroutes\'" class="pficon pficon-trend-up card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'groups\'" class="fa fa-object-group card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'queues\'" class="fa fa-users card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'ivr\'" class="fa fa-th card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'cqr\'" class="fa fa-database card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'recordings\'" class="fa fa-microphone card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'announcements\'" class="fa fa-bullhorn card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'daynight\'" class="pficon pficon-service card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'tgroupstcond\'" class="fa fa-clock-o card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'iroutes\'" class="pficon pficon-trend-down card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'cdr\'" class="fa fa-file-text-o card-pf-icon-circle config-title-icon"></span> <span ng-if="elemKey === \'postmig\'" class="fa fa-cog card-pf-icon-circle config-title-icon"></span> {{\'Migration\' | translate}}: <span ng-if="elemKey === \'profiles\'" class="weight">{{"users profiles" | translate}}</span> <span ng-if="elemKey === \'users\'" class="weight">{{"users and extensions" | translate}}</span> <span ng-if="elemKey === \'iax\'" class="weight">{{"iax" | translate}}</span> <span ng-if="elemKey === \'vtrunks\'" class="weight">{{"VOIP Trunks" | translate}}</span> <span ng-if="elemKey === \'gateptrunks\'" class="weight">{{"gateway and physical trunks" | translate}}</span> <span ng-if="elemKey === \'outroutes\'" class="weight">{{"outbound routes" | translate}}</span> <span ng-if="elemKey === \'groups\'" class="weight">{{"groups" | translate}}</span> <span ng-if="elemKey === \'queues\'" class="weight">{{"queues" | translate}}</span> <span ng-if="elemKey === \'ivr\'" class="weight">{{"ivr" | translate}}</span> <span ng-if="elemKey === \'cqr\'" class="weight">{{"cqr" | translate}}</span> <span ng-if="elemKey === \'recordings\'" class="weight">{{"recordings" | translate}}</span> <span ng-if="elemKey === \'announcements\'" class="weight">{{"announcements" | translate}}</span> <span ng-if="elemKey === \'daynight\'" class="weight">{{"daynight" | translate}}</span> <span ng-if="elemKey === \'tgroupstcond\'" class="weight">{{"temporal groups and temporal conditions" | translate}}</span> <span ng-if="elemKey === \'iroutes\'" class="weight">{{"inbound routes" | translate}}</span> <span ng-if="elemKey === \'postmig\'" class="weight">{{"postmig" | translate}}</span> <span ng-if="elemKey === \'cdr\'" class="weight">{{"CDR" | translate}}</span> <span class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> </h1> <div id="collapse-{{elemKey}}" class="panel-collapse collapse adjust-profile-body"> <div class="panel-body profile-panel"> <div ng-repeat="function in elem.functions" ng-if="report[function]"> <div ng-repeat="error in report[function].errors track by $index" class="alert alert-danger overflow-auto"> <span class="pficon pficon-error-circle-o"></span> {{error | translate}} </div> </div> <div ng-repeat="function in elem.functions" ng-if="report[function]"> <div ng-repeat="warning in report[function].warnings track by $index" class="alert alert-warning overflow-auto"> <span class="pficon pficon-warning-triangle-o"></span> {{warning | translate}} </div> </div> <div ng-repeat="function in elem.functions" ng-if="report[function]"> <div ng-repeat="info in report[function].infos track by $index" class="alert alert-info overflow-auto"> <span class="pficon pficon-info"></span> {{info | translate}} </div> </div> </div> </div> </div> </div> </div> </div> <div id="wizardStepBase"> <div id="wizard-step-footer" class="modal-footer wizard-pf-footer"> <div class="row"> <div class="col-lg-8 col-md-6 col-sm-6 col-xs-12 no-padding"> </div> <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12 no-padding"> <button type="button" class="btn btn-default wizard-pf-back disabled"> {{\'Back\' | translate}} </button> <button ng-click="exitMigration()" type="button" class="btn btn-primary wizard-pf-next"> {{\'Next\' | translate}} </button> </div> </div> </div> </div> </div>'),e.put("views/migration/users.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'users\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Utenti\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'config\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Configurazioni\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'cdr\',2) ? \'active\' : \'\'}}" data-tabgroup="3"> <a><span class="wizard-pf-step-number">3</span><span class="wizard-pf-step-title">{{\'CDR\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'report\',2) ? \'active\' : \'\'}}" data-tabgroup="4"> <a><span class="wizard-pf-step-number">4</span><span class="wizard-pf-step-title">{{\'Report\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size no-margin-bottom"> <h1 id="users-migration-title" class="control-label centered" for="textInput-markup">{{\'Users migration\' | translate}}</h1> \x3c!-- Users profiles --\x3e <div class="list-group list-view-pf adjust-margin-extensions no-border margin-migration-users"> <div class="adjust-profile-margin"> <div> <h1 ng-click="migration.profiles.started ? toggleMig(\'collapse-profilemig\') : \'\'" class="adjust-header adjust-profile-header {{migration.profiles.statusDone ? \'disabled\' : \'\'}}"> <span class="fa fa-user card-pf-icon-circle config-title-icon"></span>{{\'Migration\' | translate}}: <span class="weight">{{"users profiles" | translate}}</span> <span ng-if="migration.profiles.loading" class="inprogress-text">{{"in progress" | translate}} <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div> </span> <span ng-if="!migration.profiles.loading" class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> <span ng-if="migration.profiles.status === \'success\' && !migration.profiles.completed" class="pficon pficon-ok success-mig-icon icon-med-reload profile-open-icon"></span> <span ng-if="migration.profiles.status === \'fail\' && !migration.profiles.completed" class="pficon pficon-error-circle-o success-mig-icon icon-med-reload profile-open-icon"></span> <div ng-if="migration.profiles.loading" class="spinner spinner-sm profile-save-spinner migration-spinners"></div> </h1> <div id="collapse-profilemig" class="panel-collapse simple-hidden adjust-profile-body"> <div class="panel-body profile-panel"> <div ng-if="migration.profiles.status === \'success\'" class="alert alert-success"> <span class="pficon pficon-ok"></span> {{"Migration has been completed" | translate}}. </div> <div ng-if="migration.profiles.status === \'fail\' " class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> {{"Migration has not been completed" | translate}}. </div> <div ng-repeat="error in migration.profiles.data.errors track by $index" class="alert alert-danger overflow-auto"> <span class="pficon pficon-error-circle-o"></span> {{error | translate}} </div> <div ng-repeat="warning in migration.profiles.data.warnings track by $index" class="alert alert-warning overflow-auto"> <span class="pficon pficon-warning-triangle-o"></span> {{warning | translate}} </div> <div ng-repeat="info in migration.profiles.data.infos track by $index" class="alert alert-info overflow-auto"> <span class="pficon pficon-info"></span> {{info | translate}} </div> </div> </div> </div> </div> </div> \x3c!-- Users and extensions --\x3e <div class="list-group list-view-pf adjust-margin-extensions no-border margin-migration-users"> <div class="adjust-profile-margin"> <div id="accordion-markup-usersmig"> <h1 ng-click="migration.users.statusDone ? \'\' : toggleMig(\'collapse-usermig\')" class="adjust-header adjust-profile-header {{migration.users.statusDone ? \'disabled\' : \'\'}}"> <span class="pficon pficon-users card-pf-icon-circle config-title-icon"></span>{{\'Migration\' | translate}}: <span class="weight">{{"users and extensions" | translate}}</span> <span ng-if="migration.users.loading" class="inprogress-text">{{"in progress" | translate}} <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div> </span> <span ng-if="!migration.users.loading && !migration.users.statusDone" class="fa fa-angle-down toggle-icon-mig icon-med-reload profile-open-icon"></span> <span ng-if="migration.users.status === \'success\' && !migration.users.completed" class="pficon pficon-ok success-mig-icon icon-med-reload profile-open-icon"></span> <span ng-if="migration.users.status === \'fail\' && !migration.users.completed" class="pficon pficon-error-circle-o success-mig-icon icon-med-reload profile-open-icon"></span> <div ng-if="migration.users.loading" class="spinner spinner-sm profile-save-spinner migration-spinners"></div> <div ng-show="profile.onSave" class="spinner spinner-sm profile-save-spinner"></div> </h1> <div id="collapse-usermig" class="simple-hidden adjust-profile-body"> <div class="panel-body profile-panel"> <div ng-if="(migration.profiles.status === \'success\' || migration.profiles.status === \'fail\') && !migration.users.started" class="alert alert-warning"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Associate the user name with the desired extension" | translate}}</strong> {{"before starting users migration" | translate}}. </div> <div ng-if="migration.users.status === \'success\'" class="alert alert-success"> <span class="pficon pficon-ok"></span> {{"Migration has been completed" | translate}}. </div> <div ng-if="migration.users.status === \'fail\'" class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> {{"Migration has not been completed" | translate}}. {{"Continue to configurations migration or try again" | translate}}. </div> <div ng-repeat="error in migration.users.data.errors track by $index" class="alert alert-danger overflow-auto"> <span class="pficon pficon-error-circle-o"></span> {{error | translate}} </div> <div ng-repeat="warning in migration.users.data.warnings track by $index" class="alert alert-warning overflow-auto"> <span class="pficon pficon-warning-triangle-o"></span> {{warning | translate}} </div> <div ng-repeat="info in migration.users.data.infos track by $index" class="alert alert-info overflow-auto"> <span class="pficon pficon-info"></span> {{info | translate}} </div> <div ng-if="!(oldusers | isEmpty)" class="container-fluid"> <div class="list-group list-view-pf list-view-pf-view adjust-margin-extensions"> <div ng-show="migration.users.status != \'success\' && migration.users.status != \'fail\'" class="list-group-item margin-migration-usersmigration" ng-repeat="(key, olduser) in oldusers | limitTo: olduserLimit"> <div class="list-view-pf-actions {{olduser.alreadyExists ? \'has-error\' : \'\'}}"> <div ng-show="olduser.isInAction" class="spinner spinner-sm adjust-margin"></div> <span ng-show="!olduser.isInAction" ng-click="checkRemoveOldExtension(key)" data-toggle="modal" data-target="#confirmDelete" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Delete\' | translate}}" class="fa fa-trash red-colored icon-med"></span> <span ng-if="olduser.alreadyExists" class="help-block">{{\'Extension already in use\' | translate}}</span> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-user list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="left-column-input-container input-group flex-container"> <div class="list-group-item-heading imp-full-size-max"> <button id="{{\'selectId\' + olduser.extension}}" ng-click="openSelect(\'selectId\' + olduser.extension)" class="form-control width-180 float-left select-text-inputs {{olduser.username ? \'\' : \'cursive disabled-color\'}}" data-toggle="dropdown"> {{olduser.username || \'Select user\' | translate}} </button> <span id="btnExt-{{olduser.extension}}" data-toggle="dropdown" popover-placement="top-center" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Select user\' | translate}}" class="width-26 float-left adjust-button dropdown-toggle btn btn-default"> <span class="fa fa-angle-down"></span> </span> <span ng-click="setNewUserFor(key)" data-toggle="modal" data-target="#createUser" popover-placement="top-center" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Add user\' | translate}}" class="width-26 float-left adjust-button dropdown-toggle btn btn-default"> <span class="fa fa-user-plus"></span> </span> <ul class="dropdown-menu dropdown-user-migration" role="menu" aria-labelledby="btnExt-{{olduser.extension}"> <li ng-if="(!olduser.oldusername) && (olduser.username)" ng-click="disassociatesUser(olduser)" class="not-selectable"> <a>{{"Empty field" | translate}}</a> </li> <li ng-if="(olduser.oldusername) && (olduser.oldusername !==olduser.username)" ng-click="resetUser(olduser)" class="not-selectable"> <a>{{"Reset field" | translate}}</a> </li> <li ng-if="!(users | isEmpty) && !(userz.inuse)" ng-repeat="(keyz, userz) in users | limitTo: userLimit" class="not-selectable"> <a ng-click="associateUser(olduser, userz)">{{userz.username}}</a> </li> <li ng-if="!(areUsersAvaible())" class="not-selectable"> <a class="disabled-color">{{"No user available" | translate}}</a> </li> </ul> </div> </div> <div class="list-group-item-text"> {{olduser.name}} </div> </div> <div class="list-view-pf-additional-info"> <div ng-if="olduser.extension !== \'none\'" class="list-view-pf-additional-info-item"> <b>{{olduser.extension}}</b> </div> </div> </div> </div> </div> <div ng-show="(user.default_extension != \'none\' && user.default_extension != \'\') && (migration.users.status == \'success\' || migration.users.status == \'fail\')" class="list-group-item margin-migration-usersmigration" ng-repeat="(key, user) in users  | limitTo: userLimit"> <div class="list-view-pf-actions {{user.alreadyExists ? \'has-error\' : \'\'}}"> <div ng-show="user.isInAction" class="spinner spinner-sm adjust-margin"></div> <span ng-show="!user.isInAction" ng-click="checkRemoveOldExtension(key)" data-toggle="modal" data-target="#confirmDelete" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Delete\' | translate}}" class="pficon pficon-ok red-colored icon-med"></span> <span ng-if="user.alreadyExists" class="help-block">{{\'Extension already in use\' | translate}}</span> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-user list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="left-column-input-container input-group flex-container"> <div id="{{\'selectIdList\' + user.extension}}" class="list-group-item-heading imp-full-size-max"> <div class="list-group-item-text"> {{user.username}} </div> </div> </div> <div class="list-group-item-text"> {{user.displayname}} </div> </div> <div class="list-view-pf-additional-info"> <div ng-if="user.extension !== \'none\'" class="list-view-pf-additional-info-item"> <b>{{user.default_extension}}</b> </div> </div> </div> </div> </div> <div ng-show="(users | isEmpty) && (migration.users.status == \'success\' || migration.users.status == \'fail\')" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'No users found\' | translate}} </h1> <p> {{\'No users have been migrated\' | translate}} </p> </div> </div> </div> <div ng-if="oldusers | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-users"></span> </div> <h1> {{\'No users found\' | translate}} </h1> <p ng-if="!mode.isLdap"> {{\'Check your account provider settings\' | translate}} </p> </div> <button ng-hide="migration.users.status === \'success\' || migration.users.status === \'fail\'" data-toggle="modal" data-target="#importModalMig" class="btn btn-primary btn-lg profile-button-save" type="submit"> {{\'Start migration\' | translate}} </button> <button ng-click="resetUsersMig()" ng-show="migration.users.status === \'fail\'" class="btn btn-default btn-lg profile-button-save"> {{\'Try again\' | translate}} </button> </div> </div> </div> </div> </div> </div> <div id="wizardStepBase"> <div id="wizard-step-footer" class="modal-footer wizard-pf-footer"> <div class="row"> <div class="col-lg-8 col-md-6 col-sm-6 col-xs-12 no-padding"> </div> <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12 no-padding"> <button type="button" class="btn btn-default wizard-pf-back disabled"> {{\'Back\' | translate}} </button> <button ng-click="migration.users.status === \'success\' || migration.users.status === \'fail\' || migration.users.statusDone ? showConfMigAlert() : \'\'" type="button" class="btn btn-primary wizard-pf-next {{migration.users.status === \'success\' || migration.users.status === \'fail\' || migration.users.statusDone ? \'\' : \'disabled\'}}"> {{\'Next\' | translate}} </button> </div> </div> </div> </div> </div> <div class="modal fade" id="createUser" tabindex="-1" role="dialog" aria-labelledby="createUserLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="createUserLabel">{{\'Add user\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="createUser(newUser)"> <div class="modal-body"> <div ng-if="errorUserCreation" class="alert alert-danger overflow-auto"> <span class="pficon pficon-error-circle-o"></span> {{"Username already used" | translate}}. </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput-modal-markup">{{\'Username\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newUser.username" type="text" class="form-control"></div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="textInput2-modal-markup">{{\'Fullname\' | translate}}</label> <div class="col-sm-9"> <input required ng-model="newUser.fullname" type="text" id="textInput2-modal-markup" class="form-control"></div> </div> </div> <div ng-show="onSave" class="spinner spinner-sm adjust-margin loader-modal"></div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </form> </div> </div> </div> <div id="confirmDelete" class="modal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{\'Confirm deletion\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="removeOldExtension()"> <div class="modal-body"> <div ng-if="!temp.loading" class="alert alert-warning alert-dismissable" style="margin-bottom: 0px"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Are you sure you want to delete extension\' | translate}} {{oldusers[oldUserToRemove].extension}} {{\'from the list\' | translate}}?</strong> </div> </div> <div class="modal-footer submit"> <button class="btn btn-default" type="button" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button class="btn btn-danger" type="submit">{{\'Delete\' | translate}}</button> </div> </form> </div> </div> </div> <div id="importModalMig" class="modal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{\'Users migration\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="startUsersMig()"> <div class="modal-body"> <div ng-if="!temp.loading" class="alert alert-warning alert-dismissable" style="margin-bottom: 0px"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Are you sure you want to start users migration\' | translate}}?</strong> </div> <div ng-if="temp.loading"> <div class="progress-description"> <div ng-if="temp.currentProgress < 100 && temp.currentProgress != -1" class="spinner spinner-xs spinner-inline"></div> <span ng-if="temp.currentProgress == 100" class="pficon pficon-ok"></span> <span ng-if="temp.currentProgress == -1" class="pficon pficon-error-circle-o"></span> <span ng-if="temp.currentProgress != -1"><strong>{{\'Migrating\' | translate}}:</strong> {{\'users\' | translate}}</span> <span ng-if="temp.currentProgress == -1"><strong>{{\'Error\' | translate}}:</strong> {{\'some users migration failed\' | translate}}</span> </div> <div class="progress progress-label-top-right"> <div class="progress-bar {{temp.currentProgress == -1 ? \'progress-bar-danger\' : \'progress-bar-success\'}}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: {{temp.currentProgress == -1 ? \'100\' : temp.currentProgress}}%"> <span>{{temp.currentProgress == -1 ? \'100\' : temp.currentProgress}}%</span> </div> </div> </div> </div> <div class="modal-footer submit"> <button class="btn btn-default" ng-click="clearImport()" ng-disabled="temp.loadingCancel" type="button" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button class="btn btn-primary" ng-disabled="temp.loading" type="submit">{{\'Start\' | translate}}</button> </div> </form> </div> </div> </div> <div id="alertStartConfMig" class="modal" tabindex="-1" role="dialog" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{\'Configurations migration\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="startConfigMig()"> <div class="modal-body"> <span class="message-list"> <span class="pficon pficon-warning-triangle-o message-icon"></span> <span class="message-subtitle"> {{"Continuing the following configurations will be automatically migrated" | translate}}: </span> <ul class="message-ul"> <li> {{\'VOIP Trunks\' | translate}} </li> <li> {{\'gateway and physical trunks\' | translate}} </li> <li> {{\'iax\' | translate}} </li> <li> {{\'outbound routes\' | translate}} </li> <li> {{\'groups\' | translate}} </li> <li> {{\'queues\' | translate}} </li> <li> {{\'ivr\' | translate}} </li> <li> {{\'cqr\' | translate}} </li> <li> {{\'recordings\' | translate}} </li> <li> {{\'announcements\' | translate}} </li> <li> {{\'daynight\' | translate}} </li> <li> {{\'temporal groups and temporal conditions\' | translate}} </li> <li> {{\'inbound routes\' | translate}} </li> <li> {{\'postmig\' | translate}} </li> </ul> </span> </div> <div class="modal-footer submit"> <button class="btn btn-default" type="button" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button class="btn btn-primary" type="submit">{{\'Next\' | translate}}</button> </div> </form> </div> </div> </div>'),e.put("views/routes.html","<p>This is the routes view.</p>"),e.put("views/routes/inbound.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'inbound\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'routes/inbound\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Inbound\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'outbound\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'routes/outbound\')"><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Outbound\' | translate}}</span></a> </li> </ul> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup" class="control-label centered" for="textInput-markup"> {{\'Inbound routes\' | translate}} </h1> <div ng-if="routes.length > 0" class="container-fluid inbound-margin-top"> <div class="list-group list-view-pf list-view-pf-view list-header"> <div class="list-group-item list-item-header"> <div class="list-view-pf-actions"> <label>{{\'Actions\' | translate}}</label> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-usera list-view-pf-icon-sm adjust-line">{{routes.length}}</span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description adjust-list"> <div class="list-group-item-heading"> {{\'Route\' | translate}} </div> <div class="list-group-item-text"> {{\'Description\' | translate}} </div> </div> <div class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> <label>{{\'Destination\' | translate}}</label> </div> </div> </div> </div> </div> </div> <div class="list-group list-view-pf list-view-pf-view"> <div class="list-group-item" ng-repeat="route in routes | limitTo: inboundLimit"> <div class="list-view-pf-actions"> <div class="dropdown dropdown-kebab-pf"> <a target="_blank" ng-href="{{customConfig.VPLAN_URL + \'/?did=\' + route.url}}" class="btn btn-default">{{\'Modify\' | translate}}</a> <button class="btn btn-link dropdown-toggle" type="button" id="dropdownKebab" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="fa fa-ellipsis-v"></span> </button> <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownKebab"> <li><a ng-click="setCurrentRoute(route)" data-toggle="modal" data-target="#confirmDeleteModal">{{\'Delete\' | translate}}</a></li> </ul> </div> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-long-arrow-down list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description adjust-list"> <div class="list-group-item-heading"> {{ route.extension }} / {{ route.cidnum }} </div> <div class="list-group-item-text"> {{ route.description }} </div> </div> <div class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> <span class="pficon pficon-export"></span> <span class="weight-dest">{{parseDestinations(route.destination).prefix | translate}}</span>{{parseDestinations(route.destination).prefix ? \':\' : \'\'}} {{parseDestinations(route.destination).description | translate}} </div> </div> </div> </div> </div> <button ng-click="newRoute()" class="btn btn-primary btn-lg right-button">{{\'Create new route\' | translate}}</button> </div> </div> <div ng-if="routes.length == 0" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-long-arrow-down"></span> </div> <h1> {{\'No inbound routes found\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button ng-click="newRoute()" class="btn btn-primary btn-lg">{{\'Create new route\' | translate}}</button> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> </div> <div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Delete route" | translate}} {{currentRoute.extension + (currentRoute.cidnum ? \' / \' + currentRoute.cidnum : \'\')}} </h4> </div> <div class="modal-body"> <div class="form-group medium-font"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteRoute(currentRoute.extension, currentRoute.cidnum)"> {{ "Delete" | translate }} </button> </div> </div> </div> </div>'),e.put("views/routes/outbound.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'inbound\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'routes/inbound\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Inbound\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'outbound\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'routes/outbound\')"><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Outbound\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup" class="control-label centered" for="textInput-markup"> {{\'Outbound routes\' | translate}} <span ng-if="showDialDefault">- {{\'Dial patterns\' | translate}} in \x3c!--<span class="weight">{{getLangName()}}</span>--\x3e <select ng-change="setNewPattern(selectedRouteLang)" title="-" pf-select="{ width: \'180px\' }" ng-model="selectedRouteLang" ng-options="l as getLangName(l) for l in availableDialPatterns"> </select> </span> </h1> <div ng-if="routes[selectedRouteLang].length || routes.length" class="container-fluid"> <div class="list-group list-view-pf list-view-pf-view no-background"> <div ng-if="!(routes.length == 0) && !(onSaveSuccess || onSaveError) && wizard.isWizard && showDialDefault" class="alert alert-warning alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> {{\'Remember to save before pushing forward\' | translate}} </div> <div ng-if="onSaveSuccess" class="alert alert-success alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Configuration saved\' | translate}}.</strong> {{\'Outbound routes configuration saved with success\' | translate}} </div> <div ng-if="onSaveError" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Configuration not saved\' | translate}}.</strong> {{\'Outbound routes configuration error\' | translate}} </div> <div class="list-group-item space-bottom" ng-repeat="(indexRoute,route) in routes[selectedRouteLang]"> <div ng-if="route.route_id" class="list-view-pf-actions"> <a target="_blank" href="{{customConfig.OUTBOUNDS_URL + route.route_id}}" class="btn btn-default">{{\'Advanceds\' | translate}}</a> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="fa fa-long-arrow-up list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description adjust-list"> <div class="list-group-item-heading"> {{route.name | translate}} <span class="route-name-id">({{route.name}})</span> </div> <div class="list-group-item-text"> </div> </div> <div class="list-view-pf-additional-info"> <div class="list-view-pf-additional-info-item"> <div ng-click="toggleDetails($event)" class="list-view-pf-expand"> <span class="pficon pficon-topology"></span> <strong>{{route.trunks.length || 0}}</strong> {{\'Trunks\' | translate}} <span class="fa fa-angle-right"></span> </div> </div> </div> </div> </div> <div class="list-group-item-container container-fluid hidden"> <div class="row"> <div class="col-md-12" as-sortable ng-model="route.trunks"> <div ng-if="allTrunks.length === 0" class="alert alert-warning alert-dismissable no-margin-bottom"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{\'Trunks not found\' | translate}}.</strong> {{\'No trunks created, go\' | translate}} <a ng-click="goTo(\'trunks/physical\')" class="alert-link">{{\'here\' | translate }}</a> {{\'to create one\' | translate}}. </div> <div class="sortable-item" as-sortable-item ng-repeat="trunk in route.trunks"> <div class="list-view-pf-actions"> <button ng-click="removeTrunk(indexRoute, $index)" class="btn btn-default">{{\'Remove\' | translate}}</button> </div> <div as-sortable-item-handle class="list-view-pf-main-info"> <div class="btn btn-link dropdown-toggle anchor-sortable" type="button" id="dropdownKebab" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="fa fa-arrows-v"></span> </div> \x3c!--<div class="btn btn-link dropdown-toggle anchor-sortable" type="button" id="dropdownKebab" data-toggle="dropdown" aria-haspopup="true"\n                      aria-expanded="true">\n                      <span class="">{{$index}}</span>\n                    </div>--\x3e <div class="list-view-pf-left"> <span class="pficon pficon-topology list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description adjust-list"> <div class="list-group-item-heading"> {{trunk.name}} </div> <div ng-if="extractTrunkInfo(trunk.name).vendor" class="list-group-item-heading"> {{\'Device\' | translate}}: {{extractTrunkInfo(trunk.name).vendor}} </div> </div> <div class="list-view-pf-additional-info"> <div ng-if="extractTrunkInfo(trunk.name).port" class="list-view-pf-additional-info-item"> {{\'Port\' | translate}}:&nbsp;<span class="weight-dest">{{extractTrunkInfo(trunk.name).port}}</span> </div> </div> </div> </div> </div> <div ng-if="filterAllTrunks(route.trunks).length > 0" class="dropdown"> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"> {{\'Add trunk\' | translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="trunk in filterAllTrunks(route.trunks) track by $index" role="presentation"><a role="menuitem" tabindex="-1" ng-click="addTrunkToRoute(indexRoute, trunk)">{{trunk.name}}</a></li> </ul> </div> </div> </div> </div> </div> </div> <div ng-show="onSave" class="spinner spinner-sm adjust-margin loader-modal-gateway-not-form-out"></div> <button ng-click="saveRoutes()" class="btn btn-primary btn-lg right-only">{{\'Save\' | translate}}</button> </div> <div ng-if="routes.length == 0" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="fa fa-long-arrow-up"></span> </div> <h1> {{\'No outbound routes found\' | translate}} </h1> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div> </div>'),e.put("views/templates/defaults-modal.html",'<div class="wizard-modal"> <div class="modal-dialog wizard-pf margin-10"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="dfSettingsMLabel">{{\'Default settings\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="setDefaultSettings()"> <div ng-show="defaultsLoading" class="mt-30 mb-30"> <div class="spinner"></div> </div> <div ng-show="!defaultsLoading" class="modal-body inline-display full-width mb-20"> <div ng-show="true" class="col-lg-12 mt-30 pl-40 pr-40"> <div ng-if="!isModelsPage()" class="alert alert-info alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-info"></span> <strong>{{"The following settings can be modified later from the Models page" | translate}}.</strong> </div> <div ng-if="connectivityCheckRes && connectivityCheckRes.valid_certificate === false" class="alert alert-warning alert-dismissable mb-10"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"The PBX address certificate is invalid" | translate}}!</strong> {{"Configuring phones in remote networks with encryption is not possible, the phones will only be able to connect from trusted networks" | translate}}. </div> <div ng-if="connectivityCheckRes && connectivityCheckRes.is_reachable === false" class="alert alert-danger alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{"The PBX address is not reachable" | translate}}!</strong> {{"Add an address reachable from localhost" | translate}}. </div> <div ng-if="adminPw.showAdminPwWarning === true" class="alert alert-warning alert-dismissable mb-10"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"The admin password has been modified" | translate}}!</strong> {{"The automatic click2call function of the CTI application will not work until the next phones provisioning" | translate}}. </div> </div> <div class="col-lg-12 mt-30"> <div ng-repeat="(sectionKey, section) in globalsUi"> \x3c!-- if is pinned section --\x3e <div ng-if="sectionKey == \'pinned\'" style="display: flow-root !important"> <div ng-repeat="item in section.data track by $index" class="col-lg-6 mb-15"> <label class="control-label">{{::item.description | translate}}</label> <div class="{{item.type != \'password\' ? \'col-lg-12\' : \'\'}}"> \x3c!-- list --\x3e <div ng-if="item.type == \'list\'" class="form-group"> <select id="default-select-{{$index}}" class="{{item.options.length > 10 ? \'combobox\' : \'selectpicker\'}} form-control" ng-change="pinnedChange(item.variable)" ng-model="defaultSettings[item.variable]" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> \x3c!-- selectpicker --\x3e <option ng-repeat="option in item.options" value="{{option.value}}" on-finish-render="selectpickerRepeatEnd">{{::option.text | translate}} </option> </select> </div> \x3c!-- input --\x3e <div ng-if="item.type == \'input\'" class="form-group {{(connectivityCheckRes.is_reachable === false) && (item.variable == \'hostname\') ? \'has-error\' : \'\'}}"> <input type="text" id="default-select-{{$index}}" placeholder="-" ng-change="pinnedChange(item.variable)" ng-model="defaultSettings[item.variable]" autocomplete="off" class="form-control">  </div> \x3c!-- password --\x3e <div ng-if="item.type == \'password\'" class="input-group display-flex"> <input id="{{sectionKey}}-input-{{$index}}" ng-model="defaultSettings[item.variable]" ng-change="pinnedChange(item.variable)" type="password" autocomplete="off" show-password="shownPasswords[item.variable]" class="form-control">  <button tabindex="-1" type="button" class="btn btn-default mln-1 zindex-2" ng-click="toggleShowPassword(item.variable)"> <span ng-class="shownPasswords[item.variable] ? \'fa fa-eye-slash\' : \'fa fa-eye\'"></span> </button> </div> </div> </div> </div> \x3c!-- if is section --\x3e <div class="mt-20 globalsSectionContainer col-lg-12" ng-if="sectionKey != \'pinned\'"> <h2 ng-click="openSection(sectionKey)" class="adjust-header adjust-profile-header pl-20 ng-binding pointer"> {{::section.name | translate}} <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> </h2> <div id="collapse-section-{{$index}}" class="panel-collapse adjust-profile-body model-container" ng-if="openedSection == sectionKey"> <div class="panel-body"> <div ng-show="loadingSections[sectionKey]" class="spinner mt-14 mb-10"></div> <div ng-if="sectionKey == \'phonebook\' && (ldapResDisabled && (phonebookType == \'ldap\' || phonebookType == \'ldaps\')) && !loadingSections[sectionKey]" class="alert alert-warning alert-dismissable mb-10 mt-5"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Phonebook service is disabled on this system" | translate}}!</strong> {{"Saving will start the system service corresponding to the selected type of the phonebook" | translate}}. </div> <div ng-if="sectionKey == \'phonebook\'" class="full-width pl-20 pr-20 mb-20 mt-20"> <label class="control-label">{{"ldap_phonebook_type_label" | translate}}</label> <div class="form-group pl-20 pr-20"> <select id="phonebookType" class="selectpicker form-control" ng-model="phonebookType" ng-change="phonebookTypeChange()" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="ldap">{{"ldap_phonebook_type_ldap" | translate}}</option> <option value="ldaps">{{"ldap_phonebook_type_ldaps" | translate}}</option> <option value="externalldap" on-finish-render="selectpickerRepeatEnd"> {{"ldap_phonebook_type_custom" | translate}} </option> </select> </div> </div> <div ng-show="!loadingSections[sectionKey]" class="mt-25 no-border-bottom bs-cssgrid"> <div ng-repeat="item in section.data track by $index" class="col-bs-cssgrid mb-15"> <label class="control-label">{{::item.description | translate}}</label> <div class="{{item.type != \'password\' ? \'col-lg-12\' : \'\'}}"> \x3c!-- list --\x3e <div ng-if="item.type == \'list\'" class="form-group"> <select id="default-select-{{$index}}" class="{{item.options.length > 10 ? \'combobox\' : \'selectpicker\'}} form-control" ng-disabled="sectionKey == \'phonebook\' && (phonebookType == \'ldap\' || phonebookType == \'ldaps\')" ng-model="defaultSettings[item.variable]" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> \x3c!-- combobox --\x3e <option ng-selected="defaultSettings[item.variable] == option.value" ng-if="item.options.length > 10 && ($index < selectOptionsLimit || option.value == defaultSettings[item.variable])" ng-repeat="option in ::item.options track by $index" value="{{::option.value}}" render-index="{{$index}}" render-start="10" on-finish-render="comboboxRepeatEnd">{{::option.text | translate}}</option> \x3c!-- selectpicker --\x3e <option ng-selected="defaultSettings[item.variable] == option.value" ng-if="item.options.length <= 10" ng-repeat="option in ::item.options track by $index" value="{{::option.value}}" on-finish-render="selectpickerRepeatEnd">{{::option.text | translate}}</option> <option ng-disabled="true" ng-if="item.options.length > 10 && selectOptionsLimit < item.options.length" value="loading">{{"Loading" | translate}}...</option> </select> </div> \x3c!-- input --\x3e <div ng-if="item.type == \'input\'" class="form-group"> <input type="text" id="default-select-{{$index}}" ng-disabled="sectionKey == \'phonebook\' && (phonebookType == \'ldap\' || phonebookType == \'ldaps\')" autocomplete="off" placeholder="{{item.variable == \'ldap_server\' && defaultSettings[item.variable] == \'\' ? defaultSettings[\'hostname\'] : \'-\'}}" ng-model="defaultSettings[item.variable]" class="form-control">  </div> \x3c!-- password --\x3e <div ng-if="item.type == \'password\'" class="input-group display-flex"> <input id="{{sectionKey}}-input-{{$index}}" ng-model="defaultSettings[item.variable]" ng-disabled="sectionKey == \'phonebook\' && (phonebookType == \'ldap\' || phonebookType == \'ldaps\')" type="password" autocomplete="off" show-password="shownPasswords[item.variable]" class="form-control">  <button tabindex="-1" type="button" ng-disabled="sectionKey == \'phonebook\' && (phonebookType == \'ldap\' || phonebookType == \'ldaps\')" class="btn btn-default mln-1 zindex-2" ng-click="toggleShowPassword(item.variable)"> <span ng-class="shownPasswords[item.variable] ? \'fa fa-eye-slash\' : \'fa fa-eye\'"></span> </button> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div ng-if="loadingActions == true" class="spinner spinner-sm adjust-margin loader-modal fz-18"></div> <span ng-if="loadingActions == \'ok\'" class="pficon pficon-ok adjust-margin loader-modal fz-18"></span> <span ng-if="loadingActions == \'err\'" class="pficon pficon-error-circle-o adjust-margin loader-modal fz-18"></span> <div ng-if="!defaultsLoading" class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" ng-disabled="connectivityCheckRes.is_reachable === false" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </form> </div> </div> </div>'),e.put("views/templates/file-upload.html",'<div class="wizard-modal"> <div class="modal-dialog wizard-pf margin-10"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="dfSettingsMLabel">{{uploadVariable == "firmware_file" ? "Firmware management" : uploadVariable == "ringtone_file" ? "Ringtones management" : uploadVariable == "background_file" ? "Background management" : uploadVariable == "screensaver_file" ? "Screensaver management" : "" | translate}}</h4> </div> <form class="form-horizontal" ng-submit=""> <div ng-show="defaultsLoading" class="mb-30"> <div class="spinner"></div> </div> <div ng-show="!defaultsLoading" class="modal-body inline-display full-width"> <div class="col-lg-12"> <h2> {{uploadVariable == "firmware_file" ? "Upload a new firmware" : uploadVariable == "ringtone_file" ? "Upload a new ringtone" : uploadVariable == "background_file" ? "Upload a new background" : uploadVariable == "screensaver_file" ? "Upload a new screensaver" : "" | translate}} </h2> <div id="uploadErrorAlert" ng-if="uploadingError" class="alert alert-danger alert-dismissable mb-5 mt-20"> <button type="button" class="close" aria-label="Close" ng-click="hideAlertDanger()"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{"Error" | translate}}!</strong> {{uploadingErrorMsg ? uploadingErrorMsg : "Error loading file." | translate}} </div> <div id="uploadSuccessAlert" ng-if="uploadingSuccess" class="alert alert-success alert-dismissable mb-5 mt-20"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{"Success" | translate}}!</strong> {{"File correctly uploaded" | translate}}. </div> <div dropzone id="dragArea" class="dragArea {{evt.draghover ? \'dropping lh-61\' : \'\'}}"> <input class="hide" type="file" id="fileInput"> {{evt.draghover ? "Drop Files here" : "Drag your file here" | translate}} <br> {{evt.draghover ? "" : "or" | translate}} <a ng-click="fileSelection()">{{evt.draghover ? "" : "browse" | translate}}</a> {{evt.draghover ? "" : "to upload" | translate}} </div> <ul class="filesList"> <li class="fileUploading" ng-repeat="file in uploadingFiles track by $index"> <span class="ellipsis"> {{file.name}} </span> <span class="fw-300"> {{file.size}} </span> <span class="fw-600"> <div class="spinner spinner-sm"></div> </span> </li> \x3c!-- firmware list --\x3e <li ng-if="uploadVariable == \'firmware_file\'" class="fileUploaded" ng-repeat="firmware in uploads.firmware_file track by $index"> <span class="ellipsis"> {{firmware.name}} </span> <span class="fw-300"> {{firmware.size}} </span> <span class="fw-600"> <a ng-click="fileDelete(firmware.name)"> {{"Remove" | translate}} </a> </span> </li> \x3c!-- ringtones list --\x3e <li ng-if="uploadVariable == \'ringtone_file\'" class="fileUploaded" ng-repeat="ringtone in uploads.ringtone_file track by $index"> <span class="ellipsis"> {{ringtone.name}} </span> <span class="fw-300"> {{ringtone.size}} </span> <span class="fw-600"> <a ng-click="fileDelete(ringtone.name)"> {{"Remove" | translate}} </a> </span> </li> \x3c!-- backgrounds list --\x3e <li ng-if="uploadVariable == \'background_file\'" class="fileUploaded" ng-repeat="background in uploads.background_file track by $index"> <span class="ellipsis"> {{background.name}} </span> <span class="fw-300"> {{background.size}} </span> <span class="fw-600"> <a ng-click="fileDelete(background.name)"> {{"Remove" | translate}} </a> </span> </li> \x3c!-- backgrounds list --\x3e <li ng-if="uploadVariable == \'screensaver_file\'" class="fileUploaded" ng-repeat="screensaver in uploads.screensaver_file track by $index"> <span class="ellipsis"> {{screensaver.name}} </span> <span class="fw-300"> {{screensaver.size}} </span> <span class="fw-600"> <a ng-click="fileDelete(screensaver.name)"> {{"Remove" | translate}} </a> </span> </li> </ul> </div> <div ng-if="loadingActions == true" class="spinner spinner-sm adjust-margin loader-modal fz-18"></div> <span ng-if="loadingActions == \'ok\'" class="pficon pficon-ok adjust-margin loader-modal fz-18"></span> <span ng-if="loadingActions == \'err\'" class="pficon pficon-error-circle-o adjust-margin loader-modal fz-18"></span> <div ng-if="!defaultsLoading" class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Close\' | translate}}</button> </div> </div></form> </div> </div> </div>'),e.put("views/templates/models-ui.html",'<div ng-controller="ModelsUICtrl" class="panel-body profile-panel no-padding"> <div ng-show="!loadingModels[model.name] && !modelsInfoMsg" class="col-lg-12 mt-20"> <div class="alert alert-info alert-dismissable"> <button type="button" ng-click="hideModelsInfoMsg()" class="close" data-dismiss="alert" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-info"></span> <strong>{{"Modify the settings from the sections below" | translate}}</strong> </div> </div> <div class="col-lg-12 profile-list-container mb-0 no-border-bottom"> <div ng-show="loadingModels[model.name]" class="spinner mt-14"></div> <div ng-show="!loadingModels[model.name]"> <div ng-if="modelErrorsSingle.patchSingleVariables" class="alert alert-danger"> <span class="pficon pficon-error-circle-o"></span> <strong>{{"Error saving variables" | translate}}</strong>. </div> <div ng-if="loadingActionSingle == \'ok\'" class="alert alert-success"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Success" | translate}}!</strong> <p> {{"Variables correctly saved" | translate}}. </p> </div> \x3c!-- start reusable parte of the ui --\x3e <form id="currentModelForm"> \x3c!-- sections --\x3e <div ng-if="currentModel.ui.map[sectionkey] && currentModel.ui[sectionkey]" ng-repeat="(sectionkey, section) in ::currentModel.ui track by sectionkey"> \x3c!-- if it\'s a key section --\x3e <div class="mt-20" ng-if="isKeysSection(sectionkey)"> <h2 ng-click="openSection(sectionkey)" class="adjust-header adjust-profile-header pl-20 ng-binding pointer"> {{::section.name | translate}} <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> </h2> <div id="{{sectionkey}}" class="panel-collapse model-container adjust-profile-body" ng-if="currentModel.openedSection == sectionkey"> <div class="panel-body profile-panel no-pad"> <div class="col-lg-12 {{!isExpKeysSection(sectionkey) ? \'mt-20\' : \'\'}} no-border-bottom"> <div class="col-lg-12 no-lateral-padding {{isExpKeysSection(sectionkey) ? \'padding-lateral-null\' : \'\'}} {{item.type == \'loop\' ? \'mb-20\' : \'\'}}" ng-repeat="item in ::currentModel.ui[sectionkey].items track by $index"> <div ng-repeat="keys in item.data track by $index"> \x3c!-- if the item type is a loop --\x3e <div ng-if="item.type == \'loop\'"> \x3c!-- if exp keys --\x3e <div class="mt-30 mb-10" ng-if="isExpKeysSection(sectionkey)"> <div class="mt-20" ng-repeat="module in [] | range: item.keys.modules track by module"> <h2 ng-click="openExpKeys(\'expkeys-\' + (module + 1), sectionkey)" class="adjust-header adjust-profile-header pl-20 ng-binding pointer"> {{"expkeys_module" | translate}} <spam class="weight">{{module + 1}}</spam> <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> </h2> <div id="collapse-expkey-{{module}}" class="panel-collapse model-container adjust-profile-body" ng-if="currentModel.openedExpKeys == (\'expkeys-\' + (module + 1))"> <div class="panel-body profile-panel pb-30 no-pad"> <div class="col-lg-12 mt-20 mb-8 no-border-bottom"> <div ng-if="(4 * (!currentModel.ui[sectionkey].showingExpKeys ? 1 : currentModel.ui[sectionkey].showingExpKeys)) > $index" ng-repeat="keysIndex in ::item.keysIndexes track by $index"> <div class="no-lateral-padding col-lg-12"> <div class="loop-keys-index"> {{::item.description | translate}} {{keysIndex}} </div> <div class="col-lg-4" ng-repeat="key in ::keys" ng-if="!currentModel.ui.map[sectionkey].hidden_variables.includes(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex))"> <div class="form-group"> <label class="mt-10 control-label {{currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] != currentModel.storedVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] != currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? \'changed-color\' : \'not-changed-color\'}}"> {{::key.description | translate}} {{currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] != currentModel.storedVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] != currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? (\'(\' + (\'changed\' | translate) + \')\') : \'\'}} </label> \x3c!-- list --\x3e <div ng-if="key.type == \'list\'" class="hidden"> <select id="{{sectionkey}}-select-{{key.variable}}-{{keysIndex}}" title="-" ng-model="currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]" ng-change="onVariableChanged(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex))" class="{{key.options.length > 10 ? \'combobox\' : \'selectpicker\'}} form-control" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> \x3c!-- combobox --\x3e <option ng-selected="currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == option.value" ng-if="key.options.length > 10 && !currentModel.ui.map[sectionkey].hidden_types.includes(option.value)" ng-repeat="option in ::key.options" value="{{::option.value}}" render-index="{{key.options.length - currentModel.ui.map[sectionkey].hidden_types.length}}" on-finish-render="comboboxRepeatEnd">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && !currentModel.singleVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == option.value ? \' (\' + currentModel.display_name + \')\' : \'\'}}</option> \x3c!-- selectpicker --\x3e <option ng-selected="currentModel.variables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == option.value" ng-if="key.options.length <= 10 && !currentModel.ui.map[sectionkey].hidden_types.includes(option.value)" ng-repeat="option in ::key.options" value="{{::option.value}}" render-index="{{key.options.length - currentModel.ui.map[sectionkey].hidden_types.length}}" on-finish-render="selectpickerRepeatEnd">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && !currentModel.singleVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == option.value ? \' (\' + currentModel.display_name + \')\' : \'\'}}</option> </select> </div> \x3c!-- dynamicsearch --\x3e <div ng-if="(key.variable.includes(\'value\') && (currentModel.variables[\'expkey_type_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == \'blf\'))"> <input ng-model="currentModel.inputs[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]" ng-change="onVariableChanged(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex), key.type)" ng-focus="openSearchList(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex))" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && !currentModel.singleVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (default)\' : \'Search\' | translate}}" type="text" autocomplete="off" class="form-control dynamicsearch">  <div ng-if="shownDynamicList == (key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex))" class="dynamicsearch-list"> <div class="infotip bottom-right"> <div class="arrow"></div> <ul class="list-group dynamicsearch-list-group"> <li ng-repeat="user in filteredUsers=(users | customFilterMultiple:\'username,displayname,default_extension\':currentModel.inputs[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]) | limitTo: dynamicSearchLimit" class="list-group-item dynamicsearch-item" ng-click="applyDynamicSearch((key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)), user, true)"> <span class="dynamicsearch-label">{{user.displayname}} - {{user.default_extension}}</span> </li> <li class="list-group-item dynamicsearch-item" ng-if="isEmpty(filteredUsers)"> <span class="dynamicsearch-label cursive"> {{"No users found" | translate}} </span> </li> <li class="h-0"> <scrolling-sentinel event="dynamicSearchScroll"></scrolling-sentinel> </li> </ul> </div> </div> </div> \x3c!-- input --\x3e <input ng-if="key.type == \'input\' && !(key.variable.includes(\'value\') && (currentModel.variables[\'expkey_type_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == \'blf\'))" ng-model="currentModel.inputs[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]" ng-change="onVariableChanged(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex), key.type)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && !currentModel.singleVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (default)\' : \'\'}}" type="text" autocomplete="off" class="form-control">  \x3c!-- time --\x3e <input ng-if="key.type == \'time\' && !(key.variable.includes(\'value\') && (currentModel.variables[\'expkey_type_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == \'blf\'))" ng-model="currentModel.inputs[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]" ng-change="onVariableChanged(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex), key.type)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && !currentModel.singleVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (default)\' : \'HH:MM\'}}" type="text" autocomplete="off" class="form-control">  \x3c!-- password --\x3e <div ng-if="item.type == \'password\' && !(key.variable.includes(\'value\') && (currentModel.variables[\'expkey_type_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] == \'blf\'))" class="input-group"> <input ng-model="currentModel.inputs[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]" ng-change="onVariableChanged(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex), key.type)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] && !currentModel.singleVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.modelVariables[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? currentModel.globals[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] + \' (default)\' : \'\'}}" type="password" autocomplete="off" show-password="currentModel.shownPasswords[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)]" class="form-control display-flex">  <button tabindex="-1" type="button" class="btn btn-default mln-1 zindex-2" ng-click="toggleShowPassword(key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex))"> <span ng-class="currentModel.shownPasswords[key.variable + \'_\' + (module * currentModel.ui.map[sectionkey].module_keys_count + keysIndex)] ? \'fa fa-eye-slash\' : \'fa fa-eye\'"></span> </button> </div> </div> </div> </div> </div> <button ng-click="!currentModel.ui[sectionkey].showingExpKeys ? currentModel.ui[sectionkey].showingExpKeys = 2 :\n                                      currentModel.ui[sectionkey].showingExpKeys = currentModel.ui[sectionkey].showingExpKeys + 1" class="btn btn-default btn-lg mt-30 ml-20" ng-if="item.keysIndexes.length > (4 * (!currentModel.ui[sectionkey].showingExpKeys ? 1 :\n                                      currentModel.ui[sectionkey].showingExpKeys))"> {{"View more" | translate}} </button> </div> </div> </div> </div> </div> \x3c!-- if not exp keys --\x3e <div ng-if="!isExpKeysSection(sectionkey)"> \x3c!-- line keys info message into Models page --\x3e <div ng-if="sectionkey == \'lineKeys\' && !lineKeysModelsInfoMsgHide && isConfigurations == false" class="alert alert-info alert-dismissable mb-10 mt-5"> <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="hideLineKeysModelsInfoMsg()"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-info"></span> <strong>{{"Line keys settings can be overridden by the user from the CTI application, if permissions are granted in the Profile page" | translate}}.</strong> </div> \x3c!-- end info message --\x3e \x3c!-- info message into Configurations page --\x3e <div ng-if="isConfigurations == true && !lineKeysConfigurationsInfoMsgHide && sectionkey == \'lineKeys\'" class="alert alert-info alert-dismissable mb-10 mt-5"> <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="hideLineKeysConfigurationsInfoMsg()"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-info"></span> <strong>{{"Line keys settings can be modified by the user from the CTI application, if permissions are granted in the Profile page. Latest settings applied will take precedence" | translate}}.</strong> </div> \x3c!-- end info message --\x3e <div ng-if="(4 * (!currentModel.ui[sectionkey].showingKeys ? 1 :\n                            currentModel.ui[sectionkey].showingKeys)) > $index" ng-repeat="keysIndex in ::item.keysIndexes track by $index"> <div class="no-lateral-padding col-lg-12"> <div class="loop-keys-index"> {{::item.description | translate}} {{keysIndex}} </div> <div class="col-lg-4" ng-repeat="key in ::keys" ng-if="!currentModel.ui.map[sectionkey].hidden.includes(key.variable + \'_\' + keysIndex)"> <div class="form-group"> <label class="mt-10 control-label {{currentModel.variables[key.variable + \'_\' + keysIndex] != currentModel.storedVariables[key.variable + \'_\' + keysIndex] && currentModel.variables[key.variable + \'_\' + keysIndex] != currentModel.globals[key.variable + \'_\' + keysIndex] ? \'changed-color\' : \'not-changed-color\'}}"> {{::key.description | translate}} {{currentModel.variables[key.variable + \'_\' + keysIndex] != currentModel.storedVariables[key.variable + \'_\' + keysIndex] && currentModel.variables[key.variable + \'_\' + keysIndex] != currentModel.globals[key.variable + \'_\' + keysIndex] ? (\'(\' + (\'changed\' | translate) + \')\') : \'\'}} </label> \x3c!-- list --\x3e <div ng-if="key.type == \'list\'" class="hidden"> <select id="{{sectionkey}}-select-{{key.variable}}-{{keysIndex}}" title="-" class="{{key.options.length > 10 ? \'combobox\' : \'selectpicker\'}} form-control" ng-model="currentModel.variables[key.variable + \'_\' + keysIndex]" ng-change="onVariableChanged(key.variable + \'_\' + keysIndex)" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> \x3c!-- combobox --\x3e <option ng-selected="currentModel.variables[key.variable + \'_\' + keysIndex] == option.value" ng-if="key.options.length > 10 && !currentModel.ui.map[sectionkey].hidden_types.includes(option.value)" ng-repeat="option in ::key.options" value="{{::option.value}}" render-index="{{key.options.length - currentModel.ui.map[sectionkey].hidden_types.length}}" on-finish-render="comboboxRepeatEnd">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[key.variable + \'_\' + keysIndex] && !currentModel.singleVariables[key.variable + \'_\' + keysIndex] && currentModel.modelVariables[key.variable + \'_\' + keysIndex] == option.value ? \' (\' + currentModel.display_name + \')\' : \'\'}}</option> \x3c!-- selectpicker --\x3e <option ng-selected="currentModel.variables[key.variable + \'_\' + keysIndex] == option.value" ng-if="key.options.length <= 10 && !currentModel.ui.map[sectionkey].hidden_types.includes(option.value)" ng-repeat="option in ::key.options" value="{{::option.value}}" render-index="{{key.options.length - currentModel.ui.map[sectionkey].hidden_types.length}}" on-finish-render="selectpickerRepeatEnd">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[key.variable + \'_\' + keysIndex] && !currentModel.singleVariables[key.variable + \'_\' + keysIndex] && currentModel.modelVariables[key.variable + \'_\' + keysIndex] == option.value ? \' (\' + currentModel.display_name + \')\' : \'\'}}</option> </select> </div> \x3c!-- dynamicsearch --\x3e <div ng-if="(key.variable.includes(\'value\') && (currentModel.variables[\'linekey_type_\' + keysIndex] == \'blf\' || currentModel.variables[\'softkey_type_\' + keysIndex] == \'blf\'))"> <input ng-model="currentModel.inputs[key.variable + \'_\' + keysIndex]" ng-change="onVariableChanged(key.variable + \'_\' + keysIndex, key.type)" ng-focus="openSearchList(key.variable + \'_\' + keysIndex)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + keysIndex] && !currentModel.singleVariables[key.variable + \'_\' + keysIndex] ? currentModel.modelVariables[key.variable + \'_\' + keysIndex] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + keysIndex] ? currentModel.globals[key.variable + \'_\' + keysIndex] + \' (default)\' : \'Search\' | translate}}" type="text" autocomplete="off" class="form-control dynamicsearch">  <div ng-if="shownDynamicList == (key.variable + \'_\' + keysIndex)" class="dynamicsearch-list"> <div class="infotip bottom-right"> <div class="arrow"></div> <ul class="list-group dynamicsearch-list-group"> <li ng-repeat="user in filteredUsers=(users | customFilterMultiple:\'username,displayname,default_extension\':currentModel.inputs[key.variable + \'_\' + keysIndex]) | limitTo: dynamicSearchLimit" class="list-group-item dynamicsearch-item" ng-click="applyDynamicSearch((key.variable + \'_\' + keysIndex), user)"> <span class="dynamicsearch-label">{{user.displayname}} - {{user.default_extension}}</span> </li> <li class="list-group-item dynamicsearch-item" ng-if="isEmpty(filteredUsers)"> <span class="dynamicsearch-label cursive"> {{"No users found" | translate}} </span> </li> <li class="h-0"> <scrolling-sentinel event="dynamicSearchScroll"></scrolling-sentinel> </li> </ul> </div> </div> </div> \x3c!-- input --\x3e <input ng-if="key.type == \'input\' && !(key.variable.includes(\'value\') && (currentModel.variables[\'linekey_type_\' + keysIndex] == \'blf\' || currentModel.variables[\'softkey_type_\' + keysIndex] == \'blf\'))" ng-model="currentModel.inputs[key.variable + \'_\' + keysIndex]" ng-change="onVariableChanged(key.variable + \'_\' + keysIndex, key.type)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + keysIndex] && !currentModel.singleVariables[key.variable + \'_\' + keysIndex] ? currentModel.modelVariables[key.variable + \'_\' + keysIndex] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + keysIndex] ? currentModel.globals[key.variable + \'_\' + keysIndex] + \' (default)\' : \'-\'}}" type="text" autocomplete="off" class="form-control">  \x3c!-- time --\x3e <input ng-if="key.type == \'time\' && !(key.variable.includes(\'value\') && (currentModel.variables[\'linekey_type_\' + keysIndex] == \'blf\' || currentModel.variables[\'softkey_type_\' + keysIndex] == \'blf\'))" ng-model="currentModel.inputs[key.variable + \'_\' + keysIndex]" ng-change="onVariableChanged(key.variable + \'_\' + keysIndex, key.type)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + keysIndex] && !currentModel.singleVariables[key.variable + \'_\' + keysIndex] ? currentModel.modelVariables[key.variable + \'_\' + keysIndex] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + keysIndex] ? currentModel.globals[key.variable + \'_\' + keysIndex] + \' (default)\' : \'HH:MM\'}}" type="text" autocomplete="off" class="form-control">  \x3c!-- password --\x3e <div ng-if="item.type == \'password\' && !(key.variable.includes(\'value\') && (currentModel.variables[\'linekey_type_\' + keysIndex] == \'blf\' || currentModel.variables[\'softkey_type_\' + keysIndex] == \'blf\'))" class="input-group"> <input ng-model="currentModel.inputs[key.variable + \'_\' + keysIndex]" ng-change="onVariableChanged(key.variable + \'_\' + keysIndex, key.type)" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[key.variable + \'_\' + keysIndex] && !currentModel.singleVariables[key.variable + \'_\' + keysIndex] ? currentModel.modelVariables[key.variable + \'_\' + keysIndex] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[key.variable + \'_\' + keysIndex] ? currentModel.globals[key.variable + \'_\' + keysIndex] + \' (default)\' : \'-\'}}" type="password" autocomplete="off" show-password="currentModel.shownPasswords[key.variable + \'_\' + keysIndex]" class="form-control display-flex">  <button tabindex="-1" type="button" class="btn btn-default mln-1 zindex-2" ng-click="toggleShowPassword(key.variable + \'_\' + keysIndex)"> <span ng-class="currentModel.shownPasswords[key.variable + \'_\' + keysIndex] ? \'fa fa-eye-slash\' : \'fa fa-eye\'"></span> </button> </div> </div> </div> </div> </div> </div> </div> <button ng-click="!currentModel.ui[sectionkey].showingKeys ? currentModel.ui[sectionkey].showingKeys = 2 :\n                          currentModel.ui[sectionkey].showingKeys = currentModel.ui[sectionkey].showingKeys + 1" ng-if="item.type == \'loop\' && !isExpKeysSection(sectionkey) && item.keysIndexes.length >\n                          (4 * (!currentModel.ui[sectionkey].showingKeys ? 1 :\n                          currentModel.ui[sectionkey].showingKeys))" class="btn btn-default btn-lg mt-30 ml-20"> {{"View more" | translate}} </button> </div> </div> </div> </div> </div> </div> \x3c!-- if isn\'t a key section --\x3e <div class="mt-20" ng-if="!isKeysSection(sectionkey) && ($index > 0)"> <h2 ng-click="openSection(sectionkey)" class="adjust-header adjust-profile-header pl-20 ng-binding pointer"> {{::section.name | translate}} <span class="fa fa-angle-down icon-med-reload profile-open-icon"></span> </h2> <div id="collapse-section-{{$index}}" class="panel-collapse adjust-profile-body model-container" ng-if="currentModel.openedSection == sectionkey"> <div class="panel-body"> <div ng-show="currentModel.loadingSections[sectionkey]" class="spinner mt-14 mb-10"></div> <div ng-if="sectionkey == \'phonebook\'" class="full-width mb-30 mt-25 pr-20 pl-20"> <label class="control-label">{{"ldap_phonebook_type_label" | translate}}</label> <div class="form-group"> <select id="modelPhonebookType" class="selectpicker form-control" ng-model="modelPhonebookType" ng-change="modelPhonebookTypeChange()" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> <option value="ldap">{{"ldap_phonebook_type_ldap" | translate}}</option> <option value="ldaps">{{"ldap_phonebook_type_ldaps" | translate}}</option> <option value="externalldap" on-finish-render="selectpickerRepeatEnd"> {{"ldap_phonebook_type_custom" | translate}} </option> </select> </div> </div> <div ng-show="!currentModel.loadingSections[sectionkey]" class="mt-25 no-border-bottom bs-cssgrid"> \x3c!-- Variable input/select container --\x3e <div ng-if="!(currentModel.ui.map[sectionkey][item.variable].visible === false)" ng-repeat="item in ::currentModel.ui[sectionkey].items track by item.variable" class="col-bs-cssgrid mb-15"> <div class="form-group"> <label class="control-label {{currentModel.variables[item.variable] != currentModel.storedVariables[item.variable] && currentModel.variables[item.variable] != currentModel.globals[item.variable] ? \'changed-color\' : \'not-changed-color\'}}"> {{::item.description | translate}} {{currentModel.variables[item.variable] != currentModel.storedVariables[item.variable] && currentModel.variables[item.variable] != currentModel.globals[item.variable] ? (\'(\' + (\'changed\' | translate) + \')\') : \'\'}} </label> \x3c!-- selectpicker --\x3e <div ng-if="item.type == \'selectpicker\'" class="hidden"> <select id="{{sectionkey}}-{{item.variable}}" class="selectpicker form-control" title="-" ng-model="currentModel.variables[item.variable]" ng-change="onVariableChanged(item.variable, \'list\')" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> <option ng-selected="currentModel.variables[item.variable] == option.value" ng-repeat="option in ::item.options | blacklistFilterNoKey: currentModel.ui.map[sectionkey][item.variable].blacklist track by $index" value="{{::option.value}}" parentid="{{sectionkey}}-{{item.variable}}" on-finish-render-revised="selectpickerRepeatEndRevised">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] && currentModel.modelVariables[item.variable] == option.value ? \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] && !currentModel.storedVariables[item.variable] && currentModel.globals[item.variable] == option.value ? \' (default)\' : \'\'}}</option> </select> </div> \x3c!-- combobox --\x3e <div ng-if="item.type == \'combobox\'" class="hidden"> <select id="{{sectionkey}}-{{item.variable}}" class="combobox form-control" title="-" ng-model="currentModel.variables[item.variable]" ng-change="onVariableChanged(item.variable, \'list\')" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> <option ng-selected="currentModel.variables[item.variable] == option.value" ng-repeat="option in ::item.options | blacklistFilterNoKey: currentModel.ui.map[sectionkey][item.variable].blacklist track by $index" value="{{::option.value}}" parentid="{{sectionkey}}-{{item.variable}}" on-finish-render-revised="comboboxRepeatEndRevised">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] && currentModel.modelVariables[item.variable] == option.value ? \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] && !currentModel.storedVariables[item.variable] && currentModel.globals[item.variable] == option.value ? \' (default)\' : \'\'}}</option> </select> </div> \x3c!-- bigcombobox --\x3e <div ng-if="item.type == \'bigcombobox\'" class="hidden"> <select id="{{sectionkey}}-{{$index}}" class="combobox form-control" title="-" ng-model="currentModel.variables[item.variable]" ng-change="onVariableChanged(item.variable, \'list\')" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> <option ng-selected="currentModel.variables[item.variable] == option.value" ng-if="$index < selectOptionsLimit || option.value == currentModel.variables[item.variable]" ng-repeat="option in item.options track by $index" value="{{::option.value}}" render-index="{{$index}}" render-start="10" on-finish-render="comboboxRepeatEnd">{{::option.text | translate}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] && currentModel.modelVariables[item.variable] == option.value ? \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] && !currentModel.storedVariables[item.variable] && currentModel.globals[item.variable] == option.value ? \' (default)\' : \'\'}}</option> <option ng-disabled="true" ng-if="item.variable == \'timezone\' && selectOptionsLimit < item.options.length" value="loading">{{"Loading" | translate}}...</option> </select> </div> \x3c!-- dynamicselectpicker --\x3e <div ng-if="item.type == \'dynamicselectpicker\'" class="hidden"> <select id="{{sectionkey}}-{{item.variable}}" class="selectpicker form-control" title="-" ng-model="currentModel.variables[item.variable]" ng-change="onVariableChanged(item.variable, \'dynamicselectpicker\')" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" autocomplete="off"> <option value="" ng-disabled="true" ng-hide="true">-</option> <option value="null">-</option> \x3c!-- selectpicker --\x3e <option ng-selected="currentModel.variables[item.variable] == ($index + currentModel.ui.map[sectionkey][item.variable].startfrom)" ng-repeat="option in ::[] | range: toInt(currentModel.ui.map[sectionkey][item.variable].count) | blacklistFilterNoKeyDsp: currentModel.ui.map[sectionkey][item.variable].blacklist track by $index" parentid="{{sectionkey}}-{{item.variable}}" value="{{$index + currentModel.ui.map[sectionkey][item.variable].startfrom}}" on-finish-render-revised="selectpickerRepeatEndRevised"> {{($index + currentModel.ui.map[sectionkey][item.variable].startfrom) == -1 && (item.variable == "ringtone") ? "Custom" : ($index + currentModel.ui.map[sectionkey][item.variable].startfrom) == 0 && item.variable == "ringtone" ? "Silent" : ($index + currentModel.ui.map[sectionkey][item.variable].startfrom) | translate}} {{currentModel.uiLocation == "configurations" && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] && currentModel.modelVariables[item.variable] == ($index + currentModel.ui.map[sectionkey][item.variable].startfrom) ? \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] && !currentModel.storedVariables[item.variable] && currentModel.globals[item.variable] == ($index + currentModel.ui.map[sectionkey][item.variable].startfrom) ? \' (default)\' : \'\'}}</option> </select> </div> \x3c!-- upload --\x3e <div ng-if="item.type == \'upload\'" class="input-group display-flex rm-first-option hidden"> <select id="{{sectionkey}}-{{item.variable}}" class="selectpicker {{item.variable}}-select" title="-" ng-model="currentModel.variables[item.variable]" ng-change="onVariableChanged(item.variable, item.type)" ng-disabled="item.variable == \'ringtone_file\' && !(toInt(currentModel.variables[\'ringtone\']) === -1)" autocomplete="off"> <option ng-if="!isEmpty(uploads[item.variable])" value="null">-</option> <option value="" ng-if="isEmpty(uploads[item.variable])" ng-disabled="true" parentid="{{sectionkey}}-{{item.variable}}" forcerendering="true" on-finish-render-revised="selectpickerRepeatEndRevised">{{"No files found" | translate}}</option> <option ng-selected="currentModel.variables[item.variable] == option.name" ng-repeat="option in uploads[item.variable] track by $index" value="{{option.name}}" parentid="{{sectionkey}}-{{item.variable}}" on-finish-render-revised="selectpickerRepeatEndRevised">{{option.name}}{{currentModel.uiLocation == "configurations" && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] && currentModel.modelVariables[item.variable] == option.name ? \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] && !currentModel.storedVariables[item.variable] && currentModel.globals[item.variable] == option.name ? \' (default)\' : \'\'}}</option> </select> <button tabindex="-1" type="button" class="btn btn-default mln-1 zindex-2" ng-disabled="item.variable == \'ringtone_file\' && !(toInt(currentModel.variables[\'ringtone\']) === -1)" ng-click="openFileUpload(item.variable)"> <span class="fa fa-upload"></span> </button> </div> \x3c!-- input --\x3e <input ng-if="item.type == \'input\'" id="{{sectionkey}}-input-{{$index}}" ng-model="currentModel.inputs[item.variable]" ng-change="onVariableChanged(item.variable, item.type)" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] ? currentModel.modelVariables[item.variable] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] ? currentModel.globals[item.variable] + \' (default)\' : item.variable == \'ldap_server\' && currentModel.globals[item.variable] == \'\' ? currentModel.globals[\'hostname\'] : \'-\'}}" type="text" autocomplete="off" class="form-control">  \x3c!-- time --\x3e <input ng-if="item.type == \'time\'" id="{{sectionkey}}-input-{{$index}}" ng-model="currentModel.inputs[item.variable]" ng-change="onVariableChanged(item.variable, item.type)" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] ? currentModel.modelVariables[item.variable] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] ? currentModel.globals[item.variable] + \' (default)\' : \'HH:MM\'}}" type="text" autocomplete="off" class="form-control">  \x3c!-- password --\x3e <div ng-if="item.type == \'password\'" class="input-group display-flex"> <input id="{{sectionkey}}-input-{{$index}}" ng-model="currentModel.inputs[item.variable]" ng-change="onVariableChanged(item.variable, item.type)" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" placeholder="{{currentModel.uiLocation == \'configurations\' && currentModel.modelVariables[item.variable] && !currentModel.singleVariables[item.variable] ? currentModel.modelVariables[item.variable] + \' (\' + currentModel.display_name + \')\' : currentModel.globals[item.variable] ? currentModel.globals[item.variable] + \' (default)\' : \'-\'}}" type="password" autocomplete="off" show-password="currentModel.shownPasswords[item.variable]" class="form-control">  <button tabindex="-1" type="button" ng-disabled="sectionkey == \'phonebook\' && (modelPhonebookType == \'ldap\' || modelPhonebookType == \'ldaps\')" class="btn btn-default mln-1 zindex-2" ng-click="toggleShowPassword(item.variable)"> <span ng-class="currentModel.shownPasswords[item.variable] ? \'fa fa-eye-slash\' : \'fa fa-eye\'"></span> </button> </div> </div> </div> </div> </div> </div> </div> </div> </form> </div> </div> <button ng-show="!loadingModels[model.name]" ng-click="currentModel.uiLocation == \'configurations\' ? saveCurrentModelSingle() : showModal(\'saveChangesConfirm\')" class="btn btn-primary btn-lg profile-button-save mb-10 mt-30" type="submit"> {{\'Save\' | translate}} </button> <div ng-show="!loadingModels[model.name] && !isConfigurations" class="dropdown profile-button-save mb-10 mt-30"> <button class="btn btn-default btn-lg dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"> {{\'Actions\' | translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"> <li role="presentation"> <a class="{{!currentModel.changed ? \'disabled\' : \'\'}}" ng-click="currentModel.changed ? openActionModal(\'cancel\') : \'\'" role="menuitem"> {{"Reset to saved settings" | translate}} </a> </li> <li ng-if="currentModel.hasOriginals" role="presentation"> <a ng-click="openActionModal(\'reset\')"> {{"Reset to original settings" | translate}} </a> </li> <li ng-if="!currentModel.hasOriginals" role="presentation" class="red-colored"> <a ng-click="openActionModal(\'delete\')" role="menuitem"> {{"Delete" | translate}} </a> </li> </ul> </div> \x3c!-- save modal --\x3e <div class="modal fade" id="saveChangesConfirm" tabindex="-1" role="dialog" aria-labelledby="saveChangesConfirm" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="nModelMLabel">{{"Save changes" | translate}}</h4> </div> <form class="form-horizontal mt-10" ng-submit="saveCurrentModel()"> <div class="modal-body"> <div ng-if="modelErrors.updateReadOnlyAttribute" class="alert alert-danger"> <span class="pficon pficon-error-circle-o"></span> <strong>{{modelErrors.updateReadOnlyAttribute | translate}}</strong>. </div> <div ng-if="loadingAction == \'ok\'" class="alert alert-success"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Success" | translate}}!</strong> <p> {{"Model saved" | translate}}. </p> </div> <div ng-if="loadingAction != \'ok\'" class="alert alert-warning"> <span class="pficon pficon-warning-triangle-o"></span> <strong> {{"Changes to model" | translate}} {{currentModel.display_name}} {{"will be saved" | translate}}. </strong> <p> {{"Are you sure" | translate}}? </p> </div> </div> <div ng-if="loadingAction == true" class="spinner spinner-sm adjust-margin loader-modal fz-18"></div> <span ng-if="loadingAction == \'ok\'" class="pficon pficon-ok adjust-margin loader-modal fz-18"></span> <span ng-if="loadingAction == \'err\'" class="pficon pficon-error-circle-o adjust-margin loader-modal fz-18"></span> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" class="btn btn-primary" ng-disabled="loadingAction == true || loadingAction == \'ok\'"> {{\'Save\' | translate}} </button> </div> </form> </div> </div> </div> \x3c!-- actions modal cancel, restore, delete --\x3e <div class="modal fade" id="actionsModal" tabindex="-1" role="dialog" aria-labelledby="actionsModal" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 ng-if="selectedAction == \'cancel\'" class="modal-title" id="nModelMLabel"> {{"Cancel changes" | translate}} </h4> <h4 ng-if="selectedAction == \'reset\'" class="modal-title" id="nModelMLabel"> {{"Reset settings" | translate}} </h4> <h4 ng-if="selectedAction == \'delete\'" class="modal-title" id="nModelMLabel"> {{"Delete changes" | translate}} </h4> </div> <form class="form-horizontal mt-10" ng-submit="selectedAction == \'cancel\' ? cancelChanges() :\n          selectedAction == \'reset\' ? resetChanges() :\n          selectedAction == \'delete\' ? deleteModel() : \'\'"> <div class="modal-body"> <div ng-if="(modelErrors.updateReadOnlyAttribute || modelErrors.resetChangesNotFound || modelErrors.deleteChangesNotFound)" class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> <strong>{{modelErrors.updateReadOnlyAttribute || modelErrors.resetChangesNotFound || modelErrors.deleteChangesNotFound | translate}}</strong>. </div> <div ng-if="loadingAction == \'ok\'" class="alert alert-success"> <span class="pficon pficon-warning-triangle-o"></span> <strong>{{"Success" | translate}}!</strong> <p ng-if="selectedAction == \'cancel\'"> {{"Changes have been canceled" | translate}}. </p> <p ng-if="selectedAction == \'reset\'"> {{"Changes have been reset to the original values" | translate}}. </p> <p ng-if="selectedAction == \'delete\'"> {{"The model has been deleted" | translate}}. </p> </div> <div ng-if="loadingAction != \'ok\'" class="alert alert-warning alert-dismissable"> <span class="pficon pficon-warning-triangle-o"></span> <strong ng-if="selectedAction == \'cancel\'"> {{"Changes to the model" | translate}} {{currentModel.display_name}} {{"will be canceled" | translate}}. </strong> <strong ng-if="selectedAction == \'reset\'"> {{"Setting of the model" | translate}} {{currentModel.display_name}} {{"will be reset to the original values" | translate}}. </strong> <strong ng-if="selectedAction == \'delete\'"> {{"The model" | translate}} {{currentModel.display_name}} {{"will be deleted" | translate}}. </strong> <p> {{"Are you sure" | translate}}? </p> </div> </div> <div ng-if="loadingAction == true" class="spinner spinner-sm adjust-margin loader-modal fz-18"></div> <span ng-if="loadingAction == \'ok\'" class="pficon pficon-ok adjust-margin loader-modal fz-18"></span> <span ng-if="loadingAction == \'err\'" class="pficon pficon-error-circle-o adjust-margin loader-modal fz-18"></span> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{\'Cancel\' | translate}}</button> <button type="submit" ng-disabled="loadingAction == true || loadingAction == \'ok\'" class="btn btn-primary">{{\'Continue\' | translate}}</button> </div> </form> </div> </div> </div> </div>'),e.put("views/trunks.html","<p>This is the trunks view.</p>"),e.put("views/trunks/physical.html",'<div class="wizard-pf"> <div ng-if="wizard.isWizard" class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'physical\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'trunks/physical\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Physical\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'voip\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'trunks/voip\')"><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Voip\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Physical lines configuration\' | translate}}</h1> <div ng-if="!(networks | isEmpty)" class="container-fluid"> <div class="col-xs-12 col-sm-6 col-md-{{12/networkLength}} col-lg-{{12/networkLength}} physical-margin-top" ng-repeat="(key, network) in networks"> <div class="card-pf card-pf-view adjust-card"> <div class="card-pf-body"> <div class="card-pf-top-element"> <span class="pficon pficon-network card-pf-icon-circle"></span> </div> <h2 class="card-pf-title text-center"> {{key}} | <span class="weight">{{network.network}}</span> </h2> <div class="card-pf-items text-center"> <div class="card-pf-item"> <span class="pficon pficon-screen"></span> <span class="card-pf-item-text"><b>{{network.ip}}</b> / </span> <span class="inline-display" popover-placement="top" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{\'Netmask\' | translate}}: {{network.netmask}}"><input ng-model="network.netmask" type="text" class="form-control config-form"></span> </div> </div> <p class="card-pf-info text-center"> <div class="blank-slate-pf-main-action centered adjust-bottom"> <button ng-click="startScan(key, network)" class="btn btn-primary btn-lg {{tasks[key].currentProgress > 0 && tasks[key].currentProgress < 100 ? \'disabled\' : \'\'}}">{{\'Scan\' | translate}}</button> <button ng-disabled="selectedDevice.onSave" ng-click="setNewGateway(key, networks[key])" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#newGwDialog">{{\'Add gateway\' | translate}}</button> <div ng-if="tasks[key].currentProgress < 100 && tasks[key].currentProgress != -1" class="spinner spinner-sm spinner-inline spinner-right absolute-icon-right"></div> <div ng-if="tasks[key].currentProgress == 100 || tasks[key].currentProgress == -1" class="pficon pficon-{{tasks[key].currentProgress == 100 ? \'ok\' : \'error-circle-o\'}} icon-right absolute-icon-right"></div> </div> <div ng-if="tasks[key].startScan" class="progress"> <div class="progress-bar {{tasks[key].currentProgress == -1 ? \'progress-bar-danger\' : \'progress-bar-success\'}}" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{tasks[key].currentProgress == -1 ? \'100\' : tasks[key].currentProgress}}%"> <span>{{tasks[key].currentProgress == -1 ? \'100\' : tasks[key].currentProgress}}%</span> </div> </div> </p> </div> </div> </div> </div> <div ng-if="!(allDevices | isEmpty: true)" class="container-fluid scanned-lists col-lg-6 col-md-12 col-sm-12 col-xs-12"> <div id="#{{networkName}}" class="list-group list-view-pf list-view-pf-view list-gateway" ng-repeat="(networkName, devices) in allDevices" ng-if="!(devices | isEmpty)"> <div> <div class="row"> <h1 class="col-lg-6 col-md-6 col-sm-12 col-xs-12 adjust-header"> <span class="pficon pficon-network card-pf-icon-circle config-title-icon"></span>{{networkName}} <span class="weight weight-gateway">{{networks[networkName].network}}</span> </h1> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 adjust-search adjust-search-gateway"> <form role="form" class="search-pf has-button" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchDeviceString" type="text" class="form-control input-lg" placeholder="{{\'Search\' | translate}}..."> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> </div> </div> </div> <div class="resizeFisical" when-scrolled="scrollingFisicalContainer(networkName)"> <div class="list-group-item {{selectedDevice.mac == device.mac ? \'selected\' : \'\'}}" ng-repeat="device in devices | filter:searchDeviceString | orderBy: \'manufacturer\' | limitTo: fisicalLimit[networkName]" ng-click="selectDevice(device, networks[networkName], networkName)"> <div class="list-view-pf-actions"> <div ng-show="device.isInAction" class="spinner spinner-sm adjust-margin"></div> <span ng-show="!device.isInAction" popover-placement="top-right" popover-trigger="\'mouseenter\'" popover-animation="true" uib-popover="{{device.isConfigured && device.isConnected ? \'Configured and Connected\' : device.isConfigured && !device.isConnected ? \'Configured and Not Connected\' : \'Not configured\' | translate}}" class="pficon {{device.isConfigured && device.isConnected ? \'pficon-ok\' : device.isConfigured && !device.isConnected ? \'pficon-warning-triangle-o\' : \'pficon-info\'}} icon-med"> </span> <div ng-if="device.isConfigured" class="dropdown dropdown-kebab-pf right-only"> <button class="btn btn-link dropdown-toggle" type="button" id="dropdownKebab" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="fa fa-ellipsis-v"></span> </button> <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownKebab"> <li><a ng-click="downConfig(device)">{{\'Download configuration\' | translate}}</a></li> <li ng-if="selectedDevice.isConfigured && selectedDevice.isConnected"><a data-toggle="modal" data-target="#confirmPushModal">{{\'Push configuration on device\' | translate}}</a></li> <li role="separator" class="divider"></li> <li ng-if="selectedDevice.isConfigured"><a data-toggle="modal" data-target="#confirmDeleteModal">{{\'Delete configuration\' | translate}}</a></li> </ul> </div> </div> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="pficon pficon-container-node list-view-pf-icon-sm {{device.isConfigured ? \'\' : \'disabled\'}}"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading {{device.isConfigured ? \'\' : \'disabled\'}}"> {{device.manufacturer}} </div> <div class="list-group-item-text {{device.isConfigured ? \'\' : \'disabled\'}}"> {{getModelDescription(device).description}} </div> </div> <div class="list-view-pf-additional-info config-info {{device.isConfigured ? \'\' : \'disabled\'}}"> <div>IP: <b>{{device.ipv4 || device.ipv4_new}}</b></div> <div>MAC: <b>{{device.mac}}</b></div> </div> </div> </div> </div> </div> <div class="config-button-list"> </div> </div> </div> <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 config-adjust-size-gateway" ng-if="!(selectedDevice | isEmpty)"> <div ng-if="selectedDevice.onSaveSuccess" class="alert alert-success alert-dismissable adjust-alert-gateway"> <button ng-click="close(selectedDevice)" type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Configuration saved\' | translate}}.</strong> {{\'Click\' | translate}} <b>{{\'Push\' | translate}}</b> {{\'to load configuration on device\' | translate}}. </div> <div ng-if="selectedDevice.onError" class="alert alert-danger alert-dismissable adjust-alert-gateway"> <button ng-click="close(selectedDevice)" type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Configuration error\' | translate}}.</strong> {{\'Generic error on configuration\' | translate}}. </div> <div ng-if="selectedDevice.onDeleteSuccess" class="alert alert-success alert-dismissable adjust-alert-gateway"> <button ng-click="close(selectedDevice)" type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Configuration deleted\' | translate}}.</strong> {{\'Configuration deleted with success\' | translate}}. </div> <div ng-if="selectedDevice.onPushSuccess" class="alert alert-success alert-dismissable adjust-alert-gateway"> <button ng-click="close(selectedDevice)" type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-ok"></span> <strong>{{\'Configuration pushed\' | translate}}.</strong> {{\'Configuration pushed with success\' | translate}}. </div> <h1 class="control-label config-title-user" for="textInput-markup"> <span class="pficon pficon-container-node config-title-icon-adjust"></span> {{selectedDevice.manufacturer}} </h1> <form class="form-horizontal config-form-gateway" ng-submit="saveConfig(selectedDevice)"> \x3c!-- <div class="form-group">\n          <label class="col-sm-3 control-label">{{\'Configuration name\' | translate}}</label>\n          <div class="col-sm-9">\n            <input type="text" ng-model="selectedDevice.name" class="form-control" placeholder="{{selectedDevice.manufacturer}}-{{\'Model\'|translate}}" required disabled>\n          </div>\n        </div> --\x3e <div class="form-group"> <label class="col-sm-3 control-label">{{\'Model\' | translate}}</label> <div class="col-sm-9"> <select ng-disabled="selectedDevice.isConfigured" required pf-select="{ width: \'260px\', noneSelectedText: \'-\' }" ng-model="selectedDevice.model" ng-change="updateExtraFields(selectedDevice)" ng-options="m.id as m.description + \' | \' + m.model for m in allModels[selectedDevice.manufacturer]"> <option value="">-</option> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Device IP\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="selectedDevice.ipv4_new" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$" ng-disabled="selectedDevice.isConfigured"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'MAC address\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="selectedDevice.mac" class="form-control" disabled> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Network mask\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="selectedDevice.netmask_green" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$" ng-disabled="selectedDevice.isConfigured"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Network gateway\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="selectedDevice.gateway" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$" ng-disabled="selectedDevice.isConfigured"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'PBX IP\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="selectedDevice.ipv4_green" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$" ng-disabled="selectedDevice.isConfigured"> </div> </div> <div class="form-group" ng-repeat="trunk in selectedDevice.trunks_isdn"> <label class="col-sm-3 control-label">{{\'Port\' | translate}} ISDN {{trunk.name}}</label> <div class="col-sm-9"> <select ng-disabled="selectedDevice.isConfigured" pf-select ng-model="trunk.type"> <option value="pmp">{{\'Point-MultiPoint\' | translate}}</option> <option value="pp">{{\'Point-Point\' | translate}}</option> </select> </div> </div> <div class="form-group" ng-repeat="trunk in selectedDevice.trunks_fxo"> <label class="col-sm-3 control-label">{{\'Port\' | translate}} FXO {{trunk.name}}</label> <div class="col-sm-4"> <input ng-disabled="selectedDevice.isConfigured" type="text" ng-model="trunk.number" placeholder="{{\'Number\'|translate}}" class="form-control"> </div> </div> <div class="form-group" ng-repeat="trunk in selectedDevice.trunks_pri"> </div> <div class="form-group" ng-repeat="exten in selectedDevice.trunks_fxs"> <label class="col-sm-3 control-label">{{\'Port\' | translate}} FXS {{exten.name}}</label> <div class="col-sm-4"> <select ng-disabled="selectedDevice.isConfigured" pf-select="{ noneSelectedText: \'-\' }" ng-model="exten.linked_extension" ng-options="user.default_extension as user.displayname for user in users"> </select> </div> </div> <div class="form-group"> <div class="col-sm-12"> <div ng-show="selectedDevice.onSave" class="spinner spinner-sm adjust-margin loader-modal-gateway-not-form"></div> <button data-toggle="modal" data-target="#confirmDeleteModal" ng-show="selectedDevice.isConfigured" type="button" ng-disabled="selectedDevice.onSave" class="btn btn-danger col-md-1 right-align">{{\'Delete\' | translate}}</button> <button data-toggle="modal" data-target="#confirmPushModal" ng-show="selectedDevice.isConfigured && selectedDevice.isConnected" type="button" ng-disabled="selectedDevice.onSave" class="btn btn-warning col-md-1 left-align">{{\'Push\' | translate}}</button> <button ng-show="!selectedDevice.isConfigured" ng-disabled="selectedDevice.onSave" type="submit" class="btn btn-primary col-md-1 right-align">{{\'Save\' | translate}}</button> </div> </div> </form> </div> <div ng-if="networks | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-network"></span> </div> <h1> {{\'No networks found\' | translate}} </h1> <p> {{\'There are problems to get networks configurations\' | translate}} </p> </div> <div ng-if="!(networks | isEmpty) && (allDevices | isEmpty: true) && scanned == true" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-container-node"></span> </div> <h1> {{ \'No devices found\' | translate }} </h1> <p> {{\'Check if the devices are connected in your network\' | translate}} </p> </div> </div> <div class="modal fade" id="newGwDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title">{{\'New Gateway\' | translate}}</h4> </div> <div ng-if="newGateway.onSaveError" class="alert alert-danger alert-dismissable adjust-alert"> <button ng-click="close(newGateway)" type="button" class="close" data-dismiss="alert" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'Configuration error\' | translate}}.</strong> {{\'Generic error in configuration\' | translate}}. </div> <form class="form-horizontal" ng-submit="saveConfig(newGateway, true)"> <div class="modal-body"> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Vendor\' | translate}}</label> <div class="col-sm-9"> <select pf-select="{ width: \'260px\', noneSelectedText: \'-\' }" ng-model="newGateway.manufacturer" ng-change="updateExtraFields(newGateway)" ng-options="v as v for v in allVendors" required> <option value="">-</option> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Model\' | translate}}</label> <div class="col-sm-9"> <select pf-select="{ width: \'260px\', noneSelectedText: \'-\' }" ng-model="newGateway.model" ng-change="updateExtraFields(newGateway)" ng-options="m.id as m.description + \' | \' + m.model for m in allModels[newGateway.manufacturer]" required> <option value="">-</option> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Device IP\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="newGateway.ipv4_new" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'MAC address\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="newGateway.mac" placeholder="00:11:22:AA:BB:CC" class="form-control" required pattern="([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Network mask\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="newGateway.netmask_green" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Network gateway\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="newGateway.gateway" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'PBX IP\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="newGateway.ipv4_green" class="form-control" required pattern="((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$"> </div> </div> <div class="form-group" ng-repeat="trunk in newGateway.trunks_isdn"> <label class="col-sm-3 control-label">{{\'Port\' | translate}} ISDN {{trunk.name}}</label> <div class="col-sm-9"> <select pf-select ng-model="trunk.type"> <option value="pmp">{{\'Point-MultiPoint\' | translate}}</option> <option value="pp">{{\'Point-Point\' | translate}}</option> </select> </div> </div> <div class="form-group" ng-repeat="trunk in newGateway.trunks_fxo"> <label class="col-sm-3 control-label">{{\'Port\' | translate}} FXO {{trunk.name}}</label> <div class="col-sm-4"> <input type="text" ng-model="trunk.number" placeholder="{{\'Number\'|translate}}" class="form-control"> </div> </div> <div class="form-group" ng-repeat="trunk in newGateway.trunks_pri"> </div> <div class="form-group" ng-repeat="exten in newGateway.trunks_fxs"> <label class="col-sm-3 control-label">{{\'Port\' | translate}} FXS {{exten.name}}</label> <div class="col-sm-4"> <select pf-select="{ noneSelectedText: \'-\' }" ng-model="exten.linked_extension" ng-options="user.default_extension as user.displayname for user in users"> </select> </div> </div> <div ng-show="newGateway.onSave" class="spinner spinner-sm adjust-margin loader-modal-gateway"></div> <div class="modal-footer config-gateway-footer"> <button ng-click="hideGatewayDialog()" type="button" class="btn btn-default" data-dismiss="modal">{{\'Close\' | translate}}</button> <button ng-disabled="newGateway.onSave" type="submit" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </div></form> </div> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step>  <div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Delete configuration" | translate}} {{selectedDevice.name}} </h4> </div> <div class="modal-body"> <div class="form-group medium-font"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteConfig(selectedDevice)"> {{ "Delete" | translate }} </button> </div> </div> </div> </div> <div class="modal fade" id="confirmPushModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Push configuration" | translate}} {{\'on\' | translate}} {{selectedDevice.name}} </h4> </div> <div class="modal-body"> <div class="form-group medium-font"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit"> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-warning" data-dismiss="modal" ng-click="pushConfig(selectedDevice)"> {{ "Push" | translate }} </button> </div> </div> </div> </div> <a id="dlLink" class="hidden"></a>'),e.put("views/trunks/voip.html",'<div class="wizard-pf"> <div class="wizard-pf-body clearfix"> <div ng-if="wizard.isWizard" class="wizard-pf-steps"> <ul class="wizard-pf-steps-indicator"> <li class="wizard-pf-step {{resolveActiveTab(\'physical\',2) ? \'active\' : \'\'}}" data-tabgroup="1"> <a ng-click="goTo(\'trunks/physical\')"><span class="wizard-pf-step-number">1</span><span class="wizard-pf-step-title">{{\'Physical\' | translate}}</span></a> </li> <li class="wizard-pf-step {{resolveActiveTab(\'voip\',2) ? \'active\' : \'\'}}" data-tabgroup="2"> <a ng-click="goTo(\'trunks/voip\')"><span class="wizard-pf-step-number">2</span><span class="wizard-pf-step-title">{{\'Voip\' | translate}}</span></a> </li> </ul> </div> </div> <div class="wizard-pf-contents adjust-size"> <h1 class="control-label centered" for="textInput-markup">{{\'Provider settings\' | translate}}</h1> \x3c!-- left col --\x3e <div ng-if="!(voipTrunks | isEmpty)" class="container-fluid col-xs-12 col-sm-12 col-md-6 col-lg-6 adjust-voip mb-10"> <button data-toggle="modal" data-target="#newGwDialog" class="btn btn-primary btn-lg no-margin"> {{"Configure new provider" | translate}} </button> <form role="form" class="search-pf has-button adjust-form mt-10 mb-10" id="form-lg-domains-details"> <div class="form-group has-clear"> <div class="search-pf-input-group" id="filter-domains-details"> <input ng-model="searchTrunk" type="text" class="form-control input-lg" placeholder="{{\'Search\' | translate}}"> </div> </div> <div class="form-group"> <button class="btn btn-default btn-lg" type="submit"> <span class="fa fa-search"></span> </button> </div> </form> <div class="leftcol-vh enhanced-scroll resizeFisical" when-scrolled="voipContainer()"> <div class="list-group-item cursor-pointer no-padding-top no-padding-bottom" ng-class="selectedTrunk.trunkid == trunk.trunkid ? \'selected\' : \'\'" ng-repeat="trunk in voipTrunks | filter:searchTrunk | limitTo: voipLimit" ng-click="selectTrunk(trunk)"> <div class="list-view-pf-main-info"> <div class="list-view-pf-left"> <span class="pficon pficon-service list-view-pf-icon-sm"></span> </div> <div class="list-view-pf-body"> <div class="list-view-pf-description"> <div class="list-group-item-heading"> {{trunk.name || "-"}} </div> <div class="list-group-item-text"> </div> </div> <div class="list-view-pf-additional-info config-info"> <div ng-if="trunk.provider && trunk.provider != \'Array\'">{{"Provider" | translate}}: <b>{{trunk.provider}}</b></div> <div ng-if="trunk.outcid">{{"Phone number" | translate}}: <b>{{trunk.outcid}}</b></div> </div> </div> </div> </div> </div> </div> \x3c!-- right col --\x3e <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 config-adjust-size-gateway" ng-if="!(selectedTrunk | isEmpty)"> <h1 class="control-label config-title-user mt-104" for="textInput-markup"> <span class="pficon pficon-service config-title-icon-adjust"></span> {{selectedTrunk.name || "-"}} </h1> <form class="form-horizontal" ng-submit=""> <div class="modal-body"> <div ng-if="newCreated && false" class="alert alert-info"> <span class="pficon pficon-info"></span> <strong>{{"Trunk status information will be available shortly" | translate}}.</strong> </div> \x3c!-- start form fields --\x3e <div ng-if="selectedTrunk.provider && selectedTrunk.provider != \'Array\'" class="form-group"> <label class="col-sm-3 control-label">{{\'Provider\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3">{{providerDesc(selectedTrunk.provider) || "-"}}</label> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Username\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3">{{selectedTrunk.username || "-"}}</label> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Phone number\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3">{{selectedTrunk.outcid || "-"}}</label> </div> </div> <div class="form-group" ng-if="trunksInfo[selectedTrunk.name].ip"> <label class="col-sm-3 control-label">{{\'Provider IP\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3">{{trunksInfo[selectedTrunk.name].ip || "-"}}</label> </div> </div> <div class="form-group" ng-if="trunksInfo[selectedTrunk.name].port"> <label class="col-sm-3 control-label">{{\'Port\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3">{{trunksInfo[selectedTrunk.name].port || "-"}}</label> </div> </div> <div class="form-group" ng-if="trunksInfo[selectedTrunk.name].status"> <label class="col-sm-3 control-label">{{\'Provider status\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3 {{trunksInfo[selectedTrunk.name].status === \'online\' ? \'text-online-green\' : \'\'}}">{{trunksInfo[selectedTrunk.name].status || "-"}}</label> </div> </div> <div class="form-group" ng-if="trunksInfo[selectedTrunk.name].registration"> <label class="col-sm-3 control-label">{{\'Registration\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3 {{trunksInfo[selectedTrunk.name].registration === \'registered\' ? \'text-online-green\' : \'text-red\'}}">{{trunksInfo[selectedTrunk.name].registration || "-" | translate}}</label> </div> </div> <div class="form-group" ng-if="trunksInfo[selectedTrunk.name].codecs"> <label class="col-sm-3 control-label">{{\'Codec\' | translate}}:</label> <div class="col-sm-9"> <label class="mt-3">{{arrayJoin(trunksInfo[selectedTrunk.name].codecs) || "-"}}</label> </div> </div> </div> <div class="modal-footer mt-0"> <button class="btn btn-default" data-toggle="modal" data-target="#changePWDModal" ng-click="clickedEdit()"> {{"Edit" | translate}} </button> <button class="btn btn-danger" data-toggle="modal" data-target="#confirmDeleteModal"> {{"Delete" | translate}} </button> </div> </form> </div> \x3c!-- no providers found --\x3e <div ng-if="voipTrunks | isEmpty" class="blank-slate-pf"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-service"></span> </div> <h1> {{\'No configured providers\' | translate}} </h1> <div class="blank-slate-pf-main-action"> <button data-toggle="modal" data-target="#newGwDialog" class="btn btn-primary btn-lg"> {{\'Configure new provider\' | translate}} </button> </div> </div> </div> \x3c!-- new trunk modal --\x3e <div class="modal fade" id="newGwDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel">{{\'Provider settings\' | translate}}</h4> </div> <form class="form-horizontal" ng-submit="create()"> <div class="modal-body"> \x3c!-- error message --\x3e <div ng-show="onSaveError" class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'VoIP trunk error\'}}</strong> {{\'VoIP trunk creation failed\' | translate}}. </div> \x3c!-- start form fields --\x3e <div class="form-group"> <label class="col-sm-3 control-label">{{\'Provider\' | translate}}</label> <div class="col-sm-9"> <select pf-select="{ width: \'100%\', noneSelectedText: \'-\' }" ng-model="trunk.provider" ng-options="m.provider as m.description for m in providers"> <option value="">-</option> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Trunk name\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="trunk.name" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Username\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="trunk.username" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Password\' | translate}}</label> <div class="col-sm-9"> <input type="password" ng-model="trunk.password" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Phone number\' | translate}}</label> <div class="col-sm-9"> <input type="text" ng-model="trunk.phone" class="form-control" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Allowed codec\' | translate}}</label> <div class="col-sm-9"> <select title="-" multiple pf-select="{ width: \'100%\' }" ng-model="trunk.codecs" ng-options="p as p for p in availableCodecs"> </select> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">{{\'Force codec\' | translate}}</label> <div class="col-sm-1"> <input bs-switch ng-model="trunk.forceCodec" id="bootstrap-switch-forcecodec" class="bootstrap-switch" type="checkbox"> </div> </div> </div> <div class="modal-footer"> <div class="right mb-10 h-18"> <span ng-show="onSave" class="spinner spinner-sm float-right"></span> <span ng-show="onSaveSuccess" class="pficon pficon-ok float-right fz-18 mt-1"></span> <span ng-show="onSaveError" class="pficon pficon-error-circle-o float-right fz-18 mt-1"> </span></div> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button> <button type="submit" class="btn btn-primary">{{"Save" | translate}}</button> </div> </form> </div> </div> </div> \x3c!-- confirm delete modal --\x3e <div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Delete configuration" | translate}} {{selectedTrunk.name}} </h4> </div> <div class="modal-body"> \x3c!-- error message --\x3e <div ng-show="onDeleteError" class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'VoIP trunk error\'}}.</strong> {{\'VoIP trunk delete failed\' | translate}}. </div> <div class="form-group medium-font"> {{ "Are you sure" | translate }} ? </div> </div> <div class="modal-footer submit"> <div class="right mb-10 h-18"> <span ng-show="onDelete" class="spinner spinner-sm float-right"></span> <span ng-show="onDeleteSuccess" class="pficon pficon-ok float-right fz-18 mt-1"></span> <span ng-show="onDeleteError && !onDelete" class="pficon pficon-error-circle-o float-right fz-18 mt-1"> </span></div> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Cancel" | translate }}</button> <button type="button" class="btn btn-danger" ng-click="deleteTrunk(selectedTrunk)"> {{ "Delete" | translate }} </button> </div> </div> </div> </div> \x3c!-- change parameter modal --\x3e <div class="modal fade" id="changePWDModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> <span class="pficon pficon-close"></span> </button> <h4 class="modal-title" id="myModalLabel"> {{"Edit" | translate}}: {{selectedTrunk.name}} </h4> </div> <div class="modal-body"> \x3c!-- error message --\x3e <div ng-show="onPWDChangeError" class="alert alert-danger alert-dismissable"> <span class="pficon pficon-error-circle-o"></span> <strong>{{\'The change was not successful\'}}.</strong> {{\'Please try again\' | translate}}. </div> <div class="form-horizontal resizeModal"> <div class="form-group mt-25"> <div class="col-sm-3 control-label"> <label>{{\'Trunk name\' | translate}}</label> </div> <div class="col-sm-9"> <input class="form-control" ng-model="editedSelectedTrunk.username" type="text"> </div> </div> </div> <div class="form-horizontal resizeModal"> <div class="form-group mt-25"> <div class="col-sm-3 control-label"> <label data-toggle="tooltip" data-placement="left" title="{{\'Add the password provided by the provider\' | translate}}">{{"New password" | translate}}</label> </div> <div class="col-sm-9"> <div class="input-group display-flex"> <input class="form-control" ng-model="newPwd" type="{{showPWDChange ? \'text\' : \'password\'}}"> <button ng-click="showPWDChange = !showPWDChange" class="btn btn-default mln-1 zindex-2"> <span ng-class="showPWDChange ? \'fa fa-eye-slash\' : \'fa fa-eye\'" class="fa fa-eye"></span> </button> </div> </div> </div> </div> <div class="form-horizontal resizeModal"> <div class="form-group mt-25"> <div class="col-sm-3 control-label"> <label>{{\'Phone number\' | translate}}</label> </div> <div class="col-sm-9"> <input class="form-control" ng-model="editedSelectedTrunk.outcid" type="text"> </div> </div> </div> <div class="form-horizontal resizeModal"> <div class="form-group mt-25"> <div class="col-sm-3 control-label"> <label>{{\'Favourite codecs\' | translate}} </label> </div> <div class="col-sm-9"> <select class="mt-3" title="-" multiple pf-select="{ width: \'100%\' }" ng-model="editedSelectedTrunk.info[editedSelectedTrunk.name].codecs" ng-options="p as p for p in availableCodecs"></select> </div> </div> </div> </div> <div class="form-horizontal"> <div class="form-group mt-25"> <div class="col-sm-3 control-label"> <label>{{\'Force codec\' | translate}}</label> </div> <div class="col-sm-1 forceCodecEdit"> <input bs-switch ng-model="editedSelectedTrunk.forceCodec" class="bootstrap-switch" type="checkbox"> </div> </div> </div> <div class="modal-footer submit"> <div class="right mb-10 h-18"> <span ng-show="onChange" class="spinner spinner-sm float-right"></span> <span ng-show="onChangeSuccess" class="pficon pficon-ok float-right fz-18 mt-1"></span> <span ng-show="onChangeError && !onPWDChange" class="pficon pficon-error-circle-o float-right fz-18 mt-1"> </span></div> <button type="button" class="btn btn-default" data-dismiss="modal">{{ "Close" | translate }}</button> <button type="button" class="btn btn-primary" ng-click="editTrunks(editedSelectedTrunk)"> {{ "Save" | translate }} </button> </div> </div> </div> </div> <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> </div>'),e.put("views/users.html",'<div class="blank-slate-pf no-border" ng-if="showConfigSwitch"> <div class="blank-slate-pf-icon"> <span class="pficon pficon-server"></span> </div> <h1> {{\'Choose how to manage your PBX users\' | translate}} </h1> <p> {{\'You can choose the users base to use for your PBX installation\' | translate}}. </p> <p> {{\'Local LDAP, to run a new installation of LDAP Server that can be managed directly from your PBX\' | translate}}. </p> <p> {{\'Configure Provider, to setup an already existing LDAP or Active Directory Server or to setup a new one using the Server Manager\' | translate}}. </p> <p> {{\'Learn more about this\' | translate}} <a target="_blank" href="{{customConfig.BRAND_DOCS}}">{{\'on the documentation\' | translate}}</a>. </p> <div class="blank-slate-pf-main-action"> <button id="legacy-button" ng-click="makeChoice(\'legacy\')" class="btn btn-primary btn-lgg handle-margin"> {{\'Local LDAP\' | translate}} </button> <button id="uc-button" ng-click="goNethserverSssdConfig()" class="btn btn-primary btn-lgg"> {{\'Configure Provider\' | translate}} </button> </div> <div ng-if="startInstall" class="progress-content"> <div class="progress-description"> <div ng-if="currentProgress < 100 && currentProgress != -1" class="spinner spinner-xs spinner-inline"></div> <span ng-if="currentProgress == 100" class="pficon pficon-ok"></span> <span ng-if="currentProgress == -1" class="pficon pficon-error-circle-o"></span> <span ng-if="currentProgress != -1"><strong>{{\'Installing\' | translate}}:</strong> {{"LDAP" | translate}}</span> <span ng-if="currentProgress == -1"><strong>{{\'Error\' | translate}}:</strong> {{\'Installation failed\' | translate}}</span> </div> <div class="progress progress-label-top-right"> <div class="progress-bar {{currentProgress == -1 ? \'progress-bar-danger\' : \'progress-bar-success\'}}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: {{currentProgress == -1 ? \'100\' : currentProgress}}%"> <span>{{currentProgress == -1 ? \'100\' : currentProgress}}%</span> </div> </div> <div ng-if="currentProgress == 100" class="blank-slate-pf-main-action"> <button ng-click="nextStepUsers()" class="btn btn-primary btn-lg">{{\'Next\' | translate}}</button> </div> </div> </div>')}]);